var q0=t=>{throw TypeError(t)};var Si=(t,e,n)=>e.has(t)?q0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);function Rd(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var mr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function ml(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ya(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Od={exports:{}},yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0=Symbol.for("react.transitional.element"),V0=Symbol.for("react.fragment");function Ad(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:G0,type:t,key:r,ref:e!==void 0?e:null,props:n}}yl.Fragment=V0;yl.jsx=Ad;yl.jsxs=Ad;Od.exports=yl;var E=Od.exports,xd={exports:{}},L={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=Symbol.for("react.transitional.element"),Y0=Symbol.for("react.portal"),K0=Symbol.for("react.fragment"),J0=Symbol.for("react.strict_mode"),Q0=Symbol.for("react.profiler"),X0=Symbol.for("react.consumer"),Z0=Symbol.for("react.context"),F0=Symbol.for("react.forward_ref"),W0=Symbol.for("react.suspense"),ev=Symbol.for("react.memo"),kd=Symbol.for("react.lazy"),tv=Symbol.for("react.activity"),Ef=Symbol.iterator;function nv(t){return t===null||typeof t!="object"?null:(t=Ef&&t[Ef]||t["@@iterator"],typeof t=="function"?t:null)}var jd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dd=Object.assign,Nd={};function ci(t,e,n){this.props=t,this.context=e,this.refs=Nd,this.updater=n||jd}ci.prototype.isReactComponent={};ci.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ci.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ud(){}Ud.prototype=ci.prototype;function su(t,e,n){this.props=t,this.context=e,this.refs=Nd,this.updater=n||jd}var lu=su.prototype=new Ud;lu.constructor=su;Dd(lu,ci.prototype);lu.isPureReactComponent=!0;var Tf=Array.isArray;function Mo(){}var ie={H:null,A:null,T:null,S:null},Md=Object.prototype.hasOwnProperty;function ou(t,e,n){var r=n.ref;return{$$typeof:au,type:t,key:e,ref:r!==void 0?r:null,props:n}}function rv(t,e){return ou(t.type,e,t.props)}function cu(t){return typeof t=="object"&&t!==null&&t.$$typeof===au}function iv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cf=/\/+/g;function ql(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iv(""+t.key):e.toString(36)}function av(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Mo,Mo):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Tr(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case au:case Y0:s=!0;break;case kd:return s=t._init,Tr(s(t._payload),e,n,r,i)}}if(s)return i=i(t),s=r===""?"."+ql(t,0):r,Tf(i)?(n="",s!=null&&(n=s.replace(Cf,"$&/")+"/"),Tr(i,e,n,"",function(c){return c})):i!=null&&(cu(i)&&(i=rv(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(Cf,"$&/")+"/")+s)),e.push(i)),1;s=0;var l=r===""?".":r+":";if(Tf(t))for(var o=0;o<t.length;o++)r=t[o],a=l+ql(r,o),s+=Tr(r,e,n,a,i);else if(o=nv(t),typeof o=="function")for(t=o.call(t),o=0;!(r=t.next()).done;)r=r.value,a=l+ql(r,o++),s+=Tr(r,e,n,a,i);else if(a==="object"){if(typeof t.then=="function")return Tr(av(t),e,n,r,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function Da(t,e,n){if(t==null)return t;var r=[],i=0;return Tr(t,r,"","",function(a){return e.call(n,a,i++)}),r}function sv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wf=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},lv={map:Da,forEach:function(t,e,n){Da(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Da(t,function(){e++}),e},toArray:function(t){return Da(t,function(e){return e})||[]},only:function(t){if(!cu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};L.Activity=tv;L.Children=lv;L.Component=ci;L.Fragment=K0;L.Profiler=Q0;L.PureComponent=su;L.StrictMode=J0;L.Suspense=W0;L.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie;L.__COMPILER_RUNTIME={__proto__:null,c:function(t){return ie.H.useMemoCache(t)}};L.cache=function(t){return function(){return t.apply(null,arguments)}};L.cacheSignal=function(){return null};L.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=Dd({},t.props),i=t.key;if(e!=null)for(a in e.key!==void 0&&(i=""+e.key),e)!Md.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(r[a]=e[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];r.children=s}return ou(t.type,i,r)};L.createContext=function(t){return t={$$typeof:Z0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:X0,_context:t},t};L.createElement=function(t,e,n){var r,i={},a=null;if(e!=null)for(r in e.key!==void 0&&(a=""+e.key),e)Md.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),o=0;o<s;o++)l[o]=arguments[o+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return ou(t,a,i)};L.createRef=function(){return{current:null}};L.forwardRef=function(t){return{$$typeof:F0,render:t}};L.isValidElement=cu;L.lazy=function(t){return{$$typeof:kd,_payload:{_status:-1,_result:t},_init:sv}};L.memo=function(t,e){return{$$typeof:ev,type:t,compare:e===void 0?null:e}};L.startTransition=function(t){var e=ie.T,n={};ie.T=n;try{var r=t(),i=ie.S;i!==null&&i(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(Mo,wf)}catch(a){wf(a)}finally{e!==null&&n.types!==null&&(e.types=n.types),ie.T=e}};L.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()};L.use=function(t){return ie.H.use(t)};L.useActionState=function(t,e,n){return ie.H.useActionState(t,e,n)};L.useCallback=function(t,e){return ie.H.useCallback(t,e)};L.useContext=function(t){return ie.H.useContext(t)};L.useDebugValue=function(){};L.useDeferredValue=function(t,e){return ie.H.useDeferredValue(t,e)};L.useEffect=function(t,e){return ie.H.useEffect(t,e)};L.useEffectEvent=function(t){return ie.H.useEffectEvent(t)};L.useId=function(){return ie.H.useId()};L.useImperativeHandle=function(t,e,n){return ie.H.useImperativeHandle(t,e,n)};L.useInsertionEffect=function(t,e){return ie.H.useInsertionEffect(t,e)};L.useLayoutEffect=function(t,e){return ie.H.useLayoutEffect(t,e)};L.useMemo=function(t,e){return ie.H.useMemo(t,e)};L.useOptimistic=function(t,e){return ie.H.useOptimistic(t,e)};L.useReducer=function(t,e,n){return ie.H.useReducer(t,e,n)};L.useRef=function(t){return ie.H.useRef(t)};L.useState=function(t){return ie.H.useState(t)};L.useSyncExternalStore=function(t,e,n){return ie.H.useSyncExternalStore(t,e,n)};L.useTransition=function(){return ie.H.useTransition()};L.version="19.2.1";xd.exports=L;var R=xd.exports;const ov=ml(R);var zd={exports:{}},vl={},Bd={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,H){var O=k.length;k.push(H);e:for(;0<O;){var $=O-1>>>1,B=k[$];if(0<i(B,H))k[$]=H,k[O]=B,O=$;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var H=k[0],O=k.pop();if(O!==H){k[0]=O;e:for(var $=0,B=k.length,Y=B>>>1;$<Y;){var He=2*($+1)-1,Fe=k[He],ce=He+1,Mn=k[ce];if(0>i(Fe,O))ce<B&&0>i(Mn,Fe)?(k[$]=Mn,k[ce]=O,$=ce):(k[$]=Fe,k[He]=O,$=He);else if(ce<B&&0>i(Mn,O))k[$]=Mn,k[ce]=O,$=ce;else break e}}return H}function i(k,H){var O=k.sortIndex-H.sortIndex;return O!==0?O:k.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var o=[],c=[],u=1,f=null,h=3,d=!1,y=!1,v=!1,b=!1,p=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;function _(k){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=k)r(c),H.sortIndex=H.expirationTime,e(o,H);else break;H=n(c)}}function w(k){if(v=!1,_(k),!y)if(n(o)!==null)y=!0,x||(x=!0,he());else{var H=n(c);H!==null&&Un(w,H.startTime-k)}}var x=!1,C=-1,T=5,A=-1;function M(){return b?!0:!(t.unstable_now()-A<T)}function oe(){if(b=!1,x){var k=t.unstable_now();A=k;var H=!0;try{e:{y=!1,v&&(v=!1,g(C),C=-1),d=!0;var O=h;try{t:{for(_(k),f=n(o);f!==null&&!(f.expirationTime>k&&M());){var $=f.callback;if(typeof $=="function"){f.callback=null,h=f.priorityLevel;var B=$(f.expirationTime<=k);if(k=t.unstable_now(),typeof B=="function"){f.callback=B,_(k),H=!0;break t}f===n(o)&&r(o),_(k)}else r(o);f=n(o)}if(f!==null)H=!0;else{var Y=n(c);Y!==null&&Un(w,Y.startTime-k),H=!1}}break e}finally{f=null,h=O,d=!1}H=void 0}}finally{H?he():x=!1}}}var he;if(typeof m=="function")he=function(){m(oe)};else if(typeof MessageChannel<"u"){var gr=new MessageChannel,bi=gr.port2;gr.port1.onmessage=oe,he=function(){bi.postMessage(null)}}else he=function(){p(oe,0)};function Un(k,H){C=p(function(){k(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(k){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var O=h;h=H;try{return k()}finally{h=O}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(k,H){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var O=h;h=k;try{return H()}finally{h=O}},t.unstable_scheduleCallback=function(k,H,O){var $=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?$+O:$):O=$,k){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=O+B,k={id:u++,callback:H,priorityLevel:k,startTime:O,expirationTime:B,sortIndex:-1},O>$?(k.sortIndex=O,e(c,k),n(o)===null&&k===n(c)&&(v?(g(C),C=-1):v=!0,Un(w,O-$))):(k.sortIndex=B,e(o,k),y||d||(y=!0,x||(x=!0,he()))),k},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(k){var H=h;return function(){var O=h;h=H;try{return k.apply(this,arguments)}finally{h=O}}}})(Ld);Bd.exports=Ld;var cv=Bd.exports,$d={exports:{}},Pe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv=R;function Pd(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Wt(){}var Le={d:{f:Wt,r:function(){throw Error(Pd(522))},D:Wt,C:Wt,L:Wt,m:Wt,X:Wt,S:Wt,M:Wt},p:0,findDOMNode:null},fv=Symbol.for("react.portal");function hv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fv,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var Li=uv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _l(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Pe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Le;Pe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Pd(299));return hv(t,e,null,n)};Pe.flushSync=function(t){var e=Li.T,n=Le.p;try{if(Li.T=null,Le.p=2,t)return t()}finally{Li.T=e,Le.p=n,Le.d.f()}};Pe.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Le.d.C(t,e))};Pe.prefetchDNS=function(t){typeof t=="string"&&Le.d.D(t)};Pe.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=_l(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Le.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):n==="script"&&Le.d.X(t,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Pe.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=_l(e.as,e.crossOrigin);Le.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Le.d.M(t)};Pe.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=_l(n,e.crossOrigin);Le.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Pe.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=_l(e.as,e.crossOrigin);Le.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Le.d.m(t)};Pe.requestFormReset=function(t){Le.d.r(t)};Pe.unstable_batchedUpdates=function(t,e){return t(e)};Pe.useFormState=function(t,e,n){return Li.H.useFormState(t,e,n)};Pe.useFormStatus=function(){return Li.H.useHostTransitionStatus()};Pe.version="19.2.1";function Hd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hd)}catch(t){console.error(t)}}Hd(),$d.exports=Pe;var dv=$d.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Te=cv,Id=R,pv=dv;function S(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function qd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function va(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vd(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rf(t){if(va(t)!==t)throw Error(S(188))}function gv(t){var e=t.alternate;if(!e){if(e=va(t),e===null)throw Error(S(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Rf(i),t;if(a===r)return Rf(i),e;a=a.sibling}throw Error(S(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(S(189))}}if(n.alternate!==r)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?t:e}function Yd(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Yd(t),e!==null)return e;t=t.sibling}return null}var ae=Object.assign,mv=Symbol.for("react.element"),Na=Symbol.for("react.transitional.element"),ki=Symbol.for("react.portal"),Ar=Symbol.for("react.fragment"),Kd=Symbol.for("react.strict_mode"),zo=Symbol.for("react.profiler"),Jd=Symbol.for("react.consumer"),Pt=Symbol.for("react.context"),uu=Symbol.for("react.forward_ref"),Bo=Symbol.for("react.suspense"),Lo=Symbol.for("react.suspense_list"),fu=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),$o=Symbol.for("react.activity"),yv=Symbol.for("react.memo_cache_sentinel"),Of=Symbol.iterator;function Ei(t){return t===null||typeof t!="object"?null:(t=Of&&t[Of]||t["@@iterator"],typeof t=="function"?t:null)}var vv=Symbol.for("react.client.reference");function Po(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===vv?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ar:return"Fragment";case zo:return"Profiler";case Kd:return"StrictMode";case Bo:return"Suspense";case Lo:return"SuspenseList";case $o:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ki:return"Portal";case Pt:return t.displayName||"Context";case Jd:return(t._context.displayName||"Context")+".Consumer";case uu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fu:return e=t.displayName||null,e!==null?e:Po(t.type)||"Memo";case nn:e=t._payload,t=t._init;try{return Po(t(e))}catch{}}return null}var ji=Array.isArray,z=Id.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=pv.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Zn={pending:!1,data:null,method:null,action:null},Ho=[],xr=-1;function jt(t){return{current:t}}function Re(t){0>xr||(t.current=Ho[xr],Ho[xr]=null,xr--)}function te(t,e){xr++,Ho[xr]=t.current,t.current=e}var kt=jt(null),ea=jt(null),yn=jt(null),As=jt(null);function xs(t,e){switch(te(yn,e),te(ea,t),te(kt,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Nh(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Nh(e),t=pm(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Re(kt),te(kt,t)}function Xr(){Re(kt),Re(ea),Re(yn)}function Io(t){t.memoizedState!==null&&te(As,t);var e=kt.current,n=pm(e,t.type);e!==n&&(te(ea,t),te(kt,n))}function ks(t){ea.current===t&&(Re(kt),Re(ea)),As.current===t&&(Re(As),fa._currentValue=Zn)}var Gl,Af;function Pn(t){if(Gl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gl=e&&e[1]||"",Af=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gl+t+Af}var Vl=!1;function Yl(t,e){if(!t||Vl)return"";Vl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(d){var h=d}Reflect.construct(t,[],f)}else{try{f.call()}catch(d){h=d}t.call(f.prototype)}}else{try{throw Error()}catch(d){h=d}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(d){if(d&&h&&typeof d.stack=="string")return[d.stack,h.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],l=a[1];if(s&&l){var o=s.split(`
`),c=l.split(`
`);for(i=r=0;r<o.length&&!o[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===o.length||i===c.length)for(r=o.length-1,i=c.length-1;1<=r&&0<=i&&o[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(o[r]!==c[i]){if(r!==1||i!==1)do if(r--,i--,0>i||o[r]!==c[i]){var u=`
`+o[r].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=r&&0<=i);break}}}finally{Vl=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Pn(n):""}function _v(t,e){switch(t.tag){case 26:case 27:case 5:return Pn(t.type);case 16:return Pn("Lazy");case 13:return t.child!==e&&e!==null?Pn("Suspense Fallback"):Pn("Suspense");case 19:return Pn("SuspenseList");case 0:case 15:return Yl(t.type,!1);case 11:return Yl(t.type.render,!1);case 1:return Yl(t.type,!0);case 31:return Pn("Activity");default:return""}}function xf(t){try{var e="",n=null;do e+=_v(t,n),n=t,t=t.return;while(t);return e}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var qo=Object.prototype.hasOwnProperty,hu=Te.unstable_scheduleCallback,Kl=Te.unstable_cancelCallback,bv=Te.unstable_shouldYield,Sv=Te.unstable_requestPaint,it=Te.unstable_now,Ev=Te.unstable_getCurrentPriorityLevel,Qd=Te.unstable_ImmediatePriority,Xd=Te.unstable_UserBlockingPriority,js=Te.unstable_NormalPriority,Tv=Te.unstable_LowPriority,Zd=Te.unstable_IdlePriority,Cv=Te.log,wv=Te.unstable_setDisableYieldValue,_a=null,at=null;function fn(t){if(typeof Cv=="function"&&wv(t),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(_a,t)}catch{}}var st=Math.clz32?Math.clz32:Av,Rv=Math.log,Ov=Math.LN2;function Av(t){return t>>>=0,t===0?32:31-(Rv(t)/Ov|0)|0}var Ua=256,Ma=262144,za=4194304;function Hn(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function bl(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var i=0,a=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var l=r&134217727;return l!==0?(r=l&~a,r!==0?i=Hn(r):(s&=l,s!==0?i=Hn(s):n||(n=l&~t,n!==0&&(i=Hn(n))))):(l=r&~a,l!==0?i=Hn(l):s!==0?i=Hn(s):n||(n=r&~t,n!==0&&(i=Hn(n)))),i===0?0:e!==0&&e!==i&&!(e&a)&&(a=i&-i,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:i}function ba(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function xv(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fd(){var t=za;return za<<=1,!(za&62914560)&&(za=4194304),t}function Jl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sa(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function kv(t,e,n,r,i,a){var s=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,o=t.expirationTimes,c=t.hiddenUpdates;for(n=s&~n;0<n;){var u=31-st(n),f=1<<u;l[u]=0,o[u]=-1;var h=c[u];if(h!==null)for(c[u]=null,u=0;u<h.length;u++){var d=h[u];d!==null&&(d.lane&=-536870913)}n&=~f}r!==0&&Wd(t,r,0),a!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=a&~(s&~e))}function Wd(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-st(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&261930}function ep(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-st(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}function tp(t,e){var n=e&-e;return n=n&42?1:du(n),n&(t.suspendedLanes|e)?0:n}function du(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function pu(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function np(){var t=J.p;return t!==0?t:(t=window.event,t===void 0?32:wm(t.type))}function kf(t,e){var n=J.p;try{return J.p=t,e()}finally{J.p=n}}var jn=Math.random().toString(36).slice(2),ke="__reactFiber$"+jn,Xe="__reactProps$"+jn,ui="__reactContainer$"+jn,Go="__reactEvents$"+jn,jv="__reactListeners$"+jn,Dv="__reactHandles$"+jn,jf="__reactResources$"+jn,Ea="__reactMarker$"+jn;function gu(t){delete t[ke],delete t[Xe],delete t[Go],delete t[jv],delete t[Dv]}function kr(t){var e=t[ke];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ui]||n[ke]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lh(t);t!==null;){if(n=t[ke])return n;t=Lh(t)}return e}t=n,n=t.parentNode}return null}function fi(t){if(t=t[ke]||t[ui]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Di(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(S(33))}function Pr(t){var e=t[jf];return e||(e=t[jf]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function we(t){t[Ea]=!0}var rp=new Set,ip={};function lr(t,e){Zr(t,e),Zr(t+"Capture",e)}function Zr(t,e){for(ip[t]=e,t=0;t<e.length;t++)rp.add(e[t])}var Nv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Df={},Nf={};function Uv(t){return qo.call(Nf,t)?!0:qo.call(Df,t)?!1:Nv.test(t)?Nf[t]=!0:(Df[t]=!0,!1)}function rs(t,e,n){if(Uv(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Ba(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Nt(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}function ft(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ap(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Mv(t,e,n){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vo(t){if(!t._valueTracker){var e=ap(t)?"checked":"value";t._valueTracker=Mv(t,e,""+t[e])}}function sp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ap(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ds(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zv=/[\n"\\]/g;function pt(t){return t.replace(zv,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Yo(t,e,n,r,i,a,s,l){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+ft(e)):t.value!==""+ft(e)&&(t.value=""+ft(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?Ko(t,s,ft(e)):n!=null?Ko(t,s,ft(n)):r!=null&&t.removeAttribute("value"),i==null&&a!=null&&(t.defaultChecked=!!a),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+ft(l):t.removeAttribute("name")}function lp(t,e,n,r,i,a,s,l){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null)){Vo(t);return}n=n!=null?""+ft(n):"",e=e!=null?""+ft(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}r=r??i,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=l?t.checked:!!r,t.defaultChecked=!!r,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s),Vo(t)}function Ko(t,e,n){e==="number"&&Ds(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Hr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ft(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function op(t,e,n){if(e!=null&&(e=""+ft(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+ft(n):""}function cp(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(S(92));if(ji(r)){if(1<r.length)throw Error(S(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=ft(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r),Vo(t)}function Fr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uf(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||Bv.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function up(t,e,n){if(e!=null&&typeof e!="object")throw Error(S(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var i in e)r=e[i],e.hasOwnProperty(i)&&n[i]!==r&&Uf(t,i,r)}else for(var a in e)e.hasOwnProperty(a)&&Uf(t,a,e[a])}function mu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$v=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function is(t){return $v.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ht(){}var Jo=null;function yu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jr=null,Ir=null;function Mf(t){var e=fi(t);if(e&&(t=e.stateNode)){var n=t[Xe]||null;e:switch(t=e.stateNode,e.type){case"input":if(Yo(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pt(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r[Xe]||null;if(!i)throw Error(S(90));Yo(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&sp(r)}break e;case"textarea":op(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Hr(t,!!n.multiple,e,!1)}}}var Ql=!1;function fp(t,e,n){if(Ql)return t(e,n);Ql=!0;try{var r=t(e);return r}finally{if(Ql=!1,(jr!==null||Ir!==null)&&(Dl(),jr&&(e=jr,t=Ir,Ir=jr=null,Mf(e),t)))for(e=0;e<t.length;e++)Mf(t[e])}}function ta(t,e){var n=t.stateNode;if(n===null)return null;var r=n[Xe]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(S(231,e,typeof n));return n}var Yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qo=!1;if(Yt)try{var Ti={};Object.defineProperty(Ti,"passive",{get:function(){Qo=!0}}),window.addEventListener("test",Ti,Ti),window.removeEventListener("test",Ti,Ti)}catch{Qo=!1}var hn=null,vu=null,as=null;function hp(){if(as)return as;var t,e=vu,n=e.length,r,i="value"in hn?hn.value:hn.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return as=i.slice(t,1<r?1-r:void 0)}function ss(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function La(){return!0}function zf(){return!1}function Ze(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?La:zf,this.isPropagationStopped=zf,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=La)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=La)},persist:function(){},isPersistent:La}),e}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sl=Ze(or),Ta=ae({},or,{view:0,detail:0}),Pv=Ze(Ta),Xl,Zl,Ci,El=ae({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_u,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ci&&(Ci&&t.type==="mousemove"?(Xl=t.screenX-Ci.screenX,Zl=t.screenY-Ci.screenY):Zl=Xl=0,Ci=t),Xl)},movementY:function(t){return"movementY"in t?t.movementY:Zl}}),Bf=Ze(El),Hv=ae({},El,{dataTransfer:0}),Iv=Ze(Hv),qv=ae({},Ta,{relatedTarget:0}),Fl=Ze(qv),Gv=ae({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),Vv=Ze(Gv),Yv=ae({},or,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kv=Ze(Yv),Jv=ae({},or,{data:0}),Lf=Ze(Jv),Qv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Zv[t])?!!e[t]:!1}function _u(){return Fv}var Wv=ae({},Ta,{key:function(t){if(t.key){var e=Qv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ss(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_u,charCode:function(t){return t.type==="keypress"?ss(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ss(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),e_=Ze(Wv),t_=ae({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$f=Ze(t_),n_=ae({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_u}),r_=Ze(n_),i_=ae({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),a_=Ze(i_),s_=ae({},El,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),l_=Ze(s_),o_=ae({},or,{newState:0,oldState:0}),c_=Ze(o_),u_=[9,13,27,32],bu=Yt&&"CompositionEvent"in window,$i=null;Yt&&"documentMode"in document&&($i=document.documentMode);var f_=Yt&&"TextEvent"in window&&!$i,dp=Yt&&(!bu||$i&&8<$i&&11>=$i),Pf=" ",Hf=!1;function pp(t,e){switch(t){case"keyup":return u_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dr=!1;function h_(t,e){switch(t){case"compositionend":return gp(e);case"keypress":return e.which!==32?null:(Hf=!0,Pf);case"textInput":return t=e.data,t===Pf&&Hf?null:t;default:return null}}function d_(t,e){if(Dr)return t==="compositionend"||!bu&&pp(t,e)?(t=hp(),as=vu=hn=null,Dr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dp&&e.locale!=="ko"?null:e.data;default:return null}}var p_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function If(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!p_[t.type]:e==="textarea"}function mp(t,e,n,r){jr?Ir?Ir.push(r):Ir=[r]:jr=r,e=Xs(e,"onChange"),0<e.length&&(n=new Sl("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pi=null,na=null;function g_(t){fm(t,0)}function Tl(t){var e=Di(t);if(sp(e))return t}function qf(t,e){if(t==="change")return e}var yp=!1;if(Yt){var Wl;if(Yt){var eo="oninput"in document;if(!eo){var Gf=document.createElement("div");Gf.setAttribute("oninput","return;"),eo=typeof Gf.oninput=="function"}Wl=eo}else Wl=!1;yp=Wl&&(!document.documentMode||9<document.documentMode)}function Vf(){Pi&&(Pi.detachEvent("onpropertychange",vp),na=Pi=null)}function vp(t){if(t.propertyName==="value"&&Tl(na)){var e=[];mp(e,na,t,yu(t)),fp(g_,e)}}function m_(t,e,n){t==="focusin"?(Vf(),Pi=e,na=n,Pi.attachEvent("onpropertychange",vp)):t==="focusout"&&Vf()}function y_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tl(na)}function v_(t,e){if(t==="click")return Tl(e)}function __(t,e){if(t==="input"||t==="change")return Tl(e)}function b_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ot=typeof Object.is=="function"?Object.is:b_;function ra(t,e){if(ot(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!qo.call(e,i)||!ot(t[i],e[i]))return!1}return!0}function Yf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kf(t,e){var n=Yf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yf(n)}}function _p(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_p(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Ds(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ds(t.document)}return e}function Su(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var S_=Yt&&"documentMode"in document&&11>=document.documentMode,Nr=null,Xo=null,Hi=null,Zo=!1;function Jf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zo||Nr==null||Nr!==Ds(r)||(r=Nr,"selectionStart"in r&&Su(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hi&&ra(Hi,r)||(Hi=r,r=Xs(Xo,"onSelect"),0<r.length&&(e=new Sl("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Nr)))}function zn(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ur={animationend:zn("Animation","AnimationEnd"),animationiteration:zn("Animation","AnimationIteration"),animationstart:zn("Animation","AnimationStart"),transitionrun:zn("Transition","TransitionRun"),transitionstart:zn("Transition","TransitionStart"),transitioncancel:zn("Transition","TransitionCancel"),transitionend:zn("Transition","TransitionEnd")},to={},Sp={};Yt&&(Sp=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function cr(t){if(to[t])return to[t];if(!Ur[t])return t;var e=Ur[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sp)return to[t]=e[n];return t}var Ep=cr("animationend"),Tp=cr("animationiteration"),Cp=cr("animationstart"),E_=cr("transitionrun"),T_=cr("transitionstart"),C_=cr("transitioncancel"),wp=cr("transitionend"),Rp=new Map,Fo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fo.push("scrollEnd");function wt(t,e){Rp.set(t,e),lr(e,[t])}var Ns=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ut=[],Mr=0,Eu=0;function Cl(){for(var t=Mr,e=Eu=Mr=0;e<t;){var n=ut[e];ut[e++]=null;var r=ut[e];ut[e++]=null;var i=ut[e];ut[e++]=null;var a=ut[e];if(ut[e++]=null,r!==null&&i!==null){var s=r.pending;s===null?i.next=i:(i.next=s.next,s.next=i),r.pending=i}a!==0&&Op(n,i,a)}}function wl(t,e,n,r){ut[Mr++]=t,ut[Mr++]=e,ut[Mr++]=n,ut[Mr++]=r,Eu|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function Tu(t,e,n,r){return wl(t,e,n,r),Us(t)}function ur(t,e){return wl(t,null,null,e),Us(t)}function Op(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=t.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(i=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,i&&e!==null&&(i=31-st(n),t=a.hiddenUpdates,r=t[i],r===null?t[i]=[e]:r.push(e),e.lane=n|536870912),a):null}function Us(t){if(50<Xi)throw Xi=0,_c=null,Error(S(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var zr={};function w_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tt(t,e,n,r){return new w_(t,e,n,r)}function Cu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qt(t,e){var n=t.alternate;return n===null?(n=tt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Ap(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ls(t,e,n,r,i,a){var s=0;if(r=t,typeof t=="function")Cu(t)&&(s=1);else if(typeof t=="string")s=kb(t,n,kt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case $o:return t=tt(31,n,e,i),t.elementType=$o,t.lanes=a,t;case Ar:return Fn(n.children,i,a,e);case Kd:s=8,i|=24;break;case zo:return t=tt(12,n,e,i|2),t.elementType=zo,t.lanes=a,t;case Bo:return t=tt(13,n,e,i),t.elementType=Bo,t.lanes=a,t;case Lo:return t=tt(19,n,e,i),t.elementType=Lo,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pt:s=10;break e;case Jd:s=9;break e;case uu:s=11;break e;case fu:s=14;break e;case nn:s=16,r=null;break e}s=29,n=Error(S(130,t===null?"null":typeof t,"")),r=null}return e=tt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Fn(t,e,n,r){return t=tt(7,t,r,e),t.lanes=n,t}function no(t,e,n){return t=tt(6,t,null,e),t.lanes=n,t}function xp(t){var e=tt(18,null,null,0);return e.stateNode=t,e}function ro(t,e,n){return e=tt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Qf=new WeakMap;function gt(t,e){if(typeof t=="object"&&t!==null){var n=Qf.get(t);return n!==void 0?n:(e={value:t,source:e,stack:xf(e)},Qf.set(t,e),e)}return{value:t,source:e,stack:xf(e)}}var Br=[],Lr=0,Ms=null,ia=0,ht=[],dt=0,On=null,Ot=1,At="";function Lt(t,e){Br[Lr++]=ia,Br[Lr++]=Ms,Ms=t,ia=e}function kp(t,e,n){ht[dt++]=Ot,ht[dt++]=At,ht[dt++]=On,On=t;var r=Ot;t=At;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ot=1<<32-st(e)+i|n<<i|r,At=a+t}else Ot=1<<a|n<<i|r,At=t}function wu(t){t.return!==null&&(Lt(t,1),kp(t,1,0))}function Ru(t){for(;t===Ms;)Ms=Br[--Lr],Br[Lr]=null,ia=Br[--Lr],Br[Lr]=null;for(;t===On;)On=ht[--dt],ht[dt]=null,At=ht[--dt],ht[dt]=null,Ot=ht[--dt],ht[dt]=null}function jp(t,e){ht[dt++]=Ot,ht[dt++]=At,ht[dt++]=On,Ot=e.id,At=e.overflow,On=t}var je=null,re=null,V=!1,vn=null,mt=!1,Wo=Error(S(519));function An(t){var e=Error(S(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw aa(gt(e,t)),Wo}function Xf(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[ke]=t,e[Xe]=r,n){case"dialog":I("cancel",e),I("close",e);break;case"iframe":case"object":case"embed":I("load",e);break;case"video":case"audio":for(n=0;n<ca.length;n++)I(ca[n],e);break;case"source":I("error",e);break;case"img":case"image":case"link":I("error",e),I("load",e);break;case"details":I("toggle",e);break;case"input":I("invalid",e),lp(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":I("invalid",e);break;case"textarea":I("invalid",e),cp(e,r.value,r.defaultValue,r.children)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||dm(e.textContent,n)?(r.popover!=null&&(I("beforetoggle",e),I("toggle",e)),r.onScroll!=null&&I("scroll",e),r.onScrollEnd!=null&&I("scrollend",e),r.onClick!=null&&(e.onclick=Ht),e=!0):e=!1,e||An(t,!0)}function Zf(t){for(je=t.return;je;)switch(je.tag){case 5:case 31:case 13:mt=!1;return;case 27:case 3:mt=!0;return;default:je=je.return}}function yr(t){if(t!==je)return!1;if(!V)return Zf(t),V=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Cc(t.type,t.memoizedProps)),n=!n),n&&re&&An(t),Zf(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));re=Bh(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));re=Bh(t)}else e===27?(e=re,Dn(t.type)?(t=Ac,Ac=null,re=t):re=e):re=je?vt(t.stateNode.nextSibling):null;return!0}function nr(){re=je=null,V=!1}function io(){var t=vn;return t!==null&&(Ke===null?Ke=t:Ke.push.apply(Ke,t),vn=null),t}function aa(t){vn===null?vn=[t]:vn.push(t)}var ec=jt(null),fr=null,It=null;function an(t,e,n){te(ec,e._currentValue),e._currentValue=n}function Gt(t){t._currentValue=ec.current,Re(ec)}function tc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function nc(t,e,n,r){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){var s=i.child;a=a.firstContext;e:for(;a!==null;){var l=a;a=i;for(var o=0;o<e.length;o++)if(l.context===e[o]){a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),tc(a.return,n,t),r||(s=null);break e}a=l.next}}else if(i.tag===18){if(s=i.return,s===null)throw Error(S(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),tc(s,n,t),s=null}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}}function hi(t,e,n,r){t=null;for(var i=e,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var s=i.alternate;if(s===null)throw Error(S(387));if(s=s.memoizedProps,s!==null){var l=i.type;ot(i.pendingProps.value,s.value)||(t!==null?t.push(l):t=[l])}}else if(i===As.current){if(s=i.alternate,s===null)throw Error(S(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(fa):t=[fa])}i=i.return}t!==null&&nc(e,t,n,r),e.flags|=262144}function zs(t){for(t=t.firstContext;t!==null;){if(!ot(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function rr(t){fr=t,It=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function De(t){return Dp(fr,t)}function $a(t,e){return fr===null&&rr(t),Dp(t,e)}function Dp(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},It===null){if(t===null)throw Error(S(308));It=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else It=It.next=e;return n}var R_=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},O_=Te.unstable_scheduleCallback,A_=Te.unstable_NormalPriority,be={$$typeof:Pt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ou(){return{controller:new R_,data:new Map,refCount:0}}function Ca(t){t.refCount--,t.refCount===0&&O_(A_,function(){t.controller.abort()})}var Ii=null,rc=0,Wr=0,qr=null;function x_(t,e){if(Ii===null){var n=Ii=[];rc=0,Wr=Fu(),qr={status:"pending",value:void 0,then:function(r){n.push(r)}}}return rc++,e.then(Ff,Ff),e}function Ff(){if(--rc===0&&Ii!==null){qr!==null&&(qr.status="fulfilled");var t=Ii;Ii=null,Wr=0,qr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function k_(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(r.status="rejected",r.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),r}var Wf=z.S;z.S=function(t,e){Yg=it(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&x_(t,e),Wf!==null&&Wf(t,e)};var Wn=jt(null);function Au(){var t=Wn.current;return t!==null?t:W.pooledCache}function os(t,e){e===null?te(Wn,Wn.current):te(Wn,e.pool)}function Np(){var t=Au();return t===null?null:{parent:be._currentValue,pool:t}}var di=Error(S(460)),xu=Error(S(474)),Rl=Error(S(542)),Bs={then:function(){}};function eh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Up(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ht,Ht),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,nh(t),t;default:if(typeof e.status=="string")e.then(Ht,Ht);else{if(t=W,t!==null&&100<t.shellSuspendCounter)throw Error(S(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=r}},function(r){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,nh(t),t}throw er=e,di}}function In(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(er=n,di):n}}var er=null;function th(){if(er===null)throw Error(S(459));var t=er;return er=null,t}function nh(t){if(t===di||t===Rl)throw Error(S(483))}var Gr=null,sa=0;function Pa(t){var e=sa;return sa+=1,Gr===null&&(Gr=[]),Up(Gr,t,e)}function wi(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Ha(t,e){throw e.$$typeof===mv?Error(S(525)):(t=Object.prototype.toString.call(e),Error(S(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Mp(t){function e(p,g){if(t){var m=p.deletions;m===null?(p.deletions=[g],p.flags|=16):m.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p){for(var g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(p,g){return p=qt(p,g),p.index=0,p.sibling=null,p}function a(p,g,m){return p.index=m,t?(m=p.alternate,m!==null?(m=m.index,m<g?(p.flags|=67108866,g):m):(p.flags|=67108866,g)):(p.flags|=1048576,g)}function s(p){return t&&p.alternate===null&&(p.flags|=67108866),p}function l(p,g,m,_){return g===null||g.tag!==6?(g=no(m,p.mode,_),g.return=p,g):(g=i(g,m),g.return=p,g)}function o(p,g,m,_){var w=m.type;return w===Ar?u(p,g,m.props.children,_,m.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===nn&&In(w)===g.type)?(g=i(g,m.props),wi(g,m),g.return=p,g):(g=ls(m.type,m.key,m.props,null,p.mode,_),wi(g,m),g.return=p,g)}function c(p,g,m,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=ro(m,p.mode,_),g.return=p,g):(g=i(g,m.children||[]),g.return=p,g)}function u(p,g,m,_,w){return g===null||g.tag!==7?(g=Fn(m,p.mode,_,w),g.return=p,g):(g=i(g,m),g.return=p,g)}function f(p,g,m){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=no(""+g,p.mode,m),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Na:return m=ls(g.type,g.key,g.props,null,p.mode,m),wi(m,g),m.return=p,m;case ki:return g=ro(g,p.mode,m),g.return=p,g;case nn:return g=In(g),f(p,g,m)}if(ji(g)||Ei(g))return g=Fn(g,p.mode,m,null),g.return=p,g;if(typeof g.then=="function")return f(p,Pa(g),m);if(g.$$typeof===Pt)return f(p,$a(p,g),m);Ha(p,g)}return null}function h(p,g,m,_){var w=g!==null?g.key:null;if(typeof m=="string"&&m!==""||typeof m=="number"||typeof m=="bigint")return w!==null?null:l(p,g,""+m,_);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Na:return m.key===w?o(p,g,m,_):null;case ki:return m.key===w?c(p,g,m,_):null;case nn:return m=In(m),h(p,g,m,_)}if(ji(m)||Ei(m))return w!==null?null:u(p,g,m,_,null);if(typeof m.then=="function")return h(p,g,Pa(m),_);if(m.$$typeof===Pt)return h(p,g,$a(p,m),_);Ha(p,m)}return null}function d(p,g,m,_,w){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return p=p.get(m)||null,l(g,p,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Na:return p=p.get(_.key===null?m:_.key)||null,o(g,p,_,w);case ki:return p=p.get(_.key===null?m:_.key)||null,c(g,p,_,w);case nn:return _=In(_),d(p,g,m,_,w)}if(ji(_)||Ei(_))return p=p.get(m)||null,u(g,p,_,w,null);if(typeof _.then=="function")return d(p,g,m,Pa(_),w);if(_.$$typeof===Pt)return d(p,g,m,$a(g,_),w);Ha(g,_)}return null}function y(p,g,m,_){for(var w=null,x=null,C=g,T=g=0,A=null;C!==null&&T<m.length;T++){C.index>T?(A=C,C=null):A=C.sibling;var M=h(p,C,m[T],_);if(M===null){C===null&&(C=A);break}t&&C&&M.alternate===null&&e(p,C),g=a(M,g,T),x===null?w=M:x.sibling=M,x=M,C=A}if(T===m.length)return n(p,C),V&&Lt(p,T),w;if(C===null){for(;T<m.length;T++)C=f(p,m[T],_),C!==null&&(g=a(C,g,T),x===null?w=C:x.sibling=C,x=C);return V&&Lt(p,T),w}for(C=r(C);T<m.length;T++)A=d(C,p,T,m[T],_),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?T:A.key),g=a(A,g,T),x===null?w=A:x.sibling=A,x=A);return t&&C.forEach(function(oe){return e(p,oe)}),V&&Lt(p,T),w}function v(p,g,m,_){if(m==null)throw Error(S(151));for(var w=null,x=null,C=g,T=g=0,A=null,M=m.next();C!==null&&!M.done;T++,M=m.next()){C.index>T?(A=C,C=null):A=C.sibling;var oe=h(p,C,M.value,_);if(oe===null){C===null&&(C=A);break}t&&C&&oe.alternate===null&&e(p,C),g=a(oe,g,T),x===null?w=oe:x.sibling=oe,x=oe,C=A}if(M.done)return n(p,C),V&&Lt(p,T),w;if(C===null){for(;!M.done;T++,M=m.next())M=f(p,M.value,_),M!==null&&(g=a(M,g,T),x===null?w=M:x.sibling=M,x=M);return V&&Lt(p,T),w}for(C=r(C);!M.done;T++,M=m.next())M=d(C,p,T,M.value,_),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?T:M.key),g=a(M,g,T),x===null?w=M:x.sibling=M,x=M);return t&&C.forEach(function(he){return e(p,he)}),V&&Lt(p,T),w}function b(p,g,m,_){if(typeof m=="object"&&m!==null&&m.type===Ar&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Na:e:{for(var w=m.key;g!==null;){if(g.key===w){if(w=m.type,w===Ar){if(g.tag===7){n(p,g.sibling),_=i(g,m.props.children),_.return=p,p=_;break e}}else if(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===nn&&In(w)===g.type){n(p,g.sibling),_=i(g,m.props),wi(_,m),_.return=p,p=_;break e}n(p,g);break}else e(p,g);g=g.sibling}m.type===Ar?(_=Fn(m.props.children,p.mode,_,m.key),_.return=p,p=_):(_=ls(m.type,m.key,m.props,null,p.mode,_),wi(_,m),_.return=p,p=_)}return s(p);case ki:e:{for(w=m.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){n(p,g.sibling),_=i(g,m.children||[]),_.return=p,p=_;break e}else{n(p,g);break}else e(p,g);g=g.sibling}_=ro(m,p.mode,_),_.return=p,p=_}return s(p);case nn:return m=In(m),b(p,g,m,_)}if(ji(m))return y(p,g,m,_);if(Ei(m)){if(w=Ei(m),typeof w!="function")throw Error(S(150));return m=w.call(m),v(p,g,m,_)}if(typeof m.then=="function")return b(p,g,Pa(m),_);if(m.$$typeof===Pt)return b(p,g,$a(p,m),_);Ha(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"||typeof m=="bigint"?(m=""+m,g!==null&&g.tag===6?(n(p,g.sibling),_=i(g,m),_.return=p,p=_):(n(p,g),_=no(m,p.mode,_),_.return=p,p=_),s(p)):n(p,g)}return function(p,g,m,_){try{sa=0;var w=b(p,g,m,_);return Gr=null,w}catch(C){if(C===di||C===Rl)throw C;var x=tt(29,C,null,p.mode);return x.lanes=_,x.return=p,x}finally{}}}var ir=Mp(!0),zp=Mp(!1),rn=!1;function ku(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ic(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _n(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function bn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,e=Us(t),Op(t,null,n),e}return wl(t,r,e,n),Us(t)}function qi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ep(t,n)}}function ao(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var ac=!1;function Gi(){if(ac){var t=qr;if(t!==null)throw t}}function Vi(t,e,n,r){ac=!1;var i=t.updateQueue;rn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var o=l,c=o.next;o.next=null,s===null?a=c:s.next=c,s=o;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==s&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=o))}if(a!==null){var f=i.baseState;s=0,u=c=o=null,l=a;do{var h=l.lane&-536870913,d=h!==l.lane;if(d?(G&h)===h:(r&h)===h){h!==0&&h===Wr&&(ac=!0),u!==null&&(u=u.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var y=t,v=l;h=e;var b=n;switch(v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(b,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,h=typeof y=="function"?y.call(b,f,h):y,h==null)break e;f=ae({},f,h);break e;case 2:rn=!0}}h=l.callback,h!==null&&(t.flags|=64,d&&(t.flags|=8192),d=i.callbacks,d===null?i.callbacks=[h]:d.push(h))}else d={lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=d,o=f):u=u.next=d,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);u===null&&(o=f),i.baseState=o,i.firstBaseUpdate=c,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),kn|=s,t.lanes=s,t.memoizedState=f}}function Bp(t,e){if(typeof t!="function")throw Error(S(191,t));t.call(e)}function Lp(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Bp(n[t],e)}var ei=jt(null),Ls=jt(0);function rh(t,e){t=Xt,te(Ls,t),te(ei,e),Xt=t|e.baseLanes}function sc(){te(Ls,Xt),te(ei,ei.current)}function ju(){Xt=Ls.current,Re(ei),Re(Ls)}var ct=jt(null),yt=null;function sn(t){var e=t.alternate;te(de,de.current&1),te(ct,t),yt===null&&(e===null||ei.current!==null||e.memoizedState!==null)&&(yt=t)}function lc(t){te(de,de.current),te(ct,t),yt===null&&(yt=t)}function $p(t){t.tag===22?(te(de,de.current),te(ct,t),yt===null&&(yt=t)):ln()}function ln(){te(de,de.current),te(ct,ct.current)}function et(t){Re(ct),yt===t&&(yt=null),Re(de)}var de=jt(0);function $s(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Rc(n)||Oc(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kt=0,P=null,F=null,ve=null,Ps=!1,Vr=!1,ar=!1,Hs=0,la=0,Yr=null,j_=0;function ue(){throw Error(S(321))}function Du(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ot(t[n],e[n]))return!1;return!0}function Nu(t,e,n,r,i,a){return Kt=a,P=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,z.H=t===null||t.memoizedState===null?mg:Gu,ar=!1,a=n(r,i),ar=!1,Vr&&(a=Hp(e,n,r,i)),Pp(t),a}function Pp(t){z.H=oa;var e=F!==null&&F.next!==null;if(Kt=0,ve=F=P=null,Ps=!1,la=0,Yr=null,e)throw Error(S(300));t===null||Se||(t=t.dependencies,t!==null&&zs(t)&&(Se=!0))}function Hp(t,e,n,r){P=t;var i=0;do{if(Vr&&(Yr=null),la=0,Vr=!1,25<=i)throw Error(S(301));if(i+=1,ve=F=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}z.H=yg,a=e(n,r)}while(Vr);return a}function D_(){var t=z.H,e=t.useState()[0];return e=typeof e.then=="function"?wa(e):e,t=t.useState()[0],(F!==null?F.memoizedState:null)!==t&&(P.flags|=1024),e}function Uu(){var t=Hs!==0;return Hs=0,t}function Mu(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function zu(t){if(Ps){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Ps=!1}Kt=0,ve=F=P=null,Vr=!1,la=Hs=0,Yr=null}function Be(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?P.memoizedState=ve=t:ve=ve.next=t,ve}function pe(){if(F===null){var t=P.alternate;t=t!==null?t.memoizedState:null}else t=F.next;var e=ve===null?P.memoizedState:ve.next;if(e!==null)ve=e,F=t;else{if(t===null)throw P.alternate===null?Error(S(467)):Error(S(310));F=t,t={memoizedState:F.memoizedState,baseState:F.baseState,baseQueue:F.baseQueue,queue:F.queue,next:null},ve===null?P.memoizedState=ve=t:ve=ve.next=t}return ve}function Ol(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wa(t){var e=la;return la+=1,Yr===null&&(Yr=[]),t=Up(Yr,t,e),e=P,(ve===null?e.memoizedState:ve.next)===null&&(e=e.alternate,z.H=e===null||e.memoizedState===null?mg:Gu),t}function Al(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wa(t);if(t.$$typeof===Pt)return De(t)}throw Error(S(438,String(t)))}function Bu(t){var e=null,n=P.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=P.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Ol(),P.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=yv;return e.index++,n}function Jt(t,e){return typeof e=="function"?e(t):e}function cs(t){var e=pe();return Lu(e,F,t)}function Lu(t,e,n){var r=t.queue;if(r===null)throw Error(S(311));r.lastRenderedReducer=n;var i=t.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}e.baseQueue=i=a,r.pending=null}if(a=t.baseState,i===null)t.memoizedState=a;else{e=i.next;var l=s=null,o=null,c=e,u=!1;do{var f=c.lane&-536870913;if(f!==c.lane?(G&f)===f:(Kt&f)===f){var h=c.revertLane;if(h===0)o!==null&&(o=o.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Wr&&(u=!0);else if((Kt&h)===h){c=c.next,h===Wr&&(u=!0);continue}else f={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},o===null?(l=o=f,s=a):o=o.next=f,P.lanes|=h,kn|=h;f=c.action,ar&&n(a,f),a=c.hasEagerState?c.eagerState:n(a,f)}else h={lane:f,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},o===null?(l=o=h,s=a):o=o.next=h,P.lanes|=f,kn|=f;c=c.next}while(c!==null&&c!==e);if(o===null?s=a:o.next=l,!ot(a,t.memoizedState)&&(Se=!0,u&&(n=qr,n!==null)))throw n;t.memoizedState=a,t.baseState=s,t.baseQueue=o,r.lastRenderedState=a}return i===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function so(t){var e=pe(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);ot(a,e.memoizedState)||(Se=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Ip(t,e,n){var r=P,i=pe(),a=V;if(a){if(n===void 0)throw Error(S(407));n=n()}else n=e();var s=!ot((F||i).memoizedState,n);if(s&&(i.memoizedState=n,Se=!0),i=i.queue,$u(Vp.bind(null,r,i,t),[t]),i.getSnapshot!==e||s||ve!==null&&ve.memoizedState.tag&1){if(r.flags|=2048,ti(9,{destroy:void 0},Gp.bind(null,r,i,n,e),null),W===null)throw Error(S(349));a||Kt&127||qp(r,e,n)}return n}function qp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=P.updateQueue,e===null?(e=Ol(),P.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gp(t,e,n,r){e.value=n,e.getSnapshot=r,Yp(e)&&Kp(t)}function Vp(t,e,n){return n(function(){Yp(e)&&Kp(t)})}function Yp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ot(t,n)}catch{return!0}}function Kp(t){var e=ur(t,2);e!==null&&Qe(e,t,2)}function oc(t){var e=Be();if(typeof t=="function"){var n=t;if(t=n(),ar){fn(!0);try{n()}finally{fn(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jt,lastRenderedState:t},e}function Jp(t,e,n,r){return t.baseState=n,Lu(t,F,typeof r=="function"?r:Jt)}function N_(t,e,n,r,i){if(kl(t))throw Error(S(485));if(t=e.action,t!==null){var a={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};z.T!==null?n(!0):a.isTransition=!1,r(a),n=e.pending,n===null?(a.next=e.pending=a,Qp(e,a)):(a.next=n.next,e.pending=n.next=a)}}function Qp(t,e){var n=e.action,r=e.payload,i=t.state;if(e.isTransition){var a=z.T,s={};z.T=s;try{var l=n(i,r),o=z.S;o!==null&&o(s,l),ih(t,e,l)}catch(c){cc(t,e,c)}finally{a!==null&&s.types!==null&&(a.types=s.types),z.T=a}}else try{a=n(i,r),ih(t,e,a)}catch(c){cc(t,e,c)}}function ih(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){ah(t,e,r)},function(r){return cc(t,e,r)}):ah(t,e,n)}function ah(t,e,n){e.status="fulfilled",e.value=n,Xp(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Qp(t,n)))}function cc(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,Xp(e),e=e.next;while(e!==r)}t.action=null}function Xp(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Zp(t,e){return e}function sh(t,e){if(V){var n=W.formState;if(n!==null){e:{var r=P;if(V){if(re){t:{for(var i=re,a=mt;i.nodeType!==8;){if(!a){i=null;break t}if(i=vt(i.nextSibling),i===null){i=null;break t}}a=i.data,i=a==="F!"||a==="F"?i:null}if(i){re=vt(i.nextSibling),r=i.data==="F!";break e}}An(r)}r=!1}r&&(e=n[0])}}return n=Be(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zp,lastRenderedState:e},n.queue=r,n=dg.bind(null,P,r),r.dispatch=n,r=oc(!1),a=qu.bind(null,P,!1,r.queue),r=Be(),i={state:e,dispatch:null,action:t,pending:null},r.queue=i,n=N_.bind(null,P,i,a,n),i.dispatch=n,r.memoizedState=t,[e,n,!1]}function lh(t){var e=pe();return Fp(e,F,t)}function Fp(t,e,n){if(e=Lu(t,e,Zp)[0],t=cs(Jt)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=wa(e)}catch(s){throw s===di?Rl:s}else r=e;e=pe();var i=e.queue,a=i.dispatch;return n!==e.memoizedState&&(P.flags|=2048,ti(9,{destroy:void 0},U_.bind(null,i,n),null)),[r,a,t]}function U_(t,e){t.action=e}function oh(t){var e=pe(),n=F;if(n!==null)return Fp(e,n,t);pe(),e=e.memoizedState,n=pe();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function ti(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=P.updateQueue,e===null&&(e=Ol(),P.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Wp(){return pe().memoizedState}function us(t,e,n,r){var i=Be();P.flags|=t,i.memoizedState=ti(1|e,{destroy:void 0},n,r===void 0?null:r)}function xl(t,e,n,r){var i=pe();r=r===void 0?null:r;var a=i.memoizedState.inst;F!==null&&r!==null&&Du(r,F.memoizedState.deps)?i.memoizedState=ti(e,a,n,r):(P.flags|=t,i.memoizedState=ti(1|e,a,n,r))}function ch(t,e){us(8390656,8,t,e)}function $u(t,e){xl(2048,8,t,e)}function M_(t){P.flags|=4;var e=P.updateQueue;if(e===null)e=Ol(),P.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function eg(t){var e=pe().memoizedState;return M_({ref:e,nextImpl:t}),function(){if(K&2)throw Error(S(440));return e.impl.apply(void 0,arguments)}}function tg(t,e){return xl(4,2,t,e)}function ng(t,e){return xl(4,4,t,e)}function rg(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ig(t,e,n){n=n!=null?n.concat([t]):null,xl(4,4,rg.bind(null,e,t),n)}function Pu(){}function ag(t,e){var n=pe();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&Du(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sg(t,e){var n=pe();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&Du(e,r[1]))return r[0];if(r=t(),ar){fn(!0);try{t()}finally{fn(!1)}}return n.memoizedState=[r,e],r}function Hu(t,e,n){return n===void 0||Kt&1073741824&&!(G&261930)?t.memoizedState=e:(t.memoizedState=n,t=Jg(),P.lanes|=t,kn|=t,n)}function lg(t,e,n,r){return ot(n,e)?n:ei.current!==null?(t=Hu(t,n,r),ot(t,e)||(Se=!0),t):!(Kt&42)||Kt&1073741824&&!(G&261930)?(Se=!0,t.memoizedState=n):(t=Jg(),P.lanes|=t,kn|=t,e)}function og(t,e,n,r,i){var a=J.p;J.p=a!==0&&8>a?a:8;var s=z.T,l={};z.T=l,qu(t,!1,e,n);try{var o=i(),c=z.S;if(c!==null&&c(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var u=k_(o,r);Yi(t,e,u,lt(t))}else Yi(t,e,r,lt(t))}catch(f){Yi(t,e,{then:function(){},status:"rejected",reason:f},lt())}finally{J.p=a,s!==null&&l.types!==null&&(s.types=l.types),z.T=s}}function z_(){}function uc(t,e,n,r){if(t.tag!==5)throw Error(S(476));var i=cg(t).queue;og(t,i,e,Zn,n===null?z_:function(){return ug(t),n(r)})}function cg(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Zn,baseState:Zn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jt,lastRenderedState:Zn},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jt,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function ug(t){var e=cg(t);e.next===null&&(e=t.alternate.memoizedState),Yi(t,e.next.queue,{},lt())}function Iu(){return De(fa)}function fg(){return pe().memoizedState}function hg(){return pe().memoizedState}function B_(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=lt();t=_n(n);var r=bn(e,t,n);r!==null&&(Qe(r,e,n),qi(r,e,n)),e={cache:Ou()},t.payload=e;return}e=e.return}}function L_(t,e,n){var r=lt();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},kl(t)?pg(e,n):(n=Tu(t,e,n,r),n!==null&&(Qe(n,t,r),gg(n,e,r)))}function dg(t,e,n){var r=lt();Yi(t,e,n,r)}function Yi(t,e,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(kl(t))pg(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,l=a(s,n);if(i.hasEagerState=!0,i.eagerState=l,ot(l,s))return wl(t,e,i,0),W===null&&Cl(),!1}catch{}finally{}if(n=Tu(t,e,i,r),n!==null)return Qe(n,t,r),gg(n,e,r),!0}return!1}function qu(t,e,n,r){if(r={lane:2,revertLane:Fu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},kl(t)){if(e)throw Error(S(479))}else e=Tu(t,n,r,2),e!==null&&Qe(e,t,2)}function kl(t){var e=t.alternate;return t===P||e!==null&&e===P}function pg(t,e){Vr=Ps=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gg(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ep(t,n)}}var oa={readContext:De,use:Al,useCallback:ue,useContext:ue,useEffect:ue,useImperativeHandle:ue,useLayoutEffect:ue,useInsertionEffect:ue,useMemo:ue,useReducer:ue,useRef:ue,useState:ue,useDebugValue:ue,useDeferredValue:ue,useTransition:ue,useSyncExternalStore:ue,useId:ue,useHostTransitionStatus:ue,useFormState:ue,useActionState:ue,useOptimistic:ue,useMemoCache:ue,useCacheRefresh:ue};oa.useEffectEvent=ue;var mg={readContext:De,use:Al,useCallback:function(t,e){return Be().memoizedState=[t,e===void 0?null:e],t},useContext:De,useEffect:ch,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,us(4194308,4,rg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return us(4194308,4,t,e)},useInsertionEffect:function(t,e){us(4,2,t,e)},useMemo:function(t,e){var n=Be();e=e===void 0?null:e;var r=t();if(ar){fn(!0);try{t()}finally{fn(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=Be();if(n!==void 0){var i=n(e);if(ar){fn(!0);try{n(e)}finally{fn(!1)}}}else i=e;return r.memoizedState=r.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},r.queue=t,t=t.dispatch=L_.bind(null,P,t),[r.memoizedState,t]},useRef:function(t){var e=Be();return t={current:t},e.memoizedState=t},useState:function(t){t=oc(t);var e=t.queue,n=dg.bind(null,P,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Pu,useDeferredValue:function(t,e){var n=Be();return Hu(n,t,e)},useTransition:function(){var t=oc(!1);return t=og.bind(null,P,t.queue,!0,!1),Be().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=P,i=Be();if(V){if(n===void 0)throw Error(S(407));n=n()}else{if(n=e(),W===null)throw Error(S(349));G&127||qp(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,ch(Vp.bind(null,r,a,t),[t]),r.flags|=2048,ti(9,{destroy:void 0},Gp.bind(null,r,a,n,e),null),n},useId:function(){var t=Be(),e=W.identifierPrefix;if(V){var n=At,r=Ot;n=(r&~(1<<32-st(r)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Hs++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=j_++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Iu,useFormState:sh,useActionState:sh,useOptimistic:function(t){var e=Be();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=qu.bind(null,P,!0,n),n.dispatch=e,[t,e]},useMemoCache:Bu,useCacheRefresh:function(){return Be().memoizedState=B_.bind(null,P)},useEffectEvent:function(t){var e=Be(),n={impl:t};return e.memoizedState=n,function(){if(K&2)throw Error(S(440));return n.impl.apply(void 0,arguments)}}},Gu={readContext:De,use:Al,useCallback:ag,useContext:De,useEffect:$u,useImperativeHandle:ig,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:sg,useReducer:cs,useRef:Wp,useState:function(){return cs(Jt)},useDebugValue:Pu,useDeferredValue:function(t,e){var n=pe();return lg(n,F.memoizedState,t,e)},useTransition:function(){var t=cs(Jt)[0],e=pe().memoizedState;return[typeof t=="boolean"?t:wa(t),e]},useSyncExternalStore:Ip,useId:fg,useHostTransitionStatus:Iu,useFormState:lh,useActionState:lh,useOptimistic:function(t,e){var n=pe();return Jp(n,F,t,e)},useMemoCache:Bu,useCacheRefresh:hg};Gu.useEffectEvent=eg;var yg={readContext:De,use:Al,useCallback:ag,useContext:De,useEffect:$u,useImperativeHandle:ig,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:sg,useReducer:so,useRef:Wp,useState:function(){return so(Jt)},useDebugValue:Pu,useDeferredValue:function(t,e){var n=pe();return F===null?Hu(n,t,e):lg(n,F.memoizedState,t,e)},useTransition:function(){var t=so(Jt)[0],e=pe().memoizedState;return[typeof t=="boolean"?t:wa(t),e]},useSyncExternalStore:Ip,useId:fg,useHostTransitionStatus:Iu,useFormState:oh,useActionState:oh,useOptimistic:function(t,e){var n=pe();return F!==null?Jp(n,F,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Bu,useCacheRefresh:hg};yg.useEffectEvent=eg;function lo(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fc={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lt(),i=_n(r);i.payload=e,n!=null&&(i.callback=n),e=bn(t,i,r),e!==null&&(Qe(e,t,r),qi(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lt(),i=_n(r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=bn(t,i,r),e!==null&&(Qe(e,t,r),qi(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lt(),r=_n(n);r.tag=2,e!=null&&(r.callback=e),e=bn(t,r,n),e!==null&&(Qe(e,t,n),qi(e,t,n))}};function uh(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!ra(n,r)||!ra(i,a):!0}function fh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fc.enqueueReplaceState(e,e.state,null)}function sr(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=ae({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function vg(t){Ns(t)}function _g(t){console.error(t)}function bg(t){Ns(t)}function Is(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function hh(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function hc(t,e,n){return n=_n(n),n.tag=3,n.payload={element:null},n.callback=function(){Is(t,e)},n}function Sg(t){return t=_n(t),t.tag=3,t}function Eg(t,e,n,r){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var a=r.value;t.payload=function(){return i(a)},t.callback=function(){hh(e,n,r)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){hh(e,n,r),typeof i!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var l=r.stack;this.componentDidCatch(r.value,{componentStack:l!==null?l:""})})}function $_(t,e,n,r,i){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&hi(e,n,i,!0),n=ct.current,n!==null){switch(n.tag){case 31:case 13:return yt===null?Ks():n.alternate===null&&fe===0&&(fe=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Bs?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),_o(t,r,i)),!1;case 22:return n.flags|=65536,r===Bs?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),_o(t,r,i)),!1}throw Error(S(435,n.tag))}return _o(t,r,i),Ks(),!1}if(V)return e=ct.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,r!==Wo&&(t=Error(S(422),{cause:r}),aa(gt(t,n)))):(r!==Wo&&(e=Error(S(423),{cause:r}),aa(gt(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,r=gt(r,n),i=hc(t.stateNode,r,i),ao(t,i),fe!==4&&(fe=2)),!1;var a=Error(S(520),{cause:r});if(a=gt(a,n),Qi===null?Qi=[a]:Qi.push(a),fe!==4&&(fe=2),e===null)return!0;r=gt(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=hc(n.stateNode,r,t),ao(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Sn===null||!Sn.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Sg(i),Eg(i,t,n,r),ao(n,i),!1}n=n.return}while(n!==null);return!1}var Vu=Error(S(461)),Se=!1;function xe(t,e,n,r){e.child=t===null?zp(e,null,n,r):ir(e,t.child,n,r)}function dh(t,e,n,r,i){n=n.render;var a=e.ref;if("ref"in r){var s={};for(var l in r)l!=="ref"&&(s[l]=r[l])}else s=r;return rr(e),r=Nu(t,e,n,s,a,i),l=Uu(),t!==null&&!Se?(Mu(t,e,i),Qt(t,e,i)):(V&&l&&wu(e),e.flags|=1,xe(t,e,r,i),e.child)}function ph(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!Cu(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,Tg(t,e,a,r,i)):(t=ls(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!Yu(t,i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:ra,n(s,r)&&t.ref===e.ref)return Qt(t,e,i)}return e.flags|=1,t=qt(a,r),t.ref=e.ref,t.return=e,e.child=t}function Tg(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(ra(a,r)&&t.ref===e.ref)if(Se=!1,e.pendingProps=r=a,Yu(t,i))t.flags&131072&&(Se=!0);else return e.lanes=t.lanes,Qt(t,e,i)}return dc(t,e,n,r,i)}function Cg(t,e,n,r){var i=r.children,a=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if(e.flags&128){if(a=a!==null?a.baseLanes|n:n,t!==null){for(r=e.child=t.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,e.child=null;return gh(t,e,a,n,r)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&os(e,a!==null?a.cachePool:null),a!==null?rh(e,a):sc(),$p(e);else return r=e.lanes=536870912,gh(t,e,a!==null?a.baseLanes|n:n,n,r)}else a!==null?(os(e,a.cachePool),rh(e,a),ln(),e.memoizedState=null):(t!==null&&os(e,null),sc(),ln());return xe(t,e,i,n),e.child}function Ni(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function gh(t,e,n,r,i){var a=Au();return a=a===null?null:{parent:be._currentValue,pool:a},e.memoizedState={baseLanes:n,cachePool:a},t!==null&&os(e,null),sc(),$p(e),t!==null&&hi(t,e,r,!0),e.childLanes=i,null}function fs(t,e){return e=qs({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function mh(t,e,n){return ir(e,t.child,null,n),t=fs(e,e.pendingProps),t.flags|=2,et(e),e.memoizedState=null,t}function P_(t,e,n){var r=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(V){if(r.mode==="hidden")return t=fs(e,r),e.lanes=536870912,Ni(null,t);if(lc(e),(t=re)?(t=mm(t,mt),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:On!==null?{id:Ot,overflow:At}:null,retryLane:536870912,hydrationErrors:null},n=xp(t),n.return=e,e.child=n,je=e,re=null)):t=null,t===null)throw An(e);return e.lanes=536870912,null}return fs(e,r)}var a=t.memoizedState;if(a!==null){var s=a.dehydrated;if(lc(e),i)if(e.flags&256)e.flags&=-257,e=mh(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(S(558));else if(Se||hi(t,e,n,!1),i=(n&t.childLanes)!==0,Se||i){if(r=W,r!==null&&(s=tp(r,n),s!==0&&s!==a.retryLane))throw a.retryLane=s,ur(t,s),Qe(r,t,s),Vu;Ks(),e=mh(t,e,n)}else t=a.treeContext,re=vt(s.nextSibling),je=e,V=!0,vn=null,mt=!1,t!==null&&jp(e,t),e=fs(e,r),e.flags|=4096;return e}return t=qt(t.child,{mode:r.mode,children:r.children}),t.ref=e.ref,e.child=t,t.return=e,t}function hs(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(S(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function dc(t,e,n,r,i){return rr(e),n=Nu(t,e,n,r,void 0,i),r=Uu(),t!==null&&!Se?(Mu(t,e,i),Qt(t,e,i)):(V&&r&&wu(e),e.flags|=1,xe(t,e,n,i),e.child)}function yh(t,e,n,r,i,a){return rr(e),e.updateQueue=null,n=Hp(e,r,n,i),Pp(t),r=Uu(),t!==null&&!Se?(Mu(t,e,a),Qt(t,e,a)):(V&&r&&wu(e),e.flags|=1,xe(t,e,n,a),e.child)}function vh(t,e,n,r,i){if(rr(e),e.stateNode===null){var a=zr,s=n.contextType;typeof s=="object"&&s!==null&&(a=De(s)),a=new n(r,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=fc,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=r,a.state=e.memoizedState,a.refs={},ku(e),s=n.contextType,a.context=typeof s=="object"&&s!==null?De(s):zr,a.state=e.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(lo(e,n,s,r),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&fc.enqueueReplaceState(a,a.state,null),Vi(e,r,a,i),Gi(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){a=e.stateNode;var l=e.memoizedProps,o=sr(n,l);a.props=o;var c=a.context,u=n.contextType;s=zr,typeof u=="object"&&u!==null&&(s=De(u));var f=n.getDerivedStateFromProps;u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l||c!==s)&&fh(e,a,r,s),rn=!1;var h=e.memoizedState;a.state=h,Vi(e,r,a,i),Gi(),c=e.memoizedState,l||h!==c||rn?(typeof f=="function"&&(lo(e,n,f,r),c=e.memoizedState),(o=rn||uh(e,n,o,r,h,c,s))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=s,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,ic(t,e),s=e.memoizedProps,u=sr(n,s),a.props=u,f=e.pendingProps,h=a.context,c=n.contextType,o=zr,typeof c=="object"&&c!==null&&(o=De(c)),l=n.getDerivedStateFromProps,(c=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||h!==o)&&fh(e,a,r,o),rn=!1,h=e.memoizedState,a.state=h,Vi(e,r,a,i),Gi();var d=e.memoizedState;s!==f||h!==d||rn||t!==null&&t.dependencies!==null&&zs(t.dependencies)?(typeof l=="function"&&(lo(e,n,l,r),d=e.memoizedState),(u=rn||uh(e,n,u,r,h,d,o)||t!==null&&t.dependencies!==null&&zs(t.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,d,o),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,d,o)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=o,r=u):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return a=r,hs(t,e),r=(e.flags&128)!==0,a||r?(a=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&r?(e.child=ir(e,t.child,null,i),e.child=ir(e,null,n,i)):xe(t,e,n,i),e.memoizedState=a.state,t=e.child):t=Qt(t,e,i),t}function _h(t,e,n,r){return nr(),e.flags|=256,xe(t,e,n,r),e.child}var oo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function co(t){return{baseLanes:t,cachePool:Np()}}function uo(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=rt),t}function wg(t,e,n){var r=e.pendingProps,i=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(de.current&2)!==0),s&&(i=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(V){if(i?sn(e):ln(),(t=re)?(t=mm(t,mt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:On!==null?{id:Ot,overflow:At}:null,retryLane:536870912,hydrationErrors:null},n=xp(t),n.return=e,e.child=n,je=e,re=null)):t=null,t===null)throw An(e);return Oc(t)?e.lanes=32:e.lanes=536870912,null}var l=r.children;return r=r.fallback,i?(ln(),i=e.mode,l=qs({mode:"hidden",children:l},i),r=Fn(r,i,n,null),l.return=e,r.return=e,l.sibling=r,e.child=l,r=e.child,r.memoizedState=co(n),r.childLanes=uo(t,s,n),e.memoizedState=oo,Ni(null,r)):(sn(e),pc(e,l))}var o=t.memoizedState;if(o!==null&&(l=o.dehydrated,l!==null)){if(a)e.flags&256?(sn(e),e.flags&=-257,e=fo(t,e,n)):e.memoizedState!==null?(ln(),e.child=t.child,e.flags|=128,e=null):(ln(),l=r.fallback,i=e.mode,r=qs({mode:"visible",children:r.children},i),l=Fn(l,i,n,null),l.flags|=2,r.return=e,l.return=e,r.sibling=l,e.child=r,ir(e,t.child,null,n),r=e.child,r.memoizedState=co(n),r.childLanes=uo(t,s,n),e.memoizedState=oo,e=Ni(null,r));else if(sn(e),Oc(l)){if(s=l.nextSibling&&l.nextSibling.dataset,s)var c=s.dgst;s=c,r=Error(S(419)),r.stack="",r.digest=s,aa({value:r,source:null,stack:null}),e=fo(t,e,n)}else if(Se||hi(t,e,n,!1),s=(n&t.childLanes)!==0,Se||s){if(s=W,s!==null&&(r=tp(s,n),r!==0&&r!==o.retryLane))throw o.retryLane=r,ur(t,r),Qe(s,t,r),Vu;Rc(l)||Ks(),e=fo(t,e,n)}else Rc(l)?(e.flags|=192,e.child=t.child,e=null):(t=o.treeContext,re=vt(l.nextSibling),je=e,V=!0,vn=null,mt=!1,t!==null&&jp(e,t),e=pc(e,r.children),e.flags|=4096);return e}return i?(ln(),l=r.fallback,i=e.mode,o=t.child,c=o.sibling,r=qt(o,{mode:"hidden",children:r.children}),r.subtreeFlags=o.subtreeFlags&65011712,c!==null?l=qt(c,l):(l=Fn(l,i,n,null),l.flags|=2),l.return=e,r.return=e,r.sibling=l,e.child=r,Ni(null,r),r=e.child,l=t.child.memoizedState,l===null?l=co(n):(i=l.cachePool,i!==null?(o=be._currentValue,i=i.parent!==o?{parent:o,pool:o}:i):i=Np(),l={baseLanes:l.baseLanes|n,cachePool:i}),r.memoizedState=l,r.childLanes=uo(t,s,n),e.memoizedState=oo,Ni(t.child,r)):(sn(e),n=t.child,t=n.sibling,n=qt(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n)}function pc(t,e){return e=qs({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function qs(t,e){return t=tt(22,t,null,e),t.lanes=0,t}function fo(t,e,n){return ir(e,t.child,null,n),t=pc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tc(t.return,e,n)}function ho(t,e,n,r,i,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i,s.treeForkCount=a)}function Rg(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var s=de.current,l=(s&2)!==0;if(l?(s=s&1|2,e.flags|=128):s&=1,te(de,s),xe(t,e,r,n),r=V?ia:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bh(t,n,e);else if(t.tag===19)bh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$s(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ho(e,!1,i,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$s(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ho(e,!0,n,null,a,r);break;case"together":ho(e,!1,null,null,void 0,r);break;default:e.memoizedState=null}return e.child}function Qt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kn|=e.lanes,!(n&e.childLanes))if(t!==null){if(hi(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(S(153));if(e.child!==null){for(t=e.child,n=qt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yu(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&zs(t)))}function H_(t,e,n){switch(e.tag){case 3:xs(e,e.stateNode.containerInfo),an(e,be,t.memoizedState.cache),nr();break;case 27:case 5:Io(e);break;case 4:xs(e,e.stateNode.containerInfo);break;case 10:an(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,lc(e),null;break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(sn(e),e.flags|=128,null):n&e.child.childLanes?wg(t,e,n):(sn(e),t=Qt(t,e,n),t!==null?t.sibling:null);sn(e);break;case 19:var i=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(hi(t,e,n,!1),r=(n&e.childLanes)!==0),i){if(r)return Rg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),te(de,de.current),r)break;return null;case 22:return e.lanes=0,Cg(t,e,n,e.pendingProps);case 24:an(e,be,t.memoizedState.cache)}return Qt(t,e,n)}function Og(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Se=!0;else{if(!Yu(t,n)&&!(e.flags&128))return Se=!1,H_(t,e,n);Se=!!(t.flags&131072)}else Se=!1,V&&e.flags&1048576&&kp(e,ia,e.index);switch(e.lanes=0,e.tag){case 16:e:{var r=e.pendingProps;if(t=In(e.elementType),e.type=t,typeof t=="function")Cu(t)?(r=sr(t,r),e.tag=1,e=vh(null,e,t,r,n)):(e.tag=0,e=dc(null,e,t,r,n));else{if(t!=null){var i=t.$$typeof;if(i===uu){e.tag=11,e=dh(null,e,t,r,n);break e}else if(i===fu){e.tag=14,e=ph(null,e,t,r,n);break e}}throw e=Po(t)||t,Error(S(306,e,""))}}return e;case 0:return dc(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,i=sr(r,e.pendingProps),vh(t,e,r,i,n);case 3:e:{if(xs(e,e.stateNode.containerInfo),t===null)throw Error(S(387));r=e.pendingProps;var a=e.memoizedState;i=a.element,ic(t,e),Vi(e,r,null,n);var s=e.memoizedState;if(r=s.cache,an(e,be,r),r!==a.cache&&nc(e,[be],n,!0),Gi(),r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=_h(t,e,r,n);break e}else if(r!==i){i=gt(Error(S(424)),e),aa(i),e=_h(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(re=vt(t.firstChild),je=e,V=!0,vn=null,mt=!0,n=zp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(nr(),r===i){e=Qt(t,e,n);break e}xe(t,e,r,n)}e=e.child}return e;case 26:return hs(t,e),t===null?(n=Ph(e.type,null,e.pendingProps,null))?e.memoizedState=n:V||(n=e.type,t=e.pendingProps,r=Zs(yn.current).createElement(n),r[ke]=e,r[Xe]=t,Ne(r,n,t),we(r),e.stateNode=r):e.memoizedState=Ph(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Io(e),t===null&&V&&(r=e.stateNode=ym(e.type,e.pendingProps,yn.current),je=e,mt=!0,i=re,Dn(e.type)?(Ac=i,re=vt(r.firstChild)):re=i),xe(t,e,e.pendingProps.children,n),hs(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&V&&((i=r=re)&&(r=yb(r,e.type,e.pendingProps,mt),r!==null?(e.stateNode=r,je=e,re=vt(r.firstChild),mt=!1,i=!0):i=!1),i||An(e)),Io(e),i=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,r=a.children,Cc(i,a)?r=null:s!==null&&Cc(i,s)&&(e.flags|=32),e.memoizedState!==null&&(i=Nu(t,e,D_,null,null,n),fa._currentValue=i),hs(t,e),xe(t,e,r,n),e.child;case 6:return t===null&&V&&((t=n=re)&&(n=vb(n,e.pendingProps,mt),n!==null?(e.stateNode=n,je=e,re=null,t=!0):t=!1),t||An(e)),null;case 13:return wg(t,e,n);case 4:return xs(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ir(e,null,r,n):xe(t,e,r,n),e.child;case 11:return dh(t,e,e.type,e.pendingProps,n);case 7:return xe(t,e,e.pendingProps,n),e.child;case 8:return xe(t,e,e.pendingProps.children,n),e.child;case 12:return xe(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,an(e,e.type,r.value),xe(t,e,r.children,n),e.child;case 9:return i=e.type._context,r=e.pendingProps.children,rr(e),i=De(i),r=r(i),e.flags|=1,xe(t,e,r,n),e.child;case 14:return ph(t,e,e.type,e.pendingProps,n);case 15:return Tg(t,e,e.type,e.pendingProps,n);case 19:return Rg(t,e,n);case 31:return P_(t,e,n);case 22:return Cg(t,e,n,e.pendingProps);case 24:return rr(e),r=De(be),t===null?(i=Au(),i===null&&(i=W,a=Ou(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),e.memoizedState={parent:r,cache:i},ku(e),an(e,be,i)):(t.lanes&n&&(ic(t,e),Vi(e,null,null,n),Gi()),i=t.memoizedState,a=e.memoizedState,i.parent!==r?(i={parent:r,cache:r},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),an(e,be,r)):(r=a.cache,an(e,be,r),r!==i.cache&&nc(e,[be],n,!0))),xe(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(S(156,e.tag))}function Ut(t){t.flags|=4}function po(t,e,n,r,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(Zg())t.flags|=8192;else throw er=Bs,xu}else t.flags&=-16777217}function Sh(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!bm(e))if(Zg())t.flags|=8192;else throw er=Bs,xu}function Ia(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Fd():536870912,t.lanes|=e,ni|=e)}function Ri(t,e){if(!V)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ne(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function I_(t,e,n){var r=e.pendingProps;switch(Ru(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ne(e),null;case 1:return ne(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),Gt(be),Xr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(yr(e)?Ut(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,io())),ne(e),null;case 26:var i=e.type,a=e.memoizedState;return t===null?(Ut(e),a!==null?(ne(e),Sh(e,a)):(ne(e),po(e,i,null,r,n))):a?a!==t.memoizedState?(Ut(e),ne(e),Sh(e,a)):(ne(e),e.flags&=-16777217):(t=t.memoizedProps,t!==r&&Ut(e),ne(e),po(e,i,t,r,n)),null;case 27:if(ks(e),n=yn.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Ut(e);else{if(!r){if(e.stateNode===null)throw Error(S(166));return ne(e),null}t=kt.current,yr(e)?Xf(e):(t=ym(i,r,n),e.stateNode=t,Ut(e))}return ne(e),null;case 5:if(ks(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Ut(e);else{if(!r){if(e.stateNode===null)throw Error(S(166));return ne(e),null}if(a=kt.current,yr(e))Xf(e);else{var s=Zs(yn.current);switch(a){case 1:a=s.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:a=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":a=s.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":a=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":a=s.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof r.is=="string"?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a=typeof r.is=="string"?s.createElement(i,{is:r.is}):s.createElement(i)}}a[ke]=e,a[Xe]=r;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)a.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=a;e:switch(Ne(a,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Ut(e)}}return ne(e),po(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&Ut(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(S(166));if(t=yn.current,yr(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,i=je,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}t[ke]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||dm(t.nodeValue,n)),t||An(e,!0)}else t=Zs(t).createTextNode(r),t[ke]=e,e.stateNode=t}return ne(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(r=yr(e),n!==null){if(t===null){if(!r)throw Error(S(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(557));t[ke]=e}else nr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ne(e),t=!1}else n=io(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(et(e),e):(et(e),null);if(e.flags&128)throw Error(S(558))}return ne(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=yr(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(S(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(S(317));i[ke]=e}else nr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ne(e),i=!1}else i=io(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(et(e),e):(et(e),null)}return et(e),e.flags&128?(e.lanes=n,e):(n=r!==null,t=t!==null&&t.memoizedState!==null,n&&(r=e.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Ia(e,e.updateQueue),ne(e),null);case 4:return Xr(),t===null&&Wu(e.stateNode.containerInfo),ne(e),null;case 10:return Gt(e.type),ne(e),null;case 19:if(Re(de),r=e.memoizedState,r===null)return ne(e),null;if(i=(e.flags&128)!==0,a=r.rendering,a===null)if(i)Ri(r,!1);else{if(fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=$s(t),a!==null){for(e.flags|=128,Ri(r,!1),t=a.updateQueue,e.updateQueue=t,Ia(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Ap(n,t),n=n.sibling;return te(de,de.current&1|2),V&&Lt(e,r.treeForkCount),e.child}t=t.sibling}r.tail!==null&&it()>Vs&&(e.flags|=128,i=!0,Ri(r,!1),e.lanes=4194304)}else{if(!i)if(t=$s(a),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Ia(e,t),Ri(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!V)return ne(e),null}else 2*it()-r.renderingStartTime>Vs&&n!==536870912&&(e.flags|=128,i=!0,Ri(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=it(),t.sibling=null,n=de.current,te(de,i?n&1|2:n&1),V&&Lt(e,r.treeForkCount),t):(ne(e),null);case 22:case 23:return et(e),ju(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(ne(e),e.subtreeFlags&6&&(e.flags|=8192)):ne(e),n=e.updateQueue,n!==null&&Ia(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&Re(Wn),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Gt(be),ne(e),null;case 25:return null;case 30:return null}throw Error(S(156,e.tag))}function q_(t,e){switch(Ru(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gt(be),Xr(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ks(e),null;case 31:if(e.memoizedState!==null){if(et(e),e.alternate===null)throw Error(S(340));nr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(et(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(S(340));nr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(de),null;case 4:return Xr(),null;case 10:return Gt(e.type),null;case 22:case 23:return et(e),ju(),t!==null&&Re(Wn),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Gt(be),null;case 25:return null;default:return null}}function Ag(t,e){switch(Ru(e),e.tag){case 3:Gt(be),Xr();break;case 26:case 27:case 5:ks(e);break;case 4:Xr();break;case 31:e.memoizedState!==null&&et(e);break;case 13:et(e);break;case 19:Re(de);break;case 10:Gt(e.type);break;case 22:case 23:et(e),ju(),t!==null&&Re(Wn);break;case 24:Gt(be)}}function Ra(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var i=r.next;n=i;do{if((n.tag&t)===t){r=void 0;var a=n.create,s=n.inst;r=a(),s.destroy=r}n=n.next}while(n!==i)}}catch(l){X(e,e.return,l)}}function xn(t,e,n){try{var r=e.updateQueue,i=r!==null?r.lastEffect:null;if(i!==null){var a=i.next;r=a;do{if((r.tag&t)===t){var s=r.inst,l=s.destroy;if(l!==void 0){s.destroy=void 0,i=e;var o=n,c=l;try{c()}catch(u){X(i,o,u)}}}r=r.next}while(r!==a)}}catch(u){X(e,e.return,u)}}function xg(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Lp(e,n)}catch(r){X(t,t.return,r)}}}function kg(t,e,n){n.props=sr(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){X(t,e,r)}}function Ki(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(i){X(t,e,i)}}function xt(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(i){X(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){X(t,e,i)}else n.current=null}function jg(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){X(t,t.return,i)}}function go(t,e,n){try{var r=t.stateNode;fb(r,t.type,n,e),r[Xe]=e}catch(i){X(t,t.return,i)}}function Dg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Dn(t.type)||t.tag===4}function mo(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Dn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ht));else if(r!==4&&(r===27&&Dn(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(gc(t,e,n),t=t.sibling;t!==null;)gc(t,e,n),t=t.sibling}function Gs(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&Dn(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Gs(t,e,n),t=t.sibling;t!==null;)Gs(t,e,n),t=t.sibling}function Ng(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Ne(e,r,n),e[ke]=t,e[Xe]=n}catch(a){X(t,t.return,a)}}var $t=!1,_e=!1,yo=!1,Eh=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function G_(t,e){if(t=t.containerInfo,Ec=tl,t=bp(t),Su(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,l=-1,o=-1,c=0,u=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(l=s+i),f!==a||r!==0&&f.nodeType!==3||(o=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++c===i&&(l=s),h===a&&++u===r&&(o=s),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=l===-1||o===-1?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tc={focusedElem:t,selectionRange:n},tl=!1,Ce=e;Ce!==null;)if(e=Ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ce=t;else for(;Ce!==null;){switch(e=Ce,a=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var y=sr(n.type,i);t=r.getSnapshotBeforeUpdate(y,a),r.__reactInternalSnapshotBeforeUpdate=t}catch(v){X(n,n.return,v)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)wc(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":wc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(S(163))}if(t=e.sibling,t!==null){t.return=e.return,Ce=t;break}Ce=e.return}}function Ug(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:zt(t,n),r&4&&Ra(5,n);break;case 1:if(zt(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(s){X(n,n.return,s)}else{var i=sr(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){X(n,n.return,s)}}r&64&&xg(n),r&512&&Ki(n,n.return);break;case 3:if(zt(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Lp(t,e)}catch(s){X(n,n.return,s)}}break;case 27:e===null&&r&4&&Ng(n);case 26:case 5:zt(t,n),e===null&&r&4&&jg(n),r&512&&Ki(n,n.return);break;case 12:zt(t,n);break;case 31:zt(t,n),r&4&&Bg(t,n);break;case 13:zt(t,n),r&4&&Lg(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=W_.bind(null,n),_b(t,n))));break;case 22:if(r=n.memoizedState!==null||$t,!r){e=e!==null&&e.memoizedState!==null||_e,i=$t;var a=_e;$t=r,(_e=e)&&!a?Bt(t,n,(n.subtreeFlags&8772)!==0):zt(t,n),$t=i,_e=a}break;case 30:break;default:zt(t,n)}}function Mg(t){var e=t.alternate;e!==null&&(t.alternate=null,Mg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&gu(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var se=null,Ve=!1;function Mt(t,e,n){for(n=n.child;n!==null;)zg(t,e,n),n=n.sibling}function zg(t,e,n){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(_a,n)}catch{}switch(n.tag){case 26:_e||xt(n,e),Mt(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:_e||xt(n,e);var r=se,i=Ve;Dn(n.type)&&(se=n.stateNode,Ve=!1),Mt(t,e,n),Zi(n.stateNode),se=r,Ve=i;break;case 5:_e||xt(n,e);case 6:if(r=se,i=Ve,se=null,Mt(t,e,n),se=r,Ve=i,se!==null)if(Ve)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(n.stateNode)}catch(a){X(n,e,a)}else try{se.removeChild(n.stateNode)}catch(a){X(n,e,a)}break;case 18:se!==null&&(Ve?(t=se,Mh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),si(t)):Mh(se,n.stateNode));break;case 4:r=se,i=Ve,se=n.stateNode.containerInfo,Ve=!0,Mt(t,e,n),se=r,Ve=i;break;case 0:case 11:case 14:case 15:xn(2,n,e),_e||xn(4,n,e),Mt(t,e,n);break;case 1:_e||(xt(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&kg(n,e,r)),Mt(t,e,n);break;case 21:Mt(t,e,n);break;case 22:_e=(r=_e)||n.memoizedState!==null,Mt(t,e,n),_e=r;break;default:Mt(t,e,n)}}function Bg(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{si(t)}catch(n){X(e,e.return,n)}}}function Lg(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{si(t)}catch(n){X(e,e.return,n)}}function V_(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Eh),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Eh),e;default:throw Error(S(435,t.tag))}}function qa(t,e){var n=V_(t);e.forEach(function(r){if(!n.has(r)){n.add(r);var i=eb.bind(null,t,r);r.then(i,i)}})}function Ie(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],a=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 27:if(Dn(l.type)){se=l.stateNode,Ve=!1;break e}break;case 5:se=l.stateNode,Ve=!1;break e;case 3:case 4:se=l.stateNode.containerInfo,Ve=!0;break e}l=l.return}if(se===null)throw Error(S(160));zg(a,s,i),se=null,Ve=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)$g(e,t),e=e.sibling}var Tt=null;function $g(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ie(e,t),qe(t),r&4&&(xn(3,t,t.return),Ra(3,t),xn(5,t,t.return));break;case 1:Ie(e,t),qe(t),r&512&&(_e||n===null||xt(n,n.return)),r&64&&$t&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=Tt;if(Ie(e,t),qe(t),r&512&&(_e||n===null||xt(n,n.return)),r&4){var a=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":a=i.getElementsByTagName("title")[0],(!a||a[Ea]||a[ke]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),Ne(a,r,n),a[ke]=t,we(a),r=a;break e;case"link":var s=Ih("link","href",i).get(r+(n.href||""));if(s){for(var l=0;l<s.length;l++)if(a=s[l],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(l,1);break t}}a=i.createElement(r),Ne(a,r,n),i.head.appendChild(a);break;case"meta":if(s=Ih("meta","content",i).get(r+(n.content||""))){for(l=0;l<s.length;l++)if(a=s[l],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(l,1);break t}}a=i.createElement(r),Ne(a,r,n),i.head.appendChild(a);break;default:throw Error(S(468,r))}a[ke]=t,we(a),r=a}t.stateNode=r}else qh(i,t.type,t.stateNode);else t.stateNode=Hh(i,r,t.memoizedProps);else a!==r?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,r===null?qh(i,t.type,t.stateNode):Hh(i,r,t.memoizedProps)):r===null&&t.stateNode!==null&&go(t,t.memoizedProps,n.memoizedProps)}break;case 27:Ie(e,t),qe(t),r&512&&(_e||n===null||xt(n,n.return)),n!==null&&r&4&&go(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Ie(e,t),qe(t),r&512&&(_e||n===null||xt(n,n.return)),t.flags&32){i=t.stateNode;try{Fr(i,"")}catch(y){X(t,t.return,y)}}r&4&&t.stateNode!=null&&(i=t.memoizedProps,go(t,i,n!==null?n.memoizedProps:i)),r&1024&&(yo=!0);break;case 6:if(Ie(e,t),qe(t),r&4){if(t.stateNode===null)throw Error(S(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(y){X(t,t.return,y)}}break;case 3:if(gs=null,i=Tt,Tt=Fs(e.containerInfo),Ie(e,t),Tt=i,qe(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{si(e.containerInfo)}catch(y){X(t,t.return,y)}yo&&(yo=!1,Pg(t));break;case 4:r=Tt,Tt=Fs(t.stateNode.containerInfo),Ie(e,t),qe(t),Tt=r;break;case 12:Ie(e,t),qe(t);break;case 31:Ie(e,t),qe(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,qa(t,r)));break;case 13:Ie(e,t),qe(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(jl=it()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,qa(t,r)));break;case 22:i=t.memoizedState!==null;var o=n!==null&&n.memoizedState!==null,c=$t,u=_e;if($t=c||i,_e=u||o,Ie(e,t),_e=u,$t=c,qe(t),r&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||o||$t||_e||qn(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){o=n=e;try{if(a=o.stateNode,i)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{l=o.stateNode;var f=o.memoizedProps.style,h=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(y){X(o,o.return,y)}}}else if(e.tag===6){if(n===null){o=e;try{o.stateNode.nodeValue=i?"":o.memoizedProps}catch(y){X(o,o.return,y)}}}else if(e.tag===18){if(n===null){o=e;try{var d=o.stateNode;i?zh(d,!0):zh(o.stateNode,!1)}catch(y){X(o,o.return,y)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,qa(t,n))));break;case 19:Ie(e,t),qe(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,qa(t,r)));break;case 30:break;case 21:break;default:Ie(e,t),qe(t)}}function qe(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(Dg(r)){n=r;break}r=r.return}if(n==null)throw Error(S(160));switch(n.tag){case 27:var i=n.stateNode,a=mo(t);Gs(t,a,i);break;case 5:var s=n.stateNode;n.flags&32&&(Fr(s,""),n.flags&=-33);var l=mo(t);Gs(t,l,s);break;case 3:case 4:var o=n.stateNode.containerInfo,c=mo(t);gc(t,c,o);break;default:throw Error(S(161))}}catch(u){X(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Pg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Pg(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function zt(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Ug(t,e.alternate,e),e=e.sibling}function qn(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:xn(4,e,e.return),qn(e);break;case 1:xt(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&kg(e,e.return,n),qn(e);break;case 27:Zi(e.stateNode);case 26:case 5:xt(e,e.return),qn(e);break;case 22:e.memoizedState===null&&qn(e);break;case 30:qn(e);break;default:qn(e)}t=t.sibling}}function Bt(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,i=t,a=e,s=a.flags;switch(a.tag){case 0:case 11:case 15:Bt(i,a,n),Ra(4,a);break;case 1:if(Bt(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){X(r,r.return,c)}if(r=a,i=r.updateQueue,i!==null){var l=r.stateNode;try{var o=i.shared.hiddenCallbacks;if(o!==null)for(i.shared.hiddenCallbacks=null,i=0;i<o.length;i++)Bp(o[i],l)}catch(c){X(r,r.return,c)}}n&&s&64&&xg(a),Ki(a,a.return);break;case 27:Ng(a);case 26:case 5:Bt(i,a,n),n&&r===null&&s&4&&jg(a),Ki(a,a.return);break;case 12:Bt(i,a,n);break;case 31:Bt(i,a,n),n&&s&4&&Bg(i,a);break;case 13:Bt(i,a,n),n&&s&4&&Lg(i,a);break;case 22:a.memoizedState===null&&Bt(i,a,n),Ki(a,a.return);break;case 30:break;default:Bt(i,a,n)}e=e.sibling}}function Ku(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Ca(n))}function Ju(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ca(t))}function bt(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Hg(t,e,n,r),e=e.sibling}function Hg(t,e,n,r){var i=e.flags;switch(e.tag){case 0:case 11:case 15:bt(t,e,n,r),i&2048&&Ra(9,e);break;case 1:bt(t,e,n,r);break;case 3:bt(t,e,n,r),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ca(t)));break;case 12:if(i&2048){bt(t,e,n,r),t=e.stateNode;try{var a=e.memoizedProps,s=a.id,l=a.onPostCommit;typeof l=="function"&&l(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(o){X(e,e.return,o)}}else bt(t,e,n,r);break;case 31:bt(t,e,n,r);break;case 13:bt(t,e,n,r);break;case 23:break;case 22:a=e.stateNode,s=e.alternate,e.memoizedState!==null?a._visibility&2?bt(t,e,n,r):Ji(t,e):a._visibility&2?bt(t,e,n,r):(a._visibility|=2,Cr(t,e,n,r,(e.subtreeFlags&10256)!==0||!1)),i&2048&&Ku(s,e);break;case 24:bt(t,e,n,r),i&2048&&Ju(e.alternate,e);break;default:bt(t,e,n,r)}}function Cr(t,e,n,r,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var a=t,s=e,l=n,o=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:Cr(a,s,l,o,i),Ra(8,s);break;case 23:break;case 22:var u=s.stateNode;s.memoizedState!==null?u._visibility&2?Cr(a,s,l,o,i):Ji(a,s):(u._visibility|=2,Cr(a,s,l,o,i)),i&&c&2048&&Ku(s.alternate,s);break;case 24:Cr(a,s,l,o,i),i&&c&2048&&Ju(s.alternate,s);break;default:Cr(a,s,l,o,i)}e=e.sibling}}function Ji(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,i=r.flags;switch(r.tag){case 22:Ji(n,r),i&2048&&Ku(r.alternate,r);break;case 24:Ji(n,r),i&2048&&Ju(r.alternate,r);break;default:Ji(n,r)}e=e.sibling}}var Ui=8192;function vr(t,e,n){if(t.subtreeFlags&Ui)for(t=t.child;t!==null;)Ig(t,e,n),t=t.sibling}function Ig(t,e,n){switch(t.tag){case 26:vr(t,e,n),t.flags&Ui&&t.memoizedState!==null&&jb(n,Tt,t.memoizedState,t.memoizedProps);break;case 5:vr(t,e,n);break;case 3:case 4:var r=Tt;Tt=Fs(t.stateNode.containerInfo),vr(t,e,n),Tt=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Ui,Ui=16777216,vr(t,e,n),Ui=r):vr(t,e,n));break;default:vr(t,e,n)}}function qg(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Oi(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];Ce=r,Vg(r,t)}qg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Gg(t),t=t.sibling}function Gg(t){switch(t.tag){case 0:case 11:case 15:Oi(t),t.flags&2048&&xn(9,t,t.return);break;case 3:Oi(t);break;case 12:Oi(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,ds(t)):Oi(t);break;default:Oi(t)}}function ds(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];Ce=r,Vg(r,t)}qg(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:xn(8,e,e.return),ds(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,ds(e));break;default:ds(e)}t=t.sibling}}function Vg(t,e){for(;Ce!==null;){var n=Ce;switch(n.tag){case 0:case 11:case 15:xn(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Ca(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Ce=r;else e:for(n=t;Ce!==null;){r=Ce;var i=r.sibling,a=r.return;if(Mg(r),r===n){Ce=null;break e}if(i!==null){i.return=a,Ce=i;break e}Ce=a}}}var Y_={getCacheForType:function(t){var e=De(be),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return De(be).controller.signal}},K_=typeof WeakMap=="function"?WeakMap:Map,K=0,W=null,q=null,G=0,Q=0,We=null,dn=!1,pi=!1,Qu=!1,Xt=0,fe=0,kn=0,tr=0,Xu=0,rt=0,ni=0,Qi=null,Ke=null,mc=!1,jl=0,Yg=0,Vs=1/0,Ys=null,Sn=null,Ee=0,En=null,ri=null,Vt=0,yc=0,vc=null,Kg=null,Xi=0,_c=null;function lt(){return K&2&&G!==0?G&-G:z.T!==null?Fu():np()}function Jg(){if(rt===0)if(!(G&536870912)||V){var t=Ma;Ma<<=1,!(Ma&3932160)&&(Ma=262144),rt=t}else rt=536870912;return t=ct.current,t!==null&&(t.flags|=32),rt}function Qe(t,e,n){(t===W&&(Q===2||Q===9)||t.cancelPendingCommit!==null)&&(ii(t,0),pn(t,G,rt,!1)),Sa(t,n),(!(K&2)||t!==W)&&(t===W&&(!(K&2)&&(tr|=n),fe===4&&pn(t,G,rt,!1)),Dt(t))}function Qg(t,e,n){if(K&6)throw Error(S(327));var r=!n&&(e&127)===0&&(e&t.expiredLanes)===0||ba(t,e),i=r?X_(t,e):vo(t,e,!0),a=r;do{if(i===0){pi&&!r&&pn(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!J_(n)){i=vo(t,e,!1),a=!1;continue}if(i===2){if(a=e,t.errorRecoveryDisabledLanes&a)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var l=t;i=Qi;var o=l.current.memoizedState.isDehydrated;if(o&&(ii(l,s).flags|=256),s=vo(l,s,!1),s!==2){if(Qu&&!o){l.errorRecoveryDisabledLanes|=a,tr|=a,i=4;break e}a=Ke,Ke=i,a!==null&&(Ke===null?Ke=a:Ke.push.apply(Ke,a))}i=s}if(a=!1,i!==2)continue}}if(i===1){ii(t,0),pn(t,e,0,!0);break}e:{switch(r=t,a=i,a){case 0:case 1:throw Error(S(345));case 4:if((e&4194048)!==e)break;case 6:pn(r,e,rt,!dn);break e;case 2:Ke=null;break;case 3:case 5:break;default:throw Error(S(329))}if((e&62914560)===e&&(i=jl+300-it(),10<i)){if(pn(r,e,rt,!dn),bl(r,0,!0)!==0)break e;Vt=e,r.timeoutHandle=gm(Th.bind(null,r,n,Ke,Ys,mc,e,rt,tr,ni,dn,a,"Throttled",-0,0),i);break e}Th(r,n,Ke,Ys,mc,e,rt,tr,ni,dn,a,null,-0,0)}}break}while(!0);Dt(t)}function Th(t,e,n,r,i,a,s,l,o,c,u,f,h,d){if(t.timeoutHandle=-1,f=e.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ht},Ig(e,a,f);var y=(a&62914560)===a?jl-it():(a&4194048)===a?Yg-it():0;if(y=Db(f,y),y!==null){Vt=a,t.cancelPendingCommit=y(wh.bind(null,t,e,a,n,r,i,s,l,o,u,f,null,h,d)),pn(t,a,s,!c);return}}wh(t,e,a,n,r,i,s,l,o)}function J_(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ot(a(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pn(t,e,n,r){e&=~Xu,e&=~tr,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var i=e;0<i;){var a=31-st(i),s=1<<a;r[a]=-1,i&=~s}n!==0&&Wd(t,n,e)}function Dl(){return K&6?!0:(Oa(0),!1)}function Zu(){if(q!==null){if(Q===0)var t=q.return;else t=q,It=fr=null,zu(t),Gr=null,sa=0,t=q;for(;t!==null;)Ag(t.alternate,t),t=t.return;q=null}}function ii(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,pb(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Vt=0,Zu(),W=t,q=n=qt(t.current,null),G=e,Q=0,We=null,dn=!1,pi=ba(t,e),Qu=!1,ni=rt=Xu=tr=kn=fe=0,Ke=Qi=null,mc=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var i=31-st(r),a=1<<i;e|=t[i],r&=~a}return Xt=e,Cl(),n}function Xg(t,e){P=null,z.H=oa,e===di||e===Rl?(e=th(),Q=3):e===xu?(e=th(),Q=4):Q=e===Vu?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,We=e,q===null&&(fe=1,Is(t,gt(e,t.current)))}function Zg(){var t=ct.current;return t===null?!0:(G&4194048)===G?yt===null:(G&62914560)===G||G&536870912?t===yt:!1}function Fg(){var t=z.H;return z.H=oa,t===null?oa:t}function Wg(){var t=z.A;return z.A=Y_,t}function Ks(){fe=4,dn||(G&4194048)!==G&&ct.current!==null||(pi=!0),!(kn&134217727)&&!(tr&134217727)||W===null||pn(W,G,rt,!1)}function vo(t,e,n){var r=K;K|=2;var i=Fg(),a=Wg();(W!==t||G!==e)&&(Ys=null,ii(t,e)),e=!1;var s=fe;e:do try{if(Q!==0&&q!==null){var l=q,o=We;switch(Q){case 8:Zu(),s=6;break e;case 3:case 2:case 9:case 6:ct.current===null&&(e=!0);var c=Q;if(Q=0,We=null,$r(t,l,o,c),n&&pi){s=0;break e}break;default:c=Q,Q=0,We=null,$r(t,l,o,c)}}Q_(),s=fe;break}catch(u){Xg(t,u)}while(!0);return e&&t.shellSuspendCounter++,It=fr=null,K=r,z.H=i,z.A=a,q===null&&(W=null,G=0,Cl()),s}function Q_(){for(;q!==null;)em(q)}function X_(t,e){var n=K;K|=2;var r=Fg(),i=Wg();W!==t||G!==e?(Ys=null,Vs=it()+500,ii(t,e)):pi=ba(t,e);e:do try{if(Q!==0&&q!==null){e=q;var a=We;t:switch(Q){case 1:Q=0,We=null,$r(t,e,a,1);break;case 2:case 9:if(eh(a)){Q=0,We=null,Ch(e);break}e=function(){Q!==2&&Q!==9||W!==t||(Q=7),Dt(t)},a.then(e,e);break e;case 3:Q=7;break e;case 4:Q=5;break e;case 7:eh(a)?(Q=0,We=null,Ch(e)):(Q=0,We=null,$r(t,e,a,7));break;case 5:var s=null;switch(q.tag){case 26:s=q.memoizedState;case 5:case 27:var l=q;if(s?bm(s):l.stateNode.complete){Q=0,We=null;var o=l.sibling;if(o!==null)q=o;else{var c=l.return;c!==null?(q=c,Nl(c)):q=null}break t}}Q=0,We=null,$r(t,e,a,5);break;case 6:Q=0,We=null,$r(t,e,a,6);break;case 8:Zu(),fe=6;break e;default:throw Error(S(462))}}Z_();break}catch(u){Xg(t,u)}while(!0);return It=fr=null,z.H=r,z.A=i,K=n,q!==null?0:(W=null,G=0,Cl(),fe)}function Z_(){for(;q!==null&&!bv();)em(q)}function em(t){var e=Og(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?Nl(t):q=e}function Ch(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=yh(n,e,e.pendingProps,e.type,void 0,G);break;case 11:e=yh(n,e,e.pendingProps,e.type.render,e.ref,G);break;case 5:zu(e);default:Ag(n,e),e=q=Ap(e,Xt),e=Og(n,e,Xt)}t.memoizedProps=t.pendingProps,e===null?Nl(t):q=e}function $r(t,e,n,r){It=fr=null,zu(e),Gr=null,sa=0;var i=e.return;try{if($_(t,i,e,n,G)){fe=1,Is(t,gt(n,t.current)),q=null;return}}catch(a){if(i!==null)throw q=i,a;fe=1,Is(t,gt(n,t.current)),q=null;return}e.flags&32768?(V||r===1?t=!0:pi||G&536870912?t=!1:(dn=t=!0,(r===2||r===9||r===3||r===6)&&(r=ct.current,r!==null&&r.tag===13&&(r.flags|=16384))),tm(e,t)):Nl(e)}function Nl(t){var e=t;do{if(e.flags&32768){tm(e,dn);return}t=e.return;var n=I_(e.alternate,e,Xt);if(n!==null){q=n;return}if(e=e.sibling,e!==null){q=e;return}q=e=t}while(e!==null);fe===0&&(fe=5)}function tm(t,e){do{var n=q_(t.alternate,t);if(n!==null){n.flags&=32767,q=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){q=t;return}q=t=n}while(t!==null);fe=6,q=null}function wh(t,e,n,r,i,a,s,l,o){t.cancelPendingCommit=null;do Ul();while(Ee!==0);if(K&6)throw Error(S(327));if(e!==null){if(e===t.current)throw Error(S(177));if(a=e.lanes|e.childLanes,a|=Eu,kv(t,n,a,s,l,o),t===W&&(q=W=null,G=0),ri=e,En=t,Vt=n,yc=a,vc=i,Kg=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,tb(js,function(){return sm(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=z.T,z.T=null,i=J.p,J.p=2,s=K,K|=4;try{G_(t,e,n)}finally{K=s,J.p=i,z.T=r}}Ee=1,nm(),rm(),im()}}function nm(){if(Ee===1){Ee=0;var t=En,e=ri,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=z.T,z.T=null;var r=J.p;J.p=2;var i=K;K|=4;try{$g(e,t);var a=Tc,s=bp(t.containerInfo),l=a.focusedElem,o=a.selectionRange;if(s!==l&&l&&l.ownerDocument&&_p(l.ownerDocument.documentElement,l)){if(o!==null&&Su(l)){var c=o.start,u=o.end;if(u===void 0&&(u=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(u,l.value.length);else{var f=l.ownerDocument||document,h=f&&f.defaultView||window;if(h.getSelection){var d=h.getSelection(),y=l.textContent.length,v=Math.min(o.start,y),b=o.end===void 0?v:Math.min(o.end,y);!d.extend&&v>b&&(s=b,b=v,v=s);var p=Kf(l,v),g=Kf(l,b);if(p&&g&&(d.rangeCount!==1||d.anchorNode!==p.node||d.anchorOffset!==p.offset||d.focusNode!==g.node||d.focusOffset!==g.offset)){var m=f.createRange();m.setStart(p.node,p.offset),d.removeAllRanges(),v>b?(d.addRange(m),d.extend(g.node,g.offset)):(m.setEnd(g.node,g.offset),d.addRange(m))}}}}for(f=[],d=l;d=d.parentNode;)d.nodeType===1&&f.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var _=f[l];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}tl=!!Ec,Tc=Ec=null}finally{K=i,J.p=r,z.T=n}}t.current=e,Ee=2}}function rm(){if(Ee===2){Ee=0;var t=En,e=ri,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=z.T,z.T=null;var r=J.p;J.p=2;var i=K;K|=4;try{Ug(t,e.alternate,e)}finally{K=i,J.p=r,z.T=n}}Ee=3}}function im(){if(Ee===4||Ee===3){Ee=0,Sv();var t=En,e=ri,n=Vt,r=Kg;e.subtreeFlags&10256||e.flags&10256?Ee=5:(Ee=0,ri=En=null,am(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Sn=null),pu(n),e=e.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(_a,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=z.T,i=J.p,J.p=2,z.T=null;try{for(var a=t.onRecoverableError,s=0;s<r.length;s++){var l=r[s];a(l.value,{componentStack:l.stack})}}finally{z.T=e,J.p=i}}Vt&3&&Ul(),Dt(t),i=t.pendingLanes,n&261930&&i&42?t===_c?Xi++:(Xi=0,_c=t):Xi=0,Oa(0)}}function am(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Ca(e)))}function Ul(){return nm(),rm(),im(),sm()}function sm(){if(Ee!==5)return!1;var t=En,e=yc;yc=0;var n=pu(Vt),r=z.T,i=J.p;try{J.p=32>n?32:n,z.T=null,n=vc,vc=null;var a=En,s=Vt;if(Ee=0,ri=En=null,Vt=0,K&6)throw Error(S(331));var l=K;if(K|=4,Gg(a.current),Hg(a,a.current,s,n),K=l,Oa(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(_a,a)}catch{}return!0}finally{J.p=i,z.T=r,am(t,e)}}function Rh(t,e,n){e=gt(n,e),e=hc(t.stateNode,e,2),t=bn(t,e,2),t!==null&&(Sa(t,2),Dt(t))}function X(t,e,n){if(t.tag===3)Rh(t,t,n);else for(;e!==null;){if(e.tag===3){Rh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sn===null||!Sn.has(r))){t=gt(n,t),n=Sg(2),r=bn(e,n,2),r!==null&&(Eg(n,r,e,t),Sa(r,2),Dt(r));break}}e=e.return}}function _o(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new K_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(Qu=!0,i.add(n),t=F_.bind(null,t,e,n),e.then(t,t))}function F_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,W===t&&(G&n)===n&&(fe===4||fe===3&&(G&62914560)===G&&300>it()-jl?!(K&2)&&ii(t,0):Xu|=n,ni===G&&(ni=0)),Dt(t)}function lm(t,e){e===0&&(e=Fd()),t=ur(t,e),t!==null&&(Sa(t,e),Dt(t))}function W_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lm(t,n)}function eb(t,e){var n=0;switch(t.tag){case 31:case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(S(314))}r!==null&&r.delete(e),lm(t,n)}function tb(t,e){return hu(t,e)}var Js=null,wr=null,bc=!1,Qs=!1,bo=!1,gn=0;function Dt(t){t!==wr&&t.next===null&&(wr===null?Js=wr=t:wr=wr.next=t),Qs=!0,bc||(bc=!0,rb())}function Oa(t,e){if(!bo&&Qs){bo=!0;do for(var n=!1,r=Js;r!==null;){if(t!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var s=r.suspendedLanes,l=r.pingedLanes;a=(1<<31-st(42|t)+1)-1,a&=i&~(s&~l),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,Oh(r,a))}else a=G,a=bl(r,r===W?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||ba(r,a)||(n=!0,Oh(r,a));r=r.next}while(n);bo=!1}}function nb(){om()}function om(){Qs=bc=!1;var t=0;gn!==0&&db()&&(t=gn);for(var e=it(),n=null,r=Js;r!==null;){var i=r.next,a=cm(r,e);a===0?(r.next=null,n===null?Js=i:n.next=i,i===null&&(wr=n)):(n=r,(t!==0||a&3)&&(Qs=!0)),r=i}Ee!==0&&Ee!==5||Oa(t),gn!==0&&(gn=0)}function cm(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var s=31-st(a),l=1<<s,o=i[s];o===-1?(!(l&n)||l&r)&&(i[s]=xv(l,e)):o<=e&&(t.expiredLanes|=l),a&=~l}if(e=W,n=G,n=bl(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(Q===2||Q===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Kl(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||ba(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&Kl(r),pu(n)){case 2:case 8:n=Xd;break;case 32:n=js;break;case 268435456:n=Zd;break;default:n=js}return r=um.bind(null,t),n=hu(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&Kl(r),t.callbackPriority=2,t.callbackNode=null,2}function um(t,e){if(Ee!==0&&Ee!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Ul()&&t.callbackNode!==n)return null;var r=G;return r=bl(t,t===W?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(Qg(t,r,e),cm(t,it()),t.callbackNode!=null&&t.callbackNode===n?um.bind(null,t):null)}function Oh(t,e){if(Ul())return null;Qg(t,e,!0)}function rb(){gb(function(){K&6?hu(Qd,nb):om()})}function Fu(){if(gn===0){var t=Wr;t===0&&(t=Ua,Ua<<=1,!(Ua&261888)&&(Ua=256)),gn=t}return gn}function Ah(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:is(""+t)}function xh(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function ib(t,e,n,r,i){if(e==="submit"&&n&&n.stateNode===i){var a=Ah((i[Xe]||null).action),s=r.submitter;s&&(e=(e=s[Xe]||null)?Ah(e.formAction):s.getAttribute("formAction"),e!==null&&(a=e,s=null));var l=new Sl("action","action",null,r,i);t.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(gn!==0){var o=s?xh(i,s):new FormData(i);uc(n,{pending:!0,data:o,method:i.method,action:a},null,o)}}else typeof a=="function"&&(l.preventDefault(),o=s?xh(i,s):new FormData(i),uc(n,{pending:!0,data:o,method:i.method,action:a},a,o))},currentTarget:i}]})}}for(var So=0;So<Fo.length;So++){var Eo=Fo[So],ab=Eo.toLowerCase(),sb=Eo[0].toUpperCase()+Eo.slice(1);wt(ab,"on"+sb)}wt(Ep,"onAnimationEnd");wt(Tp,"onAnimationIteration");wt(Cp,"onAnimationStart");wt("dblclick","onDoubleClick");wt("focusin","onFocus");wt("focusout","onBlur");wt(E_,"onTransitionRun");wt(T_,"onTransitionStart");wt(C_,"onTransitionCancel");wt(wp,"onTransitionEnd");Zr("onMouseEnter",["mouseout","mouseover"]);Zr("onMouseLeave",["mouseout","mouseover"]);Zr("onPointerEnter",["pointerout","pointerover"]);Zr("onPointerLeave",["pointerout","pointerover"]);lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ca));function fm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==a&&i.isPropagationStopped())break e;a=l,i.currentTarget=c;try{a(i)}catch(u){Ns(u)}i.currentTarget=null,a=o}else for(s=0;s<r.length;s++){if(l=r[s],o=l.instance,c=l.currentTarget,l=l.listener,o!==a&&i.isPropagationStopped())break e;a=l,i.currentTarget=c;try{a(i)}catch(u){Ns(u)}i.currentTarget=null,a=o}}}}function I(t,e){var n=e[Go];n===void 0&&(n=e[Go]=new Set);var r=t+"__bubble";n.has(r)||(hm(e,t,2,!1),n.add(r))}function To(t,e,n){var r=0;e&&(r|=4),hm(n,t,r,e)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function Wu(t){if(!t[Ga]){t[Ga]=!0,rp.forEach(function(n){n!=="selectionchange"&&(lb.has(n)||To(n,!1,t),To(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ga]||(e[Ga]=!0,To("selectionchange",!1,e))}}function hm(t,e,n,r){switch(wm(e)){case 2:var i=Mb;break;case 8:i=zb;break;default:i=rf}n=i.bind(null,e,n,t),i=void 0,!Qo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Co(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i)break;if(s===4)for(s=r.return;s!==null;){var o=s.tag;if((o===3||o===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;l!==null;){if(s=kr(l),s===null)return;if(o=s.tag,o===5||o===6||o===26||o===27){r=a=s;continue e}l=l.parentNode}}r=r.return}fp(function(){var c=a,u=yu(n),f=[];e:{var h=Rp.get(t);if(h!==void 0){var d=Sl,y=t;switch(t){case"keypress":if(ss(n)===0)break e;case"keydown":case"keyup":d=e_;break;case"focusin":y="focus",d=Fl;break;case"focusout":y="blur",d=Fl;break;case"beforeblur":case"afterblur":d=Fl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Iv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=r_;break;case Ep:case Tp:case Cp:d=Vv;break;case wp:d=a_;break;case"scroll":case"scrollend":d=Pv;break;case"wheel":d=l_;break;case"copy":case"cut":case"paste":d=Kv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=$f;break;case"toggle":case"beforetoggle":d=c_}var v=(e&4)!==0,b=!v&&(t==="scroll"||t==="scrollend"),p=v?h!==null?h+"Capture":null:h;v=[];for(var g=c,m;g!==null;){var _=g;if(m=_.stateNode,_=_.tag,_!==5&&_!==26&&_!==27||m===null||p===null||(_=ta(g,p),_!=null&&v.push(ua(g,_,m))),b)break;g=g.return}0<v.length&&(h=new d(h,y,null,n,u),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==Jo&&(y=n.relatedTarget||n.fromElement)&&(kr(y)||y[ui]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(y=n.relatedTarget||n.toElement,d=c,y=y?kr(y):null,y!==null&&(b=va(y),v=y.tag,y!==b||v!==5&&v!==27&&v!==6)&&(y=null)):(d=null,y=c),d!==y)){if(v=Bf,_="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=$f,_="onPointerLeave",p="onPointerEnter",g="pointer"),b=d==null?h:Di(d),m=y==null?h:Di(y),h=new v(_,g+"leave",d,n,u),h.target=b,h.relatedTarget=m,_=null,kr(u)===c&&(v=new v(p,g+"enter",y,n,u),v.target=m,v.relatedTarget=b,_=v),b=_,d&&y)t:{for(v=ob,p=d,g=y,m=0,_=p;_;_=v(_))m++;_=0;for(var w=g;w;w=v(w))_++;for(;0<m-_;)p=v(p),m--;for(;0<_-m;)g=v(g),_--;for(;m--;){if(p===g||g!==null&&p===g.alternate){v=p;break t}p=v(p),g=v(g)}v=null}else v=null;d!==null&&kh(f,h,d,v,!1),y!==null&&b!==null&&kh(f,b,y,v,!0)}}e:{if(h=c?Di(c):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var x=qf;else if(If(h))if(yp)x=__;else{x=y_;var C=m_}else d=h.nodeName,!d||d.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?c&&mu(c.elementType)&&(x=qf):x=v_;if(x&&(x=x(t,c))){mp(f,x,n,u);break e}C&&C(t,h,c),t==="focusout"&&c&&h.type==="number"&&c.memoizedProps.value!=null&&Ko(h,"number",h.value)}switch(C=c?Di(c):window,t){case"focusin":(If(C)||C.contentEditable==="true")&&(Nr=C,Xo=c,Hi=null);break;case"focusout":Hi=Xo=Nr=null;break;case"mousedown":Zo=!0;break;case"contextmenu":case"mouseup":case"dragend":Zo=!1,Jf(f,n,u);break;case"selectionchange":if(S_)break;case"keydown":case"keyup":Jf(f,n,u)}var T;if(bu)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Dr?pp(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(dp&&n.locale!=="ko"&&(Dr||A!=="onCompositionStart"?A==="onCompositionEnd"&&Dr&&(T=hp()):(hn=u,vu="value"in hn?hn.value:hn.textContent,Dr=!0)),C=Xs(c,A),0<C.length&&(A=new Lf(A,t,null,n,u),f.push({event:A,listeners:C}),T?A.data=T:(T=gp(n),T!==null&&(A.data=T)))),(T=f_?h_(t,n):d_(t,n))&&(A=Xs(c,"onBeforeInput"),0<A.length&&(C=new Lf("onBeforeInput","beforeinput",null,n,u),f.push({event:C,listeners:A}),C.data=T)),ib(f,t,c,n,u)}fm(f,e)})}function ua(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=ta(t,n),i!=null&&r.unshift(ua(t,i,a)),i=ta(t,e),i!=null&&r.push(ua(t,i,a))),t.tag===3)return r;t=t.return}return[]}function ob(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function kh(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var l=n,o=l.alternate,c=l.stateNode;if(l=l.tag,o!==null&&o===r)break;l!==5&&l!==26&&l!==27||c===null||(o=c,i?(c=ta(n,a),c!=null&&s.unshift(ua(n,c,o))):i||(c=ta(n,a),c!=null&&s.push(ua(n,c,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var cb=/\r\n?/g,ub=/\u0000|\uFFFD/g;function jh(t){return(typeof t=="string"?t:""+t).replace(cb,`
`).replace(ub,"")}function dm(t,e){return e=jh(e),jh(t)===e}function Z(t,e,n,r,i,a){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||Fr(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&Fr(t,""+r);break;case"className":Ba(t,"class",r);break;case"tabIndex":Ba(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ba(t,n,r);break;case"style":up(t,r,a);break;case"data":if(e!=="object"){Ba(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=is(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&Z(t,e,"name",i.name,i,null),Z(t,e,"formEncType",i.formEncType,i,null),Z(t,e,"formMethod",i.formMethod,i,null),Z(t,e,"formTarget",i.formTarget,i,null)):(Z(t,e,"encType",i.encType,i,null),Z(t,e,"method",i.method,i,null),Z(t,e,"target",i.target,i,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=is(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=Ht);break;case"onScroll":r!=null&&I("scroll",t);break;case"onScrollEnd":r!=null&&I("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(S(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(S(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=is(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":I("beforetoggle",t),I("toggle",t),rs(t,"popover",r);break;case"xlinkActuate":Nt(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Nt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Nt(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Nt(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Nt(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Nt(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":rs(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Lv.get(n)||n,rs(t,n,r))}}function Sc(t,e,n,r,i,a){switch(n){case"style":up(t,r,a);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(S(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(S(60));t.innerHTML=n}}break;case"children":typeof r=="string"?Fr(t,r):(typeof r=="number"||typeof r=="bigint")&&Fr(t,""+r);break;case"onScroll":r!=null&&I("scroll",t);break;case"onScrollEnd":r!=null&&I("scrollend",t);break;case"onClick":r!=null&&(t.onclick=Ht);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ip.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),a=t[Xe]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,i),typeof r=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,i);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):rs(t,n,r)}}}function Ne(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":I("error",t),I("load",t);var r=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var s=n[a];if(s!=null)switch(a){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(S(137,e));default:Z(t,e,a,s,n,null)}}i&&Z(t,e,"srcSet",n.srcSet,n,null),r&&Z(t,e,"src",n.src,n,null);return;case"input":I("invalid",t);var l=a=s=i=null,o=null,c=null;for(r in n)if(n.hasOwnProperty(r)){var u=n[r];if(u!=null)switch(r){case"name":i=u;break;case"type":s=u;break;case"checked":o=u;break;case"defaultChecked":c=u;break;case"value":a=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(S(137,e));break;default:Z(t,e,r,u,n,null)}}lp(t,a,l,o,c,s,i,!1);return;case"select":I("invalid",t),r=s=a=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":a=l;break;case"defaultValue":s=l;break;case"multiple":r=l;default:Z(t,e,i,l,n,null)}e=a,n=s,t.multiple=!!r,e!=null?Hr(t,!!r,e,!1):n!=null&&Hr(t,!!r,n,!0);return;case"textarea":I("invalid",t),a=i=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":i=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(S(91));break;default:Z(t,e,s,l,n,null)}cp(t,r,i,a);return;case"option":for(o in n)if(n.hasOwnProperty(o)&&(r=n[o],r!=null))switch(o){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Z(t,e,o,r,n,null)}return;case"dialog":I("beforetoggle",t),I("toggle",t),I("cancel",t),I("close",t);break;case"iframe":case"object":I("load",t);break;case"video":case"audio":for(r=0;r<ca.length;r++)I(ca[r],t);break;case"image":I("error",t),I("load",t);break;case"details":I("toggle",t);break;case"embed":case"source":case"link":I("error",t),I("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(r=n[c],r!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(S(137,e));default:Z(t,e,c,r,n,null)}return;default:if(mu(e)){for(u in n)n.hasOwnProperty(u)&&(r=n[u],r!==void 0&&Sc(t,e,u,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(r=n[l],r!=null&&Z(t,e,l,r,n,null))}function fb(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,s=null,l=null,o=null,c=null,u=null;for(d in n){var f=n[d];if(n.hasOwnProperty(d)&&f!=null)switch(d){case"checked":break;case"value":break;case"defaultValue":o=f;default:r.hasOwnProperty(d)||Z(t,e,d,null,r,f)}}for(var h in r){var d=r[h];if(f=n[h],r.hasOwnProperty(h)&&(d!=null||f!=null))switch(h){case"type":a=d;break;case"name":i=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(S(137,e));break;default:d!==f&&Z(t,e,h,d,r,f)}}Yo(t,s,l,o,c,u,a,i);return;case"select":d=s=l=h=null;for(a in n)if(o=n[a],n.hasOwnProperty(a)&&o!=null)switch(a){case"value":break;case"multiple":d=o;default:r.hasOwnProperty(a)||Z(t,e,a,null,r,o)}for(i in r)if(a=r[i],o=n[i],r.hasOwnProperty(i)&&(a!=null||o!=null))switch(i){case"value":h=a;break;case"defaultValue":l=a;break;case"multiple":s=a;default:a!==o&&Z(t,e,i,a,r,o)}e=l,n=s,r=d,h!=null?Hr(t,!!n,h,!1):!!r!=!!n&&(e!=null?Hr(t,!!n,e,!0):Hr(t,!!n,n?[]:"",!1));return;case"textarea":d=h=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null&&!r.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Z(t,e,l,null,r,i)}for(s in r)if(i=r[s],a=n[s],r.hasOwnProperty(s)&&(i!=null||a!=null))switch(s){case"value":h=i;break;case"defaultValue":d=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(S(91));break;default:i!==a&&Z(t,e,s,i,r,a)}op(t,h,d);return;case"option":for(var y in n)if(h=n[y],n.hasOwnProperty(y)&&h!=null&&!r.hasOwnProperty(y))switch(y){case"selected":t.selected=!1;break;default:Z(t,e,y,null,r,h)}for(o in r)if(h=r[o],d=n[o],r.hasOwnProperty(o)&&h!==d&&(h!=null||d!=null))switch(o){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Z(t,e,o,h,r,d)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in n)h=n[v],n.hasOwnProperty(v)&&h!=null&&!r.hasOwnProperty(v)&&Z(t,e,v,null,r,h);for(c in r)if(h=r[c],d=n[c],r.hasOwnProperty(c)&&h!==d&&(h!=null||d!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(S(137,e));break;default:Z(t,e,c,h,r,d)}return;default:if(mu(e)){for(var b in n)h=n[b],n.hasOwnProperty(b)&&h!==void 0&&!r.hasOwnProperty(b)&&Sc(t,e,b,void 0,r,h);for(u in r)h=r[u],d=n[u],!r.hasOwnProperty(u)||h===d||h===void 0&&d===void 0||Sc(t,e,u,h,r,d);return}}for(var p in n)h=n[p],n.hasOwnProperty(p)&&h!=null&&!r.hasOwnProperty(p)&&Z(t,e,p,null,r,h);for(f in r)h=r[f],d=n[f],!r.hasOwnProperty(f)||h===d||h==null&&d==null||Z(t,e,f,h,r,d)}function Dh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,s=i.initiatorType,l=i.duration;if(a&&l&&Dh(s)){for(s=0,l=i.responseEnd,r+=1;r<n.length;r++){var o=n[r],c=o.startTime;if(c>l)break;var u=o.transferSize,f=o.initiatorType;u&&Dh(f)&&(o=o.responseEnd,s+=u*(o<l?1:(l-c)/(o-c)))}if(--r,e+=8*(a+s)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ec=null,Tc=null;function Zs(t){return t.nodeType===9?t:t.ownerDocument}function Nh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pm(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Cc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wo=null;function db(){var t=window.event;return t&&t.type==="popstate"?t===wo?!1:(wo=t,!0):(wo=null,!1)}var gm=typeof setTimeout=="function"?setTimeout:void 0,pb=typeof clearTimeout=="function"?clearTimeout:void 0,Uh=typeof Promise=="function"?Promise:void 0,gb=typeof queueMicrotask=="function"?queueMicrotask:typeof Uh<"u"?function(t){return Uh.resolve(null).then(t).catch(mb)}:gm;function mb(t){setTimeout(function(){throw t})}function Dn(t){return t==="head"}function Mh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(r===0){t.removeChild(i),si(e);return}r--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")r++;else if(n==="html")Zi(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Zi(n);for(var a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[Ea]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=s}}else n==="body"&&Zi(t.ownerDocument.body);n=i}while(n);si(e)}function zh(t,e){var n=t;t=0;do{var r=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=r}while(n)}function wc(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":wc(n),gu(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function yb(t,e,n,r){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[Ea])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=vt(t.nextSibling),t===null)break}return null}function vb(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=vt(t.nextSibling),t===null))return null;return t}function mm(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=vt(t.nextSibling),t===null))return null;return t}function Rc(t){return t.data==="$?"||t.data==="$~"}function Oc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function _b(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function vt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Ac=null;function Bh(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return vt(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Lh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function ym(t,e,n){switch(e=Zs(n),t){case"html":if(t=e.documentElement,!t)throw Error(S(452));return t;case"head":if(t=e.head,!t)throw Error(S(453));return t;case"body":if(t=e.body,!t)throw Error(S(454));return t;default:throw Error(S(451))}}function Zi(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);gu(t)}var _t=new Map,$h=new Set;function Fs(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Zt=J.d;J.d={f:bb,r:Sb,D:Eb,C:Tb,L:Cb,m:wb,X:Ob,S:Rb,M:Ab};function bb(){var t=Zt.f(),e=Dl();return t||e}function Sb(t){var e=fi(t);e!==null&&e.tag===5&&e.type==="form"?ug(e):Zt.r(t)}var gi=typeof document>"u"?null:document;function vm(t,e,n){var r=gi;if(r&&typeof e=="string"&&e){var i=pt(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),$h.has(i)||($h.add(i),t={rel:t,crossOrigin:n,href:e},r.querySelector(i)===null&&(e=r.createElement("link"),Ne(e,"link",t),we(e),r.head.appendChild(e)))}}function Eb(t){Zt.D(t),vm("dns-prefetch",t,null)}function Tb(t,e){Zt.C(t,e),vm("preconnect",t,e)}function Cb(t,e,n){Zt.L(t,e,n);var r=gi;if(r&&t&&e){var i='link[rel="preload"][as="'+pt(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+pt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+pt(n.imageSizes)+'"]')):i+='[href="'+pt(t)+'"]';var a=i;switch(e){case"style":a=ai(t);break;case"script":a=mi(t)}_t.has(a)||(t=ae({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),_t.set(a,t),r.querySelector(i)!==null||e==="style"&&r.querySelector(Aa(a))||e==="script"&&r.querySelector(xa(a))||(e=r.createElement("link"),Ne(e,"link",t),we(e),r.head.appendChild(e)))}}function wb(t,e){Zt.m(t,e);var n=gi;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+pt(r)+'"][href="'+pt(t)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=mi(t)}if(!_t.has(a)&&(t=ae({rel:"modulepreload",href:t},e),_t.set(a,t),n.querySelector(i)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(xa(a)))return}r=n.createElement("link"),Ne(r,"link",t),we(r),n.head.appendChild(r)}}}function Rb(t,e,n){Zt.S(t,e,n);var r=gi;if(r&&t){var i=Pr(r).hoistableStyles,a=ai(t);e=e||"default";var s=i.get(a);if(!s){var l={loading:0,preload:null};if(s=r.querySelector(Aa(a)))l.loading=5;else{t=ae({rel:"stylesheet",href:t,"data-precedence":e},n),(n=_t.get(a))&&ef(t,n);var o=s=r.createElement("link");we(o),Ne(o,"link",t),o._p=new Promise(function(c,u){o.onload=c,o.onerror=u}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,ps(s,e,r)}s={type:"stylesheet",instance:s,count:1,state:l},i.set(a,s)}}}function Ob(t,e){Zt.X(t,e);var n=gi;if(n&&t){var r=Pr(n).hoistableScripts,i=mi(t),a=r.get(i);a||(a=n.querySelector(xa(i)),a||(t=ae({src:t,async:!0},e),(e=_t.get(i))&&tf(t,e),a=n.createElement("script"),we(a),Ne(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function Ab(t,e){Zt.M(t,e);var n=gi;if(n&&t){var r=Pr(n).hoistableScripts,i=mi(t),a=r.get(i);a||(a=n.querySelector(xa(i)),a||(t=ae({src:t,async:!0,type:"module"},e),(e=_t.get(i))&&tf(t,e),a=n.createElement("script"),we(a),Ne(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function Ph(t,e,n,r){var i=(i=yn.current)?Fs(i):null;if(!i)throw Error(S(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=ai(n.href),n=Pr(i).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=ai(n.href);var a=Pr(i).hoistableStyles,s=a.get(t);if(s||(i=i.ownerDocument||i,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,s),(a=i.querySelector(Aa(t)))&&!a._p&&(s.instance=a,s.state.loading=5),_t.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},_t.set(t,n),a||xb(i,t,n,s.state))),e&&r===null)throw Error(S(528,""));return s}if(e&&r!==null)throw Error(S(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=mi(n),n=Pr(i).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(S(444,t))}}function ai(t){return'href="'+pt(t)+'"'}function Aa(t){return'link[rel="stylesheet"]['+t+"]"}function _m(t){return ae({},t,{"data-precedence":t.precedence,precedence:null})}function xb(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),Ne(e,"link",n),we(e),t.head.appendChild(e))}function mi(t){return'[src="'+pt(t)+'"]'}function xa(t){return"script[async]"+t}function Hh(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+pt(n.href)+'"]');if(r)return e.instance=r,we(r),r;var i=ae({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),we(r),Ne(r,"style",i),ps(r,n.precedence,t),e.instance=r;case"stylesheet":i=ai(n.href);var a=t.querySelector(Aa(i));if(a)return e.state.loading|=4,e.instance=a,we(a),a;r=_m(n),(i=_t.get(i))&&ef(r,i),a=(t.ownerDocument||t).createElement("link"),we(a);var s=a;return s._p=new Promise(function(l,o){s.onload=l,s.onerror=o}),Ne(a,"link",r),e.state.loading|=4,ps(a,n.precedence,t),e.instance=a;case"script":return a=mi(n.src),(i=t.querySelector(xa(a)))?(e.instance=i,we(i),i):(r=n,(i=_t.get(a))&&(r=ae({},n),tf(r,i)),t=t.ownerDocument||t,i=t.createElement("script"),we(i),Ne(i,"link",r),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(S(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,ps(r,n.precedence,t));return e.instance}function ps(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,s=0;s<r.length;s++){var l=r[s];if(l.dataset.precedence===e)a=l;else if(a!==i)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function ef(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function tf(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var gs=null;function Ih(t,e,n){if(gs===null){var r=new Map,i=gs=new Map;i.set(n,r)}else i=gs,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var a=n[i];if(!(a[Ea]||a[ke]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(e)||"";s=t+s;var l=r.get(s);l?l.push(a):r.set(s,[a])}}return r}function qh(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function kb(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function bm(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function jb(t,e,n,r){if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=ai(r.href),a=e.querySelector(Aa(i));if(a){e=a._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Ws.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=a,we(a);return}a=e.ownerDocument||e,r=_m(r),(i=_t.get(i))&&ef(r,i),a=a.createElement("link"),we(a);var s=a;s._p=new Promise(function(l,o){s.onload=l,s.onerror=o}),Ne(a,"link",r),n.instance=a}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Ws.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Ro=0;function Db(t,e){return t.stylesheets&&t.count===0&&ms(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var r=setTimeout(function(){if(t.stylesheets&&ms(t,t.stylesheets),t.unsuspend){var a=t.unsuspend;t.unsuspend=null,a()}},6e4+e);0<t.imgBytes&&Ro===0&&(Ro=62500*hb());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ms(t,t.stylesheets),t.unsuspend)){var a=t.unsuspend;t.unsuspend=null,a()}},(t.imgBytes>Ro?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Ws(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ms(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var el=null;function ms(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,el=new Map,e.forEach(Nb,t),el=null,Ws.call(t))}function Nb(t,e){if(!(e.state.loading&4)){var n=el.get(t);if(n)var r=n.get(null);else{n=new Map,el.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}i=e.instance,s=i.getAttribute("data-precedence"),a=n.get(s)||r,a===r&&n.set(null,i),n.set(s,i),this.count++,r=Ws.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var fa={$$typeof:Pt,Provider:null,Consumer:null,_currentValue:Zn,_currentValue2:Zn,_threadCount:0};function Ub(t,e,n,r,i,a,s,l,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jl(0),this.hiddenUpdates=Jl(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Sm(t,e,n,r,i,a,s,l,o,c,u,f){return t=new Ub(t,e,n,s,o,c,u,f,l),e=1,a===!0&&(e|=24),a=tt(3,null,null,e),t.current=a,a.stateNode=t,e=Ou(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:e},ku(a),t}function Em(t){return t?(t=zr,t):zr}function Tm(t,e,n,r,i,a){i=Em(i),r.context===null?r.context=i:r.pendingContext=i,r=_n(e),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=bn(t,r,e),n!==null&&(Qe(n,t,e),qi(n,t,e))}function Gh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function nf(t,e){Gh(t,e),(t=t.alternate)&&Gh(t,e)}function Cm(t){if(t.tag===13||t.tag===31){var e=ur(t,67108864);e!==null&&Qe(e,t,67108864),nf(t,67108864)}}function Vh(t){if(t.tag===13||t.tag===31){var e=lt();e=du(e);var n=ur(t,e);n!==null&&Qe(n,t,e),nf(t,e)}}var tl=!0;function Mb(t,e,n,r){var i=z.T;z.T=null;var a=J.p;try{J.p=2,rf(t,e,n,r)}finally{J.p=a,z.T=i}}function zb(t,e,n,r){var i=z.T;z.T=null;var a=J.p;try{J.p=8,rf(t,e,n,r)}finally{J.p=a,z.T=i}}function rf(t,e,n,r){if(tl){var i=xc(r);if(i===null)Co(t,e,r,nl,n),Yh(t,r);else if(Lb(i,t,e,n,r))r.stopPropagation();else if(Yh(t,r),e&4&&-1<Bb.indexOf(t)){for(;i!==null;){var a=fi(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=Hn(a.pendingLanes);if(s!==0){var l=a;for(l.pendingLanes|=2,l.entangledLanes|=2;s;){var o=1<<31-st(s);l.entanglements[1]|=o,s&=~o}Dt(a),!(K&6)&&(Vs=it()+500,Oa(0))}}break;case 31:case 13:l=ur(a,2),l!==null&&Qe(l,a,2),Dl(),nf(a,2)}if(a=xc(r),a===null&&Co(t,e,r,nl,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Co(t,e,r,null,n)}}function xc(t){return t=yu(t),af(t)}var nl=null;function af(t){if(nl=null,t=kr(t),t!==null){var e=va(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Gd(e),t!==null)return t;t=null}else if(n===31){if(t=Vd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return nl=t,null}function wm(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ev()){case Qd:return 2;case Xd:return 8;case js:case Tv:return 32;case Zd:return 268435456;default:return 32}default:return 32}}var kc=!1,Tn=null,Cn=null,wn=null,ha=new Map,da=new Map,on=[],Bb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yh(t,e){switch(t){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":ha.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(e.pointerId)}}function Ai(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=fi(e),e!==null&&Cm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Lb(t,e,n,r,i){switch(e){case"focusin":return Tn=Ai(Tn,t,e,n,r,i),!0;case"dragenter":return Cn=Ai(Cn,t,e,n,r,i),!0;case"mouseover":return wn=Ai(wn,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return ha.set(a,Ai(ha.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,da.set(a,Ai(da.get(a)||null,t,e,n,r,i)),!0}return!1}function Rm(t){var e=kr(t.target);if(e!==null){var n=va(e);if(n!==null){if(e=n.tag,e===13){if(e=Gd(n),e!==null){t.blockedOn=e,kf(t.priority,function(){Vh(n)});return}}else if(e===31){if(e=Vd(n),e!==null){t.blockedOn=e,kf(t.priority,function(){Vh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ys(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xc(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jo=r,n.target.dispatchEvent(r),Jo=null}else return e=fi(n),e!==null&&Cm(e),t.blockedOn=n,!1;e.shift()}return!0}function Kh(t,e,n){ys(t)&&n.delete(e)}function $b(){kc=!1,Tn!==null&&ys(Tn)&&(Tn=null),Cn!==null&&ys(Cn)&&(Cn=null),wn!==null&&ys(wn)&&(wn=null),ha.forEach(Kh),da.forEach(Kh)}function Va(t,e){t.blockedOn===e&&(t.blockedOn=null,kc||(kc=!0,Te.unstable_scheduleCallback(Te.unstable_NormalPriority,$b)))}var Ya=null;function Jh(t){Ya!==t&&(Ya=t,Te.unstable_scheduleCallback(Te.unstable_NormalPriority,function(){Ya===t&&(Ya=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if(typeof r!="function"){if(af(r||n)===null)continue;break}var a=fi(n);a!==null&&(t.splice(e,3),e-=3,uc(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function si(t){function e(o){return Va(o,t)}Tn!==null&&Va(Tn,t),Cn!==null&&Va(Cn,t),wn!==null&&Va(wn,t),ha.forEach(e),da.forEach(e);for(var n=0;n<on.length;n++){var r=on[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<on.length&&(n=on[0],n.blockedOn===null);)Rm(n),n.blockedOn===null&&on.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],s=i[Xe]||null;if(typeof a=="function")s||Jh(n);else if(s){var l=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[Xe]||null)l=s.formAction;else if(af(i)!==null)continue}else l=s.action;typeof l=="function"?n[r+1]=l:(n.splice(r,3),r-=3),Jh(n)}}}function Om(){function t(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(s){return i=s})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function sf(t){this._internalRoot=t}Ml.prototype.render=sf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(S(409));var n=e.current,r=lt();Tm(n,r,t,e,null,null)};Ml.prototype.unmount=sf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tm(t.current,2,null,t,null,null),Dl(),e[ui]=null}};function Ml(t){this._internalRoot=t}Ml.prototype.unstable_scheduleHydration=function(t){if(t){var e=np();t={blockedOn:null,target:t,priority:e};for(var n=0;n<on.length&&e!==0&&e<on[n].priority;n++);on.splice(n,0,t),n===0&&Rm(t)}};var Qh=Id.version;if(Qh!=="19.2.1")throw Error(S(527,Qh,"19.2.1"));J.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(S(188)):(t=Object.keys(t).join(","),Error(S(268,t)));return t=gv(e),t=t!==null?Yd(t):null,t=t===null?null:t.stateNode,t};var Pb={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{_a=Ka.inject(Pb),at=Ka}catch{}}vl.createRoot=function(t,e){if(!qd(t))throw Error(S(299));var n=!1,r="",i=vg,a=_g,s=bg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Sm(t,1,!1,null,null,n,r,null,i,a,s,Om),t[ui]=e.current,Wu(t),new sf(e)};vl.hydrateRoot=function(t,e,n){if(!qd(t))throw Error(S(299));var r=!1,i="",a=vg,s=_g,l=bg,o=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(o=n.formState)),e=Sm(t,1,!0,e,n??null,r,i,o,a,s,l,Om),e.context=Em(null),n=e.current,r=lt(),r=du(r),i=_n(r),i.callback=null,bn(n,i,r),n=r,e.current.lanes=n,Sa(e,n),Dt(e),t[ui]=e.current,Wu(t),new Ml(e)};vl.version="19.2.1";function Am(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Am)}catch(t){console.error(t)}}Am(),zd.exports=vl;var Hb=zd.exports;const Ib=ml(Hb);class qb{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return Gb(e).buffer}}function Gb(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t){const a=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(a,r),r+=i.byteLength}return n}function xm(t){return new Vb(t).unpack()}function km(t){const e=new Yb,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class Vb{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,i="",a,s;for(;r<e;)a=n[r],a<160?(s=a,r++):(a^192)<32?(s=(a&31)<<6|n[r+1]&63,r+=2):(a^224)<16?(s=(a&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(s=(a&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(s);return this.index+=e,i}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,i=e&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,i=(e>>20&2047)-1023,s=(e&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*s}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class Yb{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const a=this.pack(e[i]);return a instanceof Promise?a.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),i=e/2**r-1,a=Math.floor(i*2**52),s=2**32,l=n<<31|r+1023<<20|a/s&1048575,o=a%s;this._bufferBuilder.append(203),this.pack_int32(l),this.pack_int32(o)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=a=>{if(a<n.length){const s=n[a];if(e.hasOwnProperty(s)){this.pack(s);const l=this.pack(e[s]);if(l instanceof Promise)return l.then(()=>i(a+1))}return i(a+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new qb,this._textEncoder=new TextEncoder}}let jm=!0,Dm=!0;function Mi(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function hr(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,l){if(s!==e)return i.apply(this,arguments);const o=c=>{const u=n(c);u&&(l.handleEvent?l.handleEvent(u):l(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,o),i.apply(this,[s,o])};const a=r.removeEventListener;r.removeEventListener=function(s,l){if(s!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(l))return a.apply(this,arguments);const o=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[s,o])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function Kb(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(jm=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Jb(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Dm=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Nm(){if(typeof window=="object"){if(jm)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function lf(t,e){Dm&&console.warn(t+" is deprecated, please use "+e+" instead.")}function Qb(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Mi(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Mi(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Mi(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Mi(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Xh(t){return Object.prototype.toString.call(t)==="[object Object]"}function Um(t){return Xh(t)?Object.keys(t).reduce(function(e,n){const r=Xh(t[n]),i=r?Um(t[n]):t[n],a=r&&!Object.keys(i).length;return i===void 0||a?e:Object.assign(e,{[n]:i})},{}):t}function jc(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?jc(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{jc(t,t.get(i),n)})}))}function Zh(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const a=[];return t.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&a.push(s)}),a.forEach(s=>{t.forEach(l=>{l.type===r&&l.trackId===s.id&&jc(t,l,i)})}),i}const Fh=Nm;function Mm(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const o={};return Object.keys(l).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof l[c]=="object"?l[c]:{ideal:l[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const f=function(h,d){return h?h+d.charAt(0).toUpperCase()+d.slice(1):d==="deviceId"?"sourceId":d};if(u.ideal!==void 0){o.optional=o.optional||[];let h={};typeof u.ideal=="number"?(h[f("min",c)]=u.ideal,o.optional.push(h),h={},h[f("max",c)]=u.ideal,o.optional.push(h)):(h[f("",c)]=u.ideal,o.optional.push(h))}u.exact!==void 0&&typeof u.exact!="number"?(o.mandatory=o.mandatory||{},o.mandatory[f("",c)]=u.exact):["min","max"].forEach(h=>{u[h]!==void 0&&(o.mandatory=o.mandatory||{},o.mandatory[f(h,c)]=u[h])})}),l.advanced&&(o.optional=(o.optional||[]).concat(l.advanced)),o},i=function(l,o){if(e.version>=61)return o(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const c=function(u,f,h){f in u&&!(h in u)&&(u[h]=u[f],delete u[f])};l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","googAutoGainControl"),c(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let c=l.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete l.video.facingMode;let f;if(c.exact==="environment"||c.ideal==="environment"?f=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(h=>{h=h.filter(y=>y.kind==="videoinput");let d=h.find(y=>f.some(v=>y.label.toLowerCase().includes(v)));return!d&&h.length&&f.includes("back")&&(d=h[h.length-1]),d&&(l.video.deviceId=c.exact?{exact:d.deviceId}:{ideal:d.deviceId}),l.video=r(l.video),Fh("chrome: "+JSON.stringify(l)),o(l)})}l.video=r(l.video)}return Fh("chrome: "+JSON.stringify(l)),o(l)},a=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(l,o,c){i(l,u=>{n.webkitGetUserMedia(u,o,f=>{c&&c(a(f))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(o){return i(o,c=>l(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(a(u))))}}}function zm(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Bm(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):a={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=a,s.transceiver={receiver:a},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===i.id):a={track:i};const s=new Event("track");s.track=i,s.receiver=a,s.transceiver={receiver:a},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else hr(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Lm(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=i.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,o){let c=i.apply(this,arguments);return c||(c=e(this,l),this._senders.push(c)),c};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){a.apply(this,arguments);const o=this._senders.indexOf(l);o!==-1&&this._senders.splice(o,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(s=>{this._senders.push(e(this,s))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],r.apply(this,[a]),a.getTracks().forEach(s=>{const l=this._senders.find(o=>o.track===s);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function $m(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(s=>s._pc=this),a});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=r.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(s=>Zh(s,a.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(a=>a._pc=this),i}),hr(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(a=>Zh(a,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,a,s;return this.getSenders().forEach(l=>{l.track===r&&(i?s=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(a?s=!0:a=l),l.track===r)),s||i&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Pm(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(s,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const o=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(o)===-1&&this._shimmedLocalStreams[l.id].push(o):this._shimmedLocalStreams[l.id]=[l,o],o};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(c=>{if(this.getSenders().find(f=>f.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const o=this.getSenders().filter(c=>l.indexOf(c)===-1);this._shimmedLocalStreams[s.id]=[s].concat(o)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const o=this._shimmedLocalStreams[l].indexOf(s);o!==-1&&this._shimmedLocalStreams[l].splice(o,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function Hm(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Pm(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(f=>this._reverseStreams[f.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(f=>{if(this.getSenders().find(d=>d.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const f=new t.MediaStream(u.getTracks());this._streams[u.id]=f,this._reverseStreams[f.id]=u,u=f}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(v=>v===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(v=>v.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const y=this._streams[f.id];if(y)y.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const v=new t.MediaStream([u]);this._streams[f.id]=v,this._reverseStreams[v.id]=f,this.addStream(v)}return this.getSenders().find(v=>v.track===u)};function a(c,u){let f=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const d=c._reverseStreams[h],y=c._streams[d.id];f=f.replace(new RegExp(y.id,"g"),d.id)}),new RTCSessionDescription({type:u.type,sdp:f})}function s(c,u){let f=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const d=c._reverseStreams[h],y=c._streams[d.id];f=f.replace(new RegExp(d.id,"g"),y.id)}),new RTCSessionDescription({type:u.type,sdp:f})}["createOffer","createAnswer"].forEach(function(c){const u=t.RTCPeerConnection.prototype[c],f={[c](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[y=>{const v=a(this,y);h[0].apply(null,[v])},y=>{h[1]&&h[1].apply(null,y)},arguments[2]]):u.apply(this,arguments).then(y=>a(this,y))}};t.RTCPeerConnection.prototype[c]=f[c]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=s(this,arguments[0]),l.apply(this,arguments))};const o=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=o.get.apply(this);return c.type===""?c:a(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(d=>{this._streams[d].getTracks().find(v=>u.track===v)&&(h=this._streams[d])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Dc(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function Im(t,e){hr(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Wh=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Im,shimAddTrackRemoveTrack:Hm,shimAddTrackRemoveTrackWithNative:Pm,shimGetSendersWithDtmf:Lm,shimGetUserMedia:Mm,shimMediaStream:zm,shimOnTrack:Bm,shimPeerConnection:Dc,shimSenderReceiverGetStats:$m},Symbol.toStringTag,{value:"Module"}));function qm(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,a,s){lf("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(a,s)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,l,o){l in s&&!(o in s)&&(s[o]=s[l],delete s[l])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),a(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const l=s.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[l])}}}}function Xb(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function Gm(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Nc(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=t.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[a,s,l]=arguments;return r.apply(this,[a||null]).then(o=>{if(e.version<53&&!s)try{o.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;o.forEach((u,f)=>{o.set(f,Object.assign({},u,{type:n[u.type]||u.type}))})}return o}).then(s,l)}}function Vm(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Ym(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),hr(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Km(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){lf("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Jm(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Qm(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(i){const{sender:s}=a,l=s.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r,s.sendEncodings=r,this.setParametersPromises.push(s.setParameters(l).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return a})}function Xm(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Zm(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Fm(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const ed=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Qm,shimCreateAnswer:Fm,shimCreateOffer:Zm,shimGetDisplayMedia:Xb,shimGetParameters:Xm,shimGetUserMedia:qm,shimOnTrack:Gm,shimPeerConnection:Nc,shimRTCDataChannel:Jm,shimReceiverGetStats:Ym,shimRemoveStream:Km,shimSenderGetStats:Vm},Symbol.toStringTag,{value:"Module"}));function Wm(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(a=>{i.includes(a.track)&&this.removeTrack(a)})})}}function ey(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const a=new Event("addstream");a.stream=i,this.dispatchEvent(a)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(a=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(a)>=0)return;r._remoteStreams.push(a);const s=new Event("addstream");s.stream=a,r.dispatchEvent(s)})}),e.apply(r,arguments)}}}function ty(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,a=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(c,u){const f=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[f]);return u?(h.then(c,u),Promise.resolve()):h},e.createAnswer=function(c,u){const f=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[f]);return u?(h.then(c,u),Promise.resolve()):h};let l=function(o,c,u){const f=i.apply(this,[o]);return u?(f.then(c,u),Promise.resolve()):f};e.setLocalDescription=l,l=function(o,c,u){const f=a.apply(this,[o]);return u?(f.then(c,u),Promise.resolve()):f},e.setRemoteDescription=l,l=function(o,c,u){const f=s.apply(this,[o]);return u?(f.then(c,u),Promise.resolve()):f},e.addIceCandidate=l}function ny(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(ry(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,a){e.mediaDevices.getUserMedia(r).then(i,a)}).bind(e))}function ry(t){return t&&t.video!==void 0?Object.assign({},t,{video:Um(t.video)}):t}function iy(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const a=[];for(let s=0;s<r.iceServers.length;s++){let l=r.iceServers[s];l.urls===void 0&&l.url?(lf("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,a.push(l)):a.push(r.iceServers[s])}r.iceServers=a}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function ay(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function sy(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const a=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function ly(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const td=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ly,shimCallbacksAPI:ty,shimConstraints:ry,shimCreateOfferLegacy:sy,shimGetUserMedia:ny,shimLocalStreamsAPI:Wm,shimRTCIceServerUrls:iy,shimRemoteStreamsAPI:ey,shimTrackEventTransceiver:ay},Symbol.toStringTag,{value:"Module"}));var oy={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,a)=>(a>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let a=8;a<r.length;a+=2)switch(r[a]){case"raddr":i.relatedAddress=r[a+1];break;case"rport":i.relatedPort=parseInt(r[a+1],10);break;case"tcptype":i.tcpType=r[a+1];break;case"ufrag":i.ufrag=r[a+1],i.usernameFragment=r[a+1];break;default:i[r[a]]===void 0&&(i[r[a]]=r[a+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const a=n.type;return r.push("typ"),r.push(a),a!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const a=n.substring(n.indexOf(" ")+1).split(";");for(let s=0;s<a.length;s++)i=a[s].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const a=[];Object.keys(n.parameters).forEach(s=>{n.parameters[s]!==void 0?a.push(s+"="+n.parameters[s]):a.push(s)}),r+="a=fmtp:"+i+" "+a.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(a=>{r+="a=rtcp-fb:"+i+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},a=n.indexOf(":",r);return a>-1?(i.attribute=n.substring(r+1,a),i.value=n.substring(a+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(a=>{i+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],a=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&a?{usernameFragment:i.substring(12),password:a.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(n)[0].split(" ");r.profile=a[2];for(let l=3;l<a.length;l++){const o=a[l],c=e.matchPrefix(n,"a=rtpmap:"+o+" ")[0];if(c){const u=e.parseRtpMap(c),f=e.matchPrefix(n,"a=fmtp:"+o+" ");switch(u.parameters=f.length?e.parseFmtp(f[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+o+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(l=>{r.headerExtensions.push(e.parseExtmap(l))});const s=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(l=>{s.forEach(o=>{l.rtcpFeedback.find(u=>u.type===o.type&&u.parameter===o.parameter)||l.rtcpFeedback.push(o)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(s=>{i+=e.writeRtpMap(s),i+=e.writeFmtp(s),i+=e.writeRtcpFb(s)});let a=0;return r.codecs.forEach(s=>{s.maxptime>a&&(a=s.maxptime)}),a>0&&(i+="a=maxptime:"+a+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(s=>{i+=e.writeExtmap(s)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),a=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),o=l.length>0&&l[0].ssrc;let c;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(y=>parseInt(y,10)));u.length>0&&u[0].length>1&&u[0][0]===o&&(c=u[0][1]),i.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let d={ssrc:o,codecPayloadType:parseInt(h.parameters.apt,10)};o&&c&&(d.rtx={ssrc:c}),r.push(d),a&&(d=JSON.parse(JSON.stringify(d)),d.fec={ssrc:o,mechanism:s?"red+ulpfec":"red"},r.push(d))}}),r.length===0&&o&&r.push({ssrc:o});let f=e.matchPrefix(n,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,r.forEach(h=>{h.maxBitrate=f})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const a=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=a.length>0,r.compound=a.length===0;const s=e.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const a=e.matchPrefix(n,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(a.length>0)return r=a[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let a;i.length>0&&(a=parseInt(i[0].substring(19),10)),isNaN(a)&&(a=65536);const s=e.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:r.fmt,maxMessageSize:a};const l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){const o=l[0].substring(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:a}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let a;const s=r!==void 0?r:2;return n?a=n:a=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+a+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let a=0;a<i.length;a++)switch(i[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[a].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(oy);var cy=oy.exports;const Kr=ml(cy),Zb=Rd({__proto__:null,default:Kr},[cy]);function vs(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),a=Kr.parseCandidate(r.candidate);for(const s in a)s in i||Object.defineProperty(i,s,{value:a[s]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,hr(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Uc(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||hr(t,"icecandidate",e=>{if(e.candidate){const n=Kr.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function _s(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const o=Kr.splitSections(l.sdp);return o.shift(),o.some(c=>{const u=Kr.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(l){const o=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(o===null||o.length<2)return-1;const c=parseInt(o[1],10);return c!==c?-1:c},i=function(l){let o=65536;return e.browser==="firefox"&&(e.version<57?l===-1?o=16384:o=2147483637:e.version<60?o=e.version===57?65535:65536:o=2147483637),o},a=function(l,o){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const u=Kr.matchPrefix(l.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substring(19),10):e.browser==="firefox"&&o!==-1&&(c=2147483637),c},s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:o}=this.getConfiguration();o==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const o=r(arguments[0]),c=i(o),u=a(arguments[0],o);let f;c===0&&u===0?f=Number.POSITIVE_INFINITY:c===0||u===0?f=Math.max(c,u):f=Math.min(c,u);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return f}}),this._sctp=h}return s.apply(this,arguments)}}function bs(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const a=r.send;r.send=function(){const l=arguments[0],o=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&o>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return a.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},hr(t,"datachannel",r=>(e(r.channel,r.target),r))}function Mc(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const a=i.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const s=new Event("connectionstatechange",i);a.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function zc(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:a}):i.sdp=a}return n.apply(this,arguments)}}function Ss(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Es(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>n.apply(this,[s]))})}const Fb=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:zc,shimAddIceCandidateNullOrEmpty:Ss,shimConnectionState:Mc,shimMaxMessageSize:_s,shimParameterlessSetLocalDescription:Es,shimRTCIceCandidate:vs,shimRTCIceCandidateRelayProtocol:Uc,shimSendThrowTypeError:bs},Symbol.toStringTag,{value:"Module"}));function Wb({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Nm,r=Qb(t),i={browserDetails:r,commonShim:Fb,extractVersion:Mi,disableLog:Kb,disableWarnings:Jb,sdp:Zb};switch(r.browser){case"chrome":if(!Wh||!Dc||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Wh,Ss(t,r),Es(t),Mm(t,r),zm(t),Dc(t,r),Bm(t),Hm(t,r),Lm(t),$m(t),Im(t,r),vs(t),Uc(t),Mc(t),_s(t,r),bs(t),zc(t,r);break;case"firefox":if(!ed||!Nc||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=ed,Ss(t,r),Es(t),qm(t,r),Nc(t,r),Gm(t),Km(t),Vm(t),Ym(t),Jm(t),Qm(t),Xm(t),Zm(t),Fm(t),vs(t),Mc(t),_s(t,r),bs(t);break;case"safari":if(!td||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=td,Ss(t,r),Es(t),iy(t),sy(t),ty(t),Wm(t),ey(t),ay(t),ny(t),ly(t),vs(t),Uc(t),_s(t,r),bs(t),zc(t,r);break;default:n("Unsupported browser!");break}return i}const nd=Wb({window:typeof window>"u"?void 0:window});function dr(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class uy{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,i=Math.ceil(r/this.chunkedMTU);let a=0,s=0;for(;s<r;){const l=Math.min(r,s+this.chunkedMTU),o=e.slice(s,l),c={__peerData:this._dataCount,n:a,data:o,total:i};n.push(c),s=l,a++}return this._dataCount++,n}}}function eS(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.byteLength;return n}const Oo=nd.default||nd,xi=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Oo.browserDetails.browser}getVersion(){return Oo.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=Oo.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},tS=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),fy=()=>Math.random().toString(36).slice(2),rd={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class nS extends uy{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=rd,this.browser=xi.getBrowser(),this.browserVersion=xi.getVersion(),this.pack=km,this.unpack=xm,this.supports=function(){const n={browser:xi.isBrowserSupported(),webRTC:xi.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(rd),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!xi.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n}(),this.validateId=tS,this.randomToken=fy}}const Ye=new nS,rS="PeerJS: ";class iS{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[rS,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var D=new iS,of={},aS=Object.prototype.hasOwnProperty,$e="~";function pa(){}Object.create&&(pa.prototype=Object.create(null),new pa().__proto__||($e=!1));function sS(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function hy(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var a=new sS(n,r||t,i),s=$e?$e+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function Ts(t,e){--t._eventsCount===0?t._events=new pa:delete t._events[e]}function ze(){this._events=new pa,this._eventsCount=0}ze.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)aS.call(n,r)&&e.push($e?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};ze.prototype.listeners=function(e){var n=$e?$e+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=new Array(a);i<a;i++)s[i]=r[i].fn;return s};ze.prototype.listenerCount=function(e){var n=$e?$e+e:e,r=this._events[n];return r?r.fn?1:r.length:0};ze.prototype.emit=function(e,n,r,i,a,s){var l=$e?$e+e:e;if(!this._events[l])return!1;var o=this._events[l],c=arguments.length,u,f;if(o.fn){switch(o.once&&this.removeListener(e,o.fn,void 0,!0),c){case 1:return o.fn.call(o.context),!0;case 2:return o.fn.call(o.context,n),!0;case 3:return o.fn.call(o.context,n,r),!0;case 4:return o.fn.call(o.context,n,r,i),!0;case 5:return o.fn.call(o.context,n,r,i,a),!0;case 6:return o.fn.call(o.context,n,r,i,a,s),!0}for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];o.fn.apply(o.context,u)}else{var h=o.length,d;for(f=0;f<h;f++)switch(o[f].once&&this.removeListener(e,o[f].fn,void 0,!0),c){case 1:o[f].fn.call(o[f].context);break;case 2:o[f].fn.call(o[f].context,n);break;case 3:o[f].fn.call(o[f].context,n,r);break;case 4:o[f].fn.call(o[f].context,n,r,i);break;default:if(!u)for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];o[f].fn.apply(o[f].context,u)}}return!0};ze.prototype.on=function(e,n,r){return hy(this,e,n,r,!1)};ze.prototype.once=function(e,n,r){return hy(this,e,n,r,!0)};ze.prototype.removeListener=function(e,n,r,i){var a=$e?$e+e:e;if(!this._events[a])return this;if(!n)return Ts(this,a),this;var s=this._events[a];if(s.fn)s.fn===n&&(!i||s.once)&&(!r||s.context===r)&&Ts(this,a);else{for(var l=0,o=[],c=s.length;l<c;l++)(s[l].fn!==n||i&&!s[l].once||r&&s[l].context!==r)&&o.push(s[l]);o.length?this._events[a]=o.length===1?o[0]:o:Ts(this,a)}return this};ze.prototype.removeAllListeners=function(e){var n;return e?(n=$e?$e+e:e,this._events[n]&&Ts(this,n)):(this._events=new pa,this._eventsCount=0),this};ze.prototype.off=ze.prototype.removeListener;ze.prototype.addListener=ze.prototype.on;ze.prefixed=$e;ze.EventEmitter=ze;of=ze;var pr={};dr(pr,"ConnectionType",()=>Rn);dr(pr,"PeerErrorType",()=>me);dr(pr,"BaseConnectionErrorType",()=>Bc);dr(pr,"DataConnectionErrorType",()=>cf);dr(pr,"SerializationType",()=>zl);dr(pr,"SocketEventType",()=>mn);dr(pr,"ServerMessageType",()=>Ue);var Rn=function(t){return t.Data="data",t.Media="media",t}({}),me=function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t}({}),Bc=function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t}({}),cf=function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t}({}),zl=function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t}({}),mn=function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t}({}),Ue=function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t}({});const dy="1.5.5";class lS extends of.EventEmitter{constructor(e,n,r,i,a,s=5e3){super(),this.pingInterval=s,this._disconnected=!0,this._messagesQueue=[];const l=e?"wss://":"ws://";this._baseUrl=l+n+":"+r+i+"peerjs?key="+a}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+dy),this._disconnected=!1,this._socket.onmessage=i=>{let a;try{a=JSON.parse(i.data),D.log("Server message received:",a)}catch{D.log("Invalid server message",i.data);return}this.emit(mn.Message,a)},this._socket.onclose=i=>{this._disconnected||(D.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(mn.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),D.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){D.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Ue.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(mn.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class py{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Rn.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,i={ordered:!!e.reliable},a=n.createDataChannel(r.label,i);r._initializeDataChannel(a),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){D.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,a=this.connection.provider;D.log("Listening for ICE candidates."),e.onicecandidate=s=>{!s.candidate||!s.candidate.candidate||(D.log(`Received ICE candidates for ${n}:`,s.candidate),a.socket.send({type:Ue.Candidate,payload:{candidate:s.candidate,type:i,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":D.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Bc.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":D.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Bc.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":D.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},D.log("Listening for data channel"),e.ondatachannel=s=>{D.log("Received data channel");const l=s.channel;a.getConnection(n,r)._initializeDataChannel(l)},D.log("Listening for remote stream"),e.ontrack=s=>{D.log("Received remote stream");const l=s.streams[0],o=a.getConnection(n,r);if(o.type===Rn.Media){const c=o;this._addStreamToMediaConnection(l,c)}}}cleanup(){D.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);D.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),D.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Rn.Data){const a=this.connection;i={...i,label:a.label,reliable:a.reliable,serialization:a.serialization}}n.socket.send({type:Ue.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(me.WebRTC,i),D.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(me.WebRTC,r),D.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();D.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),D.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Ue.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(me.WebRTC,i),D.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(me.WebRTC,r),D.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;D.log("Setting remote description",n);const a=this;try{await r.setRemoteDescription(n),D.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await a._makeAnswer()}catch(s){i.emitError(me.WebRTC,s),D.log("Failed to setRemoteDescription, ",s)}}async handleCandidate(e){D.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),D.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(me.WebRTC,n),D.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(D.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return D.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){D.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class gy extends of.EventEmitter{emitError(e,n){D.error("Error:",n),this.emit("error",new oS(`${e}`,n))}}class oS extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class my extends gy{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}var tu;const Fi=class Fi extends my{get type(){return Rn.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Fi.ID_PREFIX+Ye.randomToken(),this._negotiator=new py(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{D.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{D.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){D.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case Ue.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Ue.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:D.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){D.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};tu=new WeakMap,Si(Fi,tu,Fi.ID_PREFIX="mc_");let rl=Fi;class cS{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:i,path:a,key:s}=this._options,l=new URL(`${n}://${r}:${i}${a}${s}/${e}`);return l.searchParams.set("ts",`${Date.now()}${Math.random()}`),l.searchParams.set("version",dy),fetch(l.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){D.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==Ye.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===Ye.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw D.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var nu,ru;const Qn=class Qn extends my{get type(){return Rn.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||Qn.ID_PREFIX+fy(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new py(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{D.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{D.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{D.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(cf.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case Ue.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case Ue.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:D.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};nu=new WeakMap,ru=new WeakMap,Si(Qn,nu,Qn.ID_PREFIX="dc_"),Si(Qn,ru,Qn.MAX_BUFFERED_AMOUNT=8388608);let il=Qn;class uf extends il{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>il.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return D.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Ao extends uf{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new uy,this.serialization=zl.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=xm(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=eS(r.data);this._handleDataMessage({data:i})}}_send(e,n){const r=km(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);D.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class uS extends uf{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=zl.None}}class fS extends uf{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=Ye.chunkedMTU){this.emitError(cf.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=zl.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var iu;const Wi=class Wi extends gy{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:uS,json:fS,binary:Ao,"binary-utf8":Ao,default:Ao},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:Ye.CLOUD_HOST,port:Ye.CLOUD_PORT,path:"/",key:Wi.DEFAULT_KEY,token:Ye.randomToken(),config:Ye.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Ye.CLOUD_HOST?this._options.secure=Ye.isSecure():this._options.host==Ye.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&D.setLogFunction(this._options.logFunction),D.logLevel=this._options.debug||0,this._api=new cS(n),this._socket=this._createServerConnection(),!Ye.supports.audioVideo&&!Ye.supports.data){this._delayedAbort(me.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Ye.validateId(r)){this._delayedAbort(me.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(me.ServerError,i))}_createServerConnection(){const e=new lS(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(mn.Message,n=>{this._handleMessage(n)}),e.on(mn.Error,n=>{this._abort(me.SocketError,n)}),e.on(mn.Disconnected,()=>{this.disconnected||(this.emitError(me.Network,"Lost connection to server."),this.disconnect())}),e.on(mn.Close,()=>{this.disconnected||this._abort(me.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,i=e.src;switch(n){case Ue.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ue.Error:this._abort(me.ServerError,r.msg);break;case Ue.IdTaken:this._abort(me.UnavailableID,`ID "${this.id}" is taken`);break;case Ue.InvalidKey:this._abort(me.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Ue.Leave:D.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Ue.Expire:this.emitError(me.PeerUnavailable,`Could not connect to peer ${i}`);break;case Ue.Offer:{const a=r.connectionId;let s=this.getConnection(i,a);if(s&&(s.close(),D.warn(`Offer received for existing Connection ID:${a}`)),r.type===Rn.Media){const o=new rl(i,this,{connectionId:a,_payload:r,metadata:r.metadata});s=o,this._addConnection(i,s),this.emit("call",o)}else if(r.type===Rn.Data){const o=new this._serializers[r.serialization](i,this,{connectionId:a,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});s=o,this._addConnection(i,s),this.emit("connection",o)}else{D.warn(`Received malformed connection type:${r.type}`);return}const l=this._getMessages(a);for(const o of l)s.handleMessage(o);break}default:{if(!r){D.warn(`You received a malformed message from ${i} of type ${n}`);return}const a=r.connectionId,s=this.getConnection(i,a);s&&s.peerConnection?s.handleMessage(e):a?this._storeMessage(a,e):D.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){D.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(me.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){D.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(me.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){D.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new rl(e,this,{...r,_stream:n});return this._addConnection(e,i),i}_addConnection(e,n){D.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){D.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(D.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;D.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)D.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)D.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(me.ServerError,n))}};iu=new WeakMap,Si(Wi,iu,Wi.DEFAULT_KEY="peerjs");let al=Wi;var en=(t=>(t.START="START",t.FINISH="FINISH",t))(en||{}),tn=(t=>(t.JOIN="JOIN",t.ROLE_ASSIGN="ROLE_ASSIGN",t.STATE_CHANGE="STATE_CHANGE",t.TRIGGER="TRIGGER",t.RESET="RESET",t))(tn||{});const yy=R.createContext(null);function hS({children:t}){const e=R.useRef(null),n=R.useRef(null),r=R.useRef([]),i=R.useRef(!1),a=R.useRef(!1),[s,l]=R.useState(""),[o,c]=R.useState(!1),[u,f]=R.useState(!1),[h,d]=R.useState("Disconnected"),[y,v]=R.useState([]),[b,p]=R.useState(null),[g,m]=R.useState([]),_=R.useCallback(()=>Math.floor(1e3+Math.random()*9e3).toString(),[]),w=R.useCallback((O,$)=>{var B,Y;console.log("Received:",O,"from",$),p({...O}),O.type===tn.TRIGGER&&((B=O.payload)!=null&&B.role)&&((Y=O.payload)!=null&&Y.timestamp)&&m(He=>[...He,{role:O.payload.role,timestamp:O.payload.timestamp}])},[]),x=R.useCallback(O=>{const $=n.current;$&&$.send(O)},[]),C=R.useCallback((O,$)=>{$&&(O.on("open",()=>{const B={id:O.peer,conn:O,role:"NONE",name:"Unknown"};r.current=[...r.current,B],v([...r.current])}),O.on("data",B=>{const Y=B;Y.type===tn.JOIN?(r.current=r.current.map(He=>{var Fe;return He.id===O.peer?{...He,...(Fe=Y.payload)!=null&&Fe.name?{name:Y.payload.name}:{}}:He}),v([...r.current])):w(Y,O.peer)}),O.on("close",()=>{r.current=r.current.filter(B=>B.id!==O.peer),v([...r.current]),console.log(`Peer ${O.peer} disconnected`)}),O.on("error",B=>{console.error(`Connection error with peer ${O.peer}:`,B),r.current=r.current.filter(Y=>Y.id!==O.peer),v([...r.current])}))},[w]),T=R.useCallback(async(O,$)=>e.current&&i.current===O&&a.current?(console.log("Peer already initialized, reusing existing connection"),s):(e.current&&(console.log("Destroying existing peer before reinitializing"),e.current.destroy(),e.current=null),i.current=O,c(O),d("Initializing Peer..."),new Promise((B,Y)=>{const He=$||(O?_():void 0),Fe=He?new al(He,{debug:1}):new al({debug:1});Fe.on("open",ce=>{l(ce),f(!0),a.current=!0,d("Online"),console.log("My Peer ID is:",ce),e.current=Fe,B(ce)}),Fe.on("connection",ce=>{C(ce,O)}),Fe.on("disconnected",()=>{if(console.log("Peer disconnected from server"),f(!1),a.current=!1,d("Disconnected"),e.current){console.log("Attempting to reconnect to server...");try{e.current.reconnect()}catch(ce){console.warn("Reconnect failed:",ce)}}}),Fe.on("close",()=>{console.log("Peer connection closed"),f(!1),a.current=!1,d("Connection closed")}),Fe.on("error",ce=>{if(console.error("Peer error",ce),d("Error: "+ce.type),ce.type==="unavailable-id"){const Mn=_();console.log("ID unavailable, trying new ID:",Mn),T(O,Mn).then(B).catch(Y)}else ce.type==="server-error"||ce.type==="network"?setTimeout(()=>{a.current||(console.log("Attempting to reconnect..."),T(O,$).catch(Y))},3e3):Y(ce)})})),[_,C,s]),A=R.useCallback((O,$)=>{if(!e.current)return;d("Connecting to Host...");const B=e.current.connect(O);B.on("open",()=>{d("Connected to Host"),n.current=B,x({type:tn.JOIN,payload:{name:$}}),B.on("data",Y=>{w(Y,B.peer)})}),B.on("close",()=>{d("Disconnected from Host"),n.current=null,setTimeout(()=>{!n.current&&e.current&&(console.log("Attempting to reconnect to host..."),A(O,$))},3e3)}),B.on("error",Y=>{console.error("Connection error",Y),d("Connection Error"),(Y.type==="peer-unavailable"||Y.type==="network")&&setTimeout(()=>{!n.current&&e.current&&(console.log("Attempting to reconnect to host..."),A(O,$))},3e3)})},[w]),M=R.useCallback((O,$)=>{r.current=r.current.map(Y=>Y.id===O?{...Y,role:$}:Y),v([...r.current]);const B=r.current.find(Y=>Y.id===O);B&&B.conn.send({type:tn.ROLE_ASSIGN,payload:{role:$}})},[]),oe=R.useCallback((O,$)=>{r.current.forEach(B=>{B.conn.send({type:tn.STATE_CHANGE,payload:{state:O,raceId:$}})})},[]),he=R.useCallback(()=>{r.current.forEach(O=>{O.conn.send({type:tn.RESET})})},[]),gr=R.useCallback(()=>{he(),m([])},[he]),bi=R.useCallback((O,$,B)=>{const Y=n.current;Y&&Y.send({type:tn.TRIGGER,payload:{role:O,timestamp:$,raceId:B}})},[]),Un=R.useCallback(()=>{m([])},[]),k=R.useCallback(()=>{e.current&&(e.current.destroy(),e.current=null,n.current=null,r.current=[],a.current=!1,f(!1),d("Disconnected"),v([]),m([]))},[]),H={myId:s,isHost:o,isConnected:u,connectionStatus:h,peers:y,latestMessage:b,triggerEvents:g,init:T,connectToHost:A,assignRole:M,broadcastState:oe,sendReset:he,broadcastReset:gr,sendTrigger:bi,clearTriggerEvents:Un,destroy:k};return E.jsx(yy.Provider,{value:H,children:t})}function ff(){const t=R.useContext(yy);if(!t)throw new Error("usePeerService must be used within a PeerProvider");return t}function dS({children:t}){return E.jsx(hS,{children:t})}function pS(){const[t,e]=R.useState(null),[n,r]=R.useState(!1),[i,a]=R.useState(!1);R.useEffect(()=>{(()=>{if(window.navigator.standalone){a(!0);return}if(window.matchMedia("(display-mode: standalone)").matches){a(!0);return}if(window.matchMedia("(display-mode: minimal-ui)").matches){a(!0);return}})();const o=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{r(!1),e(null),a(!0),console.log("PWA was installed")};return window.addEventListener("beforeinstallprompt",o),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",o),window.removeEventListener("appinstalled",c)}},[]);const s=async()=>{if(!t)return;t.prompt();const{outcome:l}=await t.userChoice;console.log(l==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),e(null),r(!1)};return i||!n?null:E.jsx("div",{className:"fixed bottom-4 right-4 z-50 animate-in slide-in-from-bottom-2 duration-300",children:E.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg shadow-lg p-4 max-w-sm",children:[E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("h3",{className:"text-white font-medium mb-1",children:"Install SprintSync"}),E.jsx("p",{className:"text-slate-400 text-sm",children:"Install our app for a better experience with offline support and push notifications."})]}),E.jsx("button",{onClick:()=>r(!1),className:"text-slate-400 hover:text-white transition-colors","aria-label":"Close",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsxs("div",{className:"flex gap-2 mt-3",children:[E.jsx("button",{onClick:s,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded transition-colors",children:"Install"}),E.jsx("button",{onClick:()=>r(!1),className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-medium py-2 px-4 rounded transition-colors",children:"Not now"})]})]})})}var hf={},sl={},Lc=function(t,e){return Lc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Lc(t,e)};function vy(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Lc(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ll=function(){return ll=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ll.apply(this,arguments)};function yi(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function _y(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function by(t,e){return function(n,r){e(n,r,t)}}function Sy(t,e,n,r,i,a){function s(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var l=r.kind,o=l==="getter"?"get":l==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),f,h=!1,d=n.length-1;d>=0;d--){var y={};for(var v in r)y[v]=v==="access"?{}:r[v];for(var v in r.access)y.access[v]=r.access[v];y.addInitializer=function(p){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(p||null))};var b=(0,n[d])(l==="accessor"?{get:u.get,set:u.set}:u[o],y);if(l==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(f=s(b.get))&&(u.get=f),(f=s(b.set))&&(u.set=f),(f=s(b.init))&&i.unshift(f)}else(f=s(b))&&(l==="field"?i.unshift(f):u[o]=f)}c&&Object.defineProperty(c,r.name,u),h=!0}function Ey(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function Ty(t){return typeof t=="symbol"?t:"".concat(t)}function Cy(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function wy(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function j(t,e,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(u){try{c(r.next(u))}catch(f){s(f)}}function o(u){try{c(r.throw(u))}catch(f){s(f)}}function c(u){u.done?a(u.value):i(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})}function Ry(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return o([c,u])}}function o(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Bl=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function Oy(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Bl(e,t,n)}function ol(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function df(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Ay(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(df(arguments[e]));return t}function xy(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,l=a.length;s<l;s++,i++)r[i]=a[s];return r}function ky(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function li(t){return this instanceof li?(this.v=t,this):new li(t)}function jy(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(d){return function(y){return Promise.resolve(y).then(d,f)}}function l(d,y){r[d]&&(i[d]=function(v){return new Promise(function(b,p){a.push([d,v,b,p])>1||o(d,v)})},y&&(i[d]=y(i[d])))}function o(d,y){try{c(r[d](y))}catch(v){h(a[0][3],v)}}function c(d){d.value instanceof li?Promise.resolve(d.value.v).then(u,f):h(a[0][2],d)}function u(d){o("next",d)}function f(d){o("throw",d)}function h(d,y){d(y),a.shift(),a.length&&o(a[0][0],a[0][1])}}function Dy(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=t[i]?function(s){return(n=!n)?{value:li(t[i](s)),done:!1}:a?a(s):s}:a}}function Ny(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ol=="function"?ol(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(s){return new Promise(function(l,o){s=t[a](s),i(l,o,s.done,s.value)})}}function i(a,s,l,o){Promise.resolve(o).then(function(c){a({value:c,done:l})},s)}}function Uy(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var gS=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},$c=function(t){return $c=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},$c(t)};function My(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=$c(t),r=0;r<n.length;r++)n[r]!=="default"&&Bl(e,t,n[r]);return gS(e,t),e}function zy(t){return t&&t.__esModule?t:{default:t}}function By(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Ly(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function $y(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Py(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var mS=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Hy(t){function e(a){t.error=t.hasError?new mS(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(s){return e(s),i()})}else r|=1}catch(s){e(s)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function Iy(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,a,s){return r?e?".jsx":".js":i&&(!a||!s)?n:i+a+"."+s.toLowerCase()+"js"}):t}const yS={__extends:vy,__assign:ll,__rest:yi,__decorate:_y,__param:by,__esDecorate:Sy,__runInitializers:Ey,__propKey:Ty,__setFunctionName:Cy,__metadata:wy,__awaiter:j,__generator:Ry,__createBinding:Bl,__exportStar:Oy,__values:ol,__read:df,__spread:Ay,__spreadArrays:xy,__spreadArray:ky,__await:li,__asyncGenerator:jy,__asyncDelegator:Dy,__asyncValues:Ny,__makeTemplateObject:Uy,__importStar:My,__importDefault:zy,__classPrivateFieldGet:By,__classPrivateFieldSet:Ly,__classPrivateFieldIn:$y,__addDisposableResource:Py,__disposeResources:Hy,__rewriteRelativeImportExtension:Iy},vS=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Py,get __assign(){return ll},__asyncDelegator:Dy,__asyncGenerator:jy,__asyncValues:Ny,__await:li,__awaiter:j,__classPrivateFieldGet:By,__classPrivateFieldIn:$y,__classPrivateFieldSet:Ly,__createBinding:Bl,__decorate:_y,__disposeResources:Hy,__esDecorate:Sy,__exportStar:Oy,__extends:vy,__generator:Ry,__importDefault:zy,__importStar:My,__makeTemplateObject:Uy,__metadata:wy,__param:by,__propKey:Ty,__read:df,__rest:yi,__rewriteRelativeImportExtension:Iy,__runInitializers:Ey,__setFunctionName:Cy,__spread:Ay,__spreadArray:ky,__spreadArrays:xy,__values:ol,default:yS},Symbol.toStringTag,{value:"Module"})),_S=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Ll=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},qy=class extends Ll{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Pc=class extends Ll{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Hc=class extends Ll{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var cl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(cl||(cl={}));class bS{constructor(e,{headers:n={},customFetch:r,region:i=cl.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=_S(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return j(this,arguments,void 0,function*(n,r={}){var i;let a,s;try{const{headers:l,method:o,body:c,signal:u,timeout:f}=r;let h={},{region:d}=r;d||(d=this.region);const y=new URL(`${this.url}/${n}`);d&&d!=="any"&&(h["x-region"]=d,y.searchParams.set("forceFunctionRegion",d));let v;c&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(h["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(h["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;let b=u;f&&(s=new AbortController,a=setTimeout(()=>s.abort(),f),u?(b=s.signal,u.addEventListener("abort",()=>s.abort())):b=s.signal);const p=yield this.fetch(y.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:v,signal:b}).catch(w=>{throw new qy(w)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new Pc(p);if(!p.ok)throw new Hc(p);let m=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return m==="application/json"?_=yield p.json():m==="application/octet-stream"||m==="application/pdf"?_=yield p.blob():m==="text/event-stream"?_=p:m==="multipart/form-data"?_=yield p.formData():_=yield p.text(),{data:_,error:null,response:p}}catch(l){return{data:null,error:l,response:l instanceof Hc||l instanceof Pc?l.context:void 0}}finally{a&&clearTimeout(a)}})}}const SS=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return cl},FunctionsClient:bS,FunctionsError:Ll,FunctionsFetchError:qy,FunctionsHttpError:Hc,FunctionsRelayError:Pc},Symbol.toStringTag,{value:"Module"})),Gy=ya(SS);var Me={};const vi=ya(vS);var Ja={},Qa={},Xa={},Za={},Fa={},Wa={},id;function Vy(){if(id)return Wa;id=1,Object.defineProperty(Wa,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Wa.default=t,Wa}var ad;function Yy(){if(ad)return Fa;ad=1,Object.defineProperty(Fa,"__esModule",{value:!0});const e=vi.__importDefault(Vy());let n=class{constructor(i){var a,s;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(s=i.isMaybeSingle)!==null&&s!==void 0?s:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var c,u,f,h;let d=null,y=null,v=null,b=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const w=await o.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?y=w:y=JSON.parse(w))}const m=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),_=(f=o.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");m&&_&&_.length>1&&(v=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(d={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,b=406,p="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const m=await o.text();try{d=JSON.parse(m),Array.isArray(d)&&o.status===404&&(y=[],d=null,b=200,p="OK")}catch{o.status===404&&m===""?(b=204,p="No Content"):d={message:m}}if(d&&this.isMaybeSingle&&(!((h=d==null?void 0:d.details)===null||h===void 0)&&h.includes("0 rows"))&&(d=null,b=200,p="OK"),d&&this.shouldThrowOnError)throw new e.default(d)}return{error:d,data:y,count:v,status:b,statusText:p}});return this.shouldThrowOnError||(l=l.catch(o=>{var c,u,f,h,d,y;let v="";const b=o==null?void 0:o.cause;if(b){const p=(c=b==null?void 0:b.message)!==null&&c!==void 0?c:"",g=(u=b==null?void 0:b.code)!==null&&u!==void 0?u:"";v=`${(f=o==null?void 0:o.name)!==null&&f!==void 0?f:"FetchError"}: ${o==null?void 0:o.message}`,v+=`

Caused by: ${(h=b==null?void 0:b.name)!==null&&h!==void 0?h:"Error"}: ${p}`,g&&(v+=` (${g})`),b!=null&&b.stack&&(v+=`
${b.stack}`)}else v=(d=o==null?void 0:o.stack)!==null&&d!==void 0?d:"";return{error:{message:`${(y=o==null?void 0:o.name)!==null&&y!==void 0?y:"FetchError"}: ${o==null?void 0:o.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}};return Fa.default=n,Fa}var sd;function Ky(){if(sd)return Za;sd=1,Object.defineProperty(Za,"__esModule",{value:!0});const e=vi.__importDefault(Yy());let n=class extends e.default{select(i){let a=!1;const s=(i??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:s,foreignTable:l,referencedTable:o=l}={}){const c=o?`${o}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:s=a}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,a,{foreignTable:s,referencedTable:l=s}={}){const o=typeof l>"u"?"offset":`${l}.offset`,c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${i}`),this.url.searchParams.set(c,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:s=!1,buffers:l=!1,wal:o=!1,format:c="text"}={}){var u;const f=[i?"analyze":null,a?"verbose":null,s?"settings":null,l?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${h}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return Za.default=n,Za}var ld;function pf(){if(ld)return Xa;ld=1,Object.defineProperty(Xa,"__esModule",{value:!0});const e=vi.__importDefault(Ky()),n=new RegExp("[,()]");let r=class extends e.default{eq(a,s){return this.url.searchParams.append(a,`eq.${s}`),this}neq(a,s){return this.url.searchParams.append(a,`neq.${s}`),this}gt(a,s){return this.url.searchParams.append(a,`gt.${s}`),this}gte(a,s){return this.url.searchParams.append(a,`gte.${s}`),this}lt(a,s){return this.url.searchParams.append(a,`lt.${s}`),this}lte(a,s){return this.url.searchParams.append(a,`lte.${s}`),this}like(a,s){return this.url.searchParams.append(a,`like.${s}`),this}likeAllOf(a,s){return this.url.searchParams.append(a,`like(all).{${s.join(",")}}`),this}likeAnyOf(a,s){return this.url.searchParams.append(a,`like(any).{${s.join(",")}}`),this}ilike(a,s){return this.url.searchParams.append(a,`ilike.${s}`),this}ilikeAllOf(a,s){return this.url.searchParams.append(a,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(a,s){return this.url.searchParams.append(a,`ilike(any).{${s.join(",")}}`),this}regexMatch(a,s){return this.url.searchParams.append(a,`match.${s}`),this}regexIMatch(a,s){return this.url.searchParams.append(a,`imatch.${s}`),this}is(a,s){return this.url.searchParams.append(a,`is.${s}`),this}isDistinct(a,s){return this.url.searchParams.append(a,`isdistinct.${s}`),this}in(a,s){const l=Array.from(new Set(s)).map(o=>typeof o=="string"&&n.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cs.{${s.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(s)}`),this}containedBy(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cd.{${s.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(s)}`),this}rangeGt(a,s){return this.url.searchParams.append(a,`sr.${s}`),this}rangeGte(a,s){return this.url.searchParams.append(a,`nxl.${s}`),this}rangeLt(a,s){return this.url.searchParams.append(a,`sl.${s}`),this}rangeLte(a,s){return this.url.searchParams.append(a,`nxr.${s}`),this}rangeAdjacent(a,s){return this.url.searchParams.append(a,`adj.${s}`),this}overlaps(a,s){return typeof s=="string"?this.url.searchParams.append(a,`ov.${s}`):this.url.searchParams.append(a,`ov.{${s.join(",")}}`),this}textSearch(a,s,{config:l,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const u=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${c}fts${u}.${s}`),this}match(a){return Object.entries(a).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(a,s,l){return this.url.searchParams.append(a,`not.${s}.${l}`),this}or(a,{foreignTable:s,referencedTable:l=s}={}){const o=l?`${l}.or`:"or";return this.url.searchParams.append(o,`(${a})`),this}filter(a,s,l){return this.url.searchParams.append(a,`${s}.${l}`),this}};return Xa.default=r,Xa}var od;function Jy(){if(od)return Qa;od=1,Object.defineProperty(Qa,"__esModule",{value:!0});const e=vi.__importDefault(pf());let n=class{constructor(i,{headers:a={},schema:s,fetch:l}){this.url=i,this.headers=new Headers(a),this.schema=s,this.fetch=l}select(i,a){const{head:s=!1,count:l}=a??{},o=s?"HEAD":"GET";let c=!1;const u=(i??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",u),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:s=!0}={}){var l;const o="POST";if(a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:s=!1,count:l,defaultToNull:o=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(f.length>0){const h=[...new Set(f)].map(d=>`"${d}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:a}={}){var s;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var a;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};return Qa.default=n,Qa}var cd;function ES(){if(cd)return Ja;cd=1,Object.defineProperty(Ja,"__esModule",{value:!0});const t=vi,e=t.__importDefault(Jy()),n=t.__importDefault(pf());let r=class Qy{constructor(a,{headers:s={},schema:l,fetch:o}={}){this.url=a,this.headers=new Headers(s),this.schemaName=l,this.fetch=o}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const s=new URL(`${this.url}/${a}`);return new e.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new Qy(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,s={},{head:l=!1,get:o=!1,count:c}={}){var u;let f;const h=new URL(`${this.url}/rpc/${a}`);let d;l||o?(f=l?"HEAD":"GET",Object.entries(s).filter(([v,b])=>b!==void 0).map(([v,b])=>[v,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([v,b])=>{h.searchParams.append(v,b)})):(f="POST",d=s);const y=new Headers(this.headers);return c&&y.set("Prefer",`count=${c}`),new n.default({method:f,url:h,headers:y,schema:this.schemaName,body:d,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};return Ja.default=r,Ja}Object.defineProperty(Me,"__esModule",{value:!0});Me.PostgrestError=Me.PostgrestBuilder=Me.PostgrestTransformBuilder=Me.PostgrestFilterBuilder=Me.PostgrestQueryBuilder=Me.PostgrestClient=void 0;const _i=vi,Xy=_i.__importDefault(ES());Me.PostgrestClient=Xy.default;const Zy=_i.__importDefault(Jy());Me.PostgrestQueryBuilder=Zy.default;const Fy=_i.__importDefault(pf());Me.PostgrestFilterBuilder=Fy.default;const Wy=_i.__importDefault(Ky());Me.PostgrestTransformBuilder=Wy.default;const e0=_i.__importDefault(Yy());Me.PostgrestBuilder=e0.default;const t0=_i.__importDefault(Vy());Me.PostgrestError=t0.default;Me.default={PostgrestClient:Xy.default,PostgrestQueryBuilder:Zy.default,PostgrestFilterBuilder:Fy.default,PostgrestTransformBuilder:Wy.default,PostgrestBuilder:e0.default,PostgrestError:t0.default};class n0{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const TS="2.86.2",CS=`realtime-js/${TS}`,r0="1.0.0",wS="2.0.0",ud=r0,Ic=1e4,RS=1e3,OS=100;var Kn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Kn||(Kn={}));var ge;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ge||(ge={}));var Ct;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ct||(Ct={}));var qc;(function(t){t.websocket="websocket"})(qc||(qc={}));var Jn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Jn||(Jn={}));class AS{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(e,n,r){var i,a;const s=e.topic,l=(i=e.ref)!==null&&i!==void 0?i:"",o=(a=e.join_ref)!==null&&a!==void 0?a:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(u).length===0?"":JSON.stringify(u);if(o.length>255)throw new Error(`joinRef length ${o.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+l.length+s.length+c.length+f.length,d=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(d),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,o.length),y.setUint8(v++,l.length),y.setUint8(v++,s.length),y.setUint8(v++,c.length),y.setUint8(v++,f.length),y.setUint8(v++,n),Array.from(o,p=>y.setUint8(v++,p.charCodeAt(0))),Array.from(l,p=>y.setUint8(v++,p.charCodeAt(0))),Array.from(s,p=>y.setUint8(v++,p.charCodeAt(0))),Array.from(c,p=>y.setUint8(v++,p.charCodeAt(0))),Array.from(f,p=>y.setUint8(v++,p.charCodeAt(0)));var b=new Uint8Array(d.byteLength+r.byteLength);return b.set(new Uint8Array(d),0),b.set(new Uint8Array(r),d.byteLength),b.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,a,s,l,o]=r;return n({join_ref:i,ref:a,topic:s,event:l,payload:o})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),a=n.getUint8(2),s=n.getUint8(3),l=n.getUint8(4);let o=this.HEADER_LENGTH+4;const c=r.decode(e.slice(o,o+i));o=o+i;const u=r.decode(e.slice(o,o+a));o=o+a;const f=r.decode(e.slice(o,o+s));o=o+s;const h=e.slice(o,e.byteLength),d=l===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,y={type:this.BROADCAST_EVENT,event:u,payload:d};return s>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class i0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ee;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ee||(ee={}));const fd=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,s)=>(a[s]=xS(s,t,e,i),a),{}):{}},xS=(t,e,n,r)=>{const i=e.find(l=>l.name===t),a=i==null?void 0:i.type,s=n[t];return a&&!r.includes(a)?a0(a,s):Gc(s)},a0=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return NS(e,n)}switch(t){case ee.bool:return kS(e);case ee.float4:case ee.float8:case ee.int2:case ee.int4:case ee.int8:case ee.numeric:case ee.oid:return jS(e);case ee.json:case ee.jsonb:return DS(e);case ee.timestamp:return US(e);case ee.abstime:case ee.date:case ee.daterange:case ee.int4range:case ee.int8range:case ee.money:case ee.reltime:case ee.text:case ee.time:case ee.timestamptz:case ee.timetz:case ee.tsrange:case ee.tstzrange:return Gc(e);default:return Gc(e)}},Gc=t=>t,kS=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},jS=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},DS=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},NS=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const s=t.slice(1,n);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(l=>a0(e,l))}return t},US=t=>typeof t=="string"?t.replace(" ","T"):t,s0=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class xo{constructor(e,n,r={},i=Ic){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Vc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Vc||(Vc={}));let l0=class Cs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Cs.syncState(this.state,i,a,s),this.pendingDiffs.forEach(o=>{this.state=Cs.syncDiff(this.state,o,a,s)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Cs.syncDiff(this.state,i,a,s),l())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const a=this.cloneDeep(e),s=this.transformState(n),l={},o={};return this.map(a,(c,u)=>{s[c]||(o[c]=u)}),this.map(s,(c,u)=>{const f=a[c];if(f){const h=u.map(b=>b.presence_ref),d=f.map(b=>b.presence_ref),y=u.filter(b=>d.indexOf(b.presence_ref)<0),v=f.filter(b=>h.indexOf(b.presence_ref)<0);y.length>0&&(l[c]=y),v.length>0&&(o[c]=v)}else l[c]=u}),this.syncDiff(a,{joins:l,leaves:o},r,i)}static syncDiff(e,n,r,i){const{joins:a,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(l,o)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(o),u.length>0){const f=e[l].map(d=>d.presence_ref),h=u.filter(d=>f.indexOf(d.presence_ref)<0);e[l].unshift(...h)}r(l,u,o)}),this.map(s,(l,o)=>{let c=e[l];if(!c)return;const u=o.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[l]=c,i(l,c,o),c.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Yc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Yc||(Yc={}));var Jr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Jr||(Jr={}));var Rt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Rt||(Rt={}));const MS=ge;let o0=class c0{constructor(e,n={config:{}},r){var i,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new xo(this,Ct.join,this.params,this.timeout),this.rejoinTimer=new i0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ge.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ct.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new l0(this),this.broadcastEndpointURL=s0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ge.closed){const{config:{broadcast:s,presence:l,private:o}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Jr.PRESENCE]&&this.bindings[Jr.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},h={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(d=>e==null?void 0:e(Rt.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Rt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var y;if(this.socket.setAuth(),d===void 0){e==null||e(Rt.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,p=[];for(let g=0;g<b;g++){const m=v[g],{filter:{event:_,schema:w,table:x,filter:C}}=m,T=d&&d[g];if(T&&T.event===_&&T.schema===w&&T.table===x&&T.filter===C)p.push(Object.assign(Object.assign({},m),{id:T.id}));else{this.unsubscribe(),this.state=ge.errored,e==null||e(Rt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Rt.SUBSCRIBED);return}}).receive("error",d=>{this.state=ge.errored,e==null||e(Rt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Rt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ge.joined&&e===Jr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let o=l.statusText;try{const c=await l.json();o=c.error||c.message||o}catch{}return Promise.reject(new Error(o))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,l,o;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((o=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ge.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ct.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new xo(this,Ct.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ge.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),s}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new xo(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>OS){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,a;const s=e.toLocaleLowerCase(),{close:l,error:o,leave:c,join:u}=Ct;if(r&&[l,o,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(d=>{var y,v,b;return((y=d.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(v=d.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===s}).map(d=>d.callback(h,r)):(a=this.bindings[s])===null||a===void 0||a.filter(d=>{var y,v,b,p,g,m;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in d){const _=d.id,w=(y=d.filter)===null||y===void 0?void 0:y.event;return _&&((v=n.ids)===null||v===void 0?void 0:v.includes(_))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(g=(p=d==null?void 0:d.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return _==="*"||_===((m=n==null?void 0:n.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return d.type.toLocaleLowerCase()===s}).map(d=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:v,table:b,commit_timestamp:p,type:g,errors:m}=y;h=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:p,eventType:g,new:{},old:{},errors:m}),this._getPayloadRecords(y))}d.callback(h,r)})}_isClosed(){return this.state===ge.closed}_isJoined(){return this.state===ge.joined}_isJoining(){return this.state===ge.joining}_isLeaving(){return this.state===ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&c0.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ct.close,{},e)}_onError(e){this._on(Ct.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=fd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=fd(e.columns,e.old_record)),n}};const ko=()=>{},es={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zS=[1e3,2e3,5e3,1e4],BS=1e4,LS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let $S=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ic,this.transport=null,this.heartbeatIntervalMs=es.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ko,this.ref=0,this.reconnectTimer=null,this.vsn=ud,this.logger=ko,this.conn=null,this.sendBuffer=[],this.serializer=new AS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${qc.websocket}`,this.httpEndpoint=s0(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=n0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Kn.connecting:return Jn.Connecting;case Kn.open:return Jn.Open;case Kn.closing:return Jn.Closing;default:return Jn.Closed}}isConnected(){return this.connectionState()===Jn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new o0(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:i,ref:a}=e,s=()=>{this.encode(e,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(RS,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},es.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:s}=n,l=s?`(${s})`:"",o=a.status||"";this.log("receive",`${o} ${r} ${i} ${l}`.trim(),a),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,a,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Kn.open||this.conn.readyState===Kn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ct.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([LS],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:CS};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Ct.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new i0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},es.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,a,s,l,o,c,u,f,h,d;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Ic,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:es.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=e==null?void 0:e.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:ko,this.vsn=(o=e==null?void 0:e.vsn)!==null&&o!==void 0?o:ud,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:y=>zS[y-1]||BS,this.vsn){case r0:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(y,v)=>v(JSON.stringify(y)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:(y,v)=>v(JSON.parse(y));break;case wS:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const PS=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:MS,get REALTIME_LISTEN_TYPES(){return Jr},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Yc},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Vc},get REALTIME_SUBSCRIBE_STATES(){return Rt},RealtimeChannel:o0,RealtimeClient:$S,RealtimePresence:l0,WebSocketFactory:n0},Symbol.toStringTag,{value:"Module"})),u0=ya(PS);class ka extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function le(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class f0 extends ka{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ul extends ka{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const gf=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),HS=()=>Response,Kc=t=>{if(Array.isArray(t))return t.map(n=>Kc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Kc(r)}),e},IS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},qS=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),jo=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},GS=(t,e,n)=>j(void 0,void 0,void 0,function*(){const r=yield HS();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const a=t.status||500,s=(i==null?void 0:i.statusCode)||a+"";e(new f0(jo(i),a,s))}).catch(i=>{e(new ul(jo(i),i))}):e(new ul(jo(t),t))}),VS=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(IS(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function ja(t,e,n,r,i,a){return j(this,void 0,void 0,function*(){return new Promise((s,l)=>{t(n,VS(e,r,i,a)).then(o=>{if(!o.ok)throw o;return r!=null&&r.noResolveJson?o:o.json()}).then(o=>s(o)).catch(o=>GS(o,l,r))})})}function ga(t,e,n,r){return j(this,void 0,void 0,function*(){return ja(t,"GET",e,n,r)})}function Et(t,e,n,r,i){return j(this,void 0,void 0,function*(){return ja(t,"POST",e,r,i,n)})}function Jc(t,e,n,r,i){return j(this,void 0,void 0,function*(){return ja(t,"PUT",e,r,i,n)})}function YS(t,e,n,r){return j(this,void 0,void 0,function*(){return ja(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function mf(t,e,n,r,i){return j(this,void 0,void 0,function*(){return ja(t,"DELETE",e,r,i,n)})}class KS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return j(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(le(e))return{data:null,error:e};throw e}})}}var h0;class JS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[h0]="BlobDownloadBuilder",this.promise=null}asStream(){return new KS(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return j(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(le(e))return{data:null,error:e};throw e}})}}h0=Symbol.toStringTag;const QS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class XS{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=gf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return j(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},hd),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const o=s.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),o&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(o))):(a=r,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,o&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(o))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),f=yield(e=="PUT"?Jc:Et)(this.fetch,`${this.url}/object/${u}`,a,Object.assign({headers:l},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(le(a))return{data:null,error:a};throw a}})}upload(e,n,r){return j(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return j(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",n);try{let o;const c=Object.assign({upsert:hd.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",c.cacheControl)):(o=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield Jc(this.fetch,l.toString(),o,{headers:u});return{data:{path:a,fullPath:f.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(le(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,n){return j(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield Et(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+a.url),l=s.searchParams.get("token");if(!l)throw new ka("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}update(e,n,r){return j(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return j(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(le(i))return{data:null,error:i};throw i}})}copy(e,n,r){return j(this,void 0,void 0,function*(){try{return{data:{path:(yield Et(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(le(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return j(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Et(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(le(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return j(this,void 0,void 0,function*(){try{const i=yield Et(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(le(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=a?`?${a}`:"",l=this._getFinalPath(e),o=()=>ga(this.fetch,`${this.url}/${i}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new JS(o,this.shouldThrowOnError)}info(e){return j(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ga(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Kc(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}exists(e){return j(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield YS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r)&&r instanceof ul){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&i.push(o);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return j(this,void 0,void 0,function*(){try{return{data:yield mf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}list(e,n,r){return j(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},QS),n),{prefix:e||""});return{data:yield Et(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(le(i))return{data:null,error:i};throw i}})}listV2(e,n){return j(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Et(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const d0="2.86.2",p0={"X-Client-Info":`storage-js/${d0}`};class ZS{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},p0),n),this.fetch=gf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return j(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield ga(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}getBucket(e){return j(this,void 0,void 0,function*(){try{return{data:yield ga(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}createBucket(e){return j(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Et(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(le(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return j(this,void 0,void 0,function*(){try{return{data:yield Jc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}emptyBucket(e){return j(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}deleteBucket(e){return j(this,void 0,void 0,function*(){try{return{data:yield mf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var ma=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function FS(t,e,n){const r=new URL(e,t);if(n)for(const[i,a]of Object.entries(n))a!==void 0&&r.searchParams.set(i,a);return r.toString()}async function WS(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function eE(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:a,headers:s}){const l=FS(t.baseUrl,r,i),o=await WS(t.auth),c=await e(l,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...o,...s},body:a?JSON.stringify(a):void 0}),u=await c.text(),f=(c.headers.get("content-type")||"").includes("application/json"),h=f&&u?JSON.parse(u):u;if(!c.ok){const d=f?h:void 0,y=d==null?void 0:d.error;throw new ma((y==null?void 0:y.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:d})}return{status:c.status,headers:c.headers,data:h}}}}function ts(t){return t.join("")}var tE=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ts(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ts(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ts(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ts(t.namespace)}`}),!0}catch(e){if(e instanceof ma&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof ma&&n.status===409)return;throw n}}};function _r(t){return t.join("")}var nE=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_r(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_r(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_r(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_r(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_r(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_r(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof ma&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof ma&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},rE=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=eE({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new tE(this.client,e),this.tableOps=new nE(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class g0{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},p0),n),this.fetch=gf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return j(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}listBuckets(e){return j(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield ga(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}deleteBucket(e){return j(this,void 0,void 0,function*(){try{return{data:yield mf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}from(e){if(!qS(e))throw new ka("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new rE({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>j(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const yf={"X-Client-Info":`storage-js/${d0}`,"Content-Type":"application/json"};class vf extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Je(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class ws extends vf{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class m0 extends vf{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var Qc;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Qc||(Qc={}));const $l=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),iE=()=>Response,y0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},aE=t=>Array.from(new Float32Array(t)),sE=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},dd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lE=(t,e,n)=>j(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,a=t;if(typeof a.json=="function")a.json().then(s=>{const l=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||i+"";e(new ws(dd(s),i,l))}).catch(()=>{const s=i+"",l=a.statusText||`HTTP ${i} error`;e(new ws(l,i,s))});else{const s=i+"",l=a.statusText||`HTTP ${i} error`;e(new ws(l,i,s))}}else e(new m0(dd(t),t))}),oE=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(y0(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function cE(t,e,n,r,i,a){return j(this,void 0,void 0,function*(){return new Promise((s,l)=>{t(n,oE(e,r,i,a)).then(o=>{if(!o.ok)throw o;if(r!=null&&r.noResolveJson)return o;const c=o.headers.get("content-type");return!c||!c.includes("application/json")?{}:o.json()}).then(o=>s(o)).catch(o=>lE(o,l,r))})})}function nt(t,e,n,r,i){return j(this,void 0,void 0,function*(){return cE(t,"POST",e,r,i,n)})}class v0{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yf),n),this.fetch=$l(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return j(this,void 0,void 0,function*(){try{return{data:(yield nt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}getIndex(e,n){return j(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}listIndexes(e){return j(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return j(this,void 0,void 0,function*(){try{return{data:(yield nt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}}class _0{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yf),n),this.fetch=$l(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return j(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield nt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}getVectors(e){return j(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}listVectors(e){return j(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield nt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}queryVectors(e){return j(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}deleteVectors(e){return j(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield nt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}}class b0{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yf),n),this.fetch=$l(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return j(this,void 0,void 0,function*(){try{return{data:(yield nt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}getBucket(e){return j(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}listBuckets(){return j(this,arguments,void 0,function*(e={}){try{return{data:yield nt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}deleteBucket(e){return j(this,void 0,void 0,function*(){try{return{data:(yield nt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}}class S0 extends b0{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new E0(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return j(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return j(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return j(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return j(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class E0 extends v0{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return j(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return j(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return j(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return j(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new T0(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class T0 extends _0{constructor(e,n,r,i,a){super(e,n,a),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return j(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return j(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return j(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return j(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return j(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class uE extends ZS{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new XS(this.url,this.headers,e,this.fetch)}get vectors(){return new S0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new g0(this.url+"/iceberg",this.headers,this.fetch)}}const fE=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:g0,StorageApiError:f0,StorageClient:uE,StorageError:ka,StorageUnknownError:ul,StorageVectorsApiError:ws,StorageVectorsClient:S0,StorageVectorsError:vf,get StorageVectorsErrorCode(){return Qc},StorageVectorsUnknownError:m0,VectorBucketApi:b0,VectorBucketScope:E0,VectorDataApi:_0,VectorIndexApi:v0,VectorIndexScope:T0,isPlainObject:y0,isStorageError:le,isStorageVectorsError:Je,normalizeToFloat32:aE,resolveFetch:$l,resolveResponse:iE,validateVectorDimension:sE},Symbol.toStringTag,{value:"Module"})),hE=ya(fE);var C0={},Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.version=void 0;Pl.version="2.86.2";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=Pl;let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(C0);var w0={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=i=>i?(...a)=>i(...a):(...a)=>fetch(...a);t.resolveFetch=e;const n=()=>Headers;t.resolveHeadersConstructor=n;const r=(i,a,s)=>{const l=(0,t.resolveFetch)(s),o=(0,t.resolveHeadersConstructor)();return async(c,u)=>{var f;const h=(f=await a())!==null&&f!==void 0?f:i;let d=new o(u==null?void 0:u.headers);return d.has("apikey")||d.set("apikey",i),d.has("Authorization")||d.set("Authorization",`Bearer ${h}`),l(c,Object.assign(Object.assign({},u),{headers:d}))}};t.fetchWithAuth=r})(w0);var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.isBrowser=void 0;Nn.uuid=dE;Nn.ensureTrailingSlash=R0;Nn.applySettingDefaults=gE;Nn.validateSupabaseUrl=mE;function dE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t=="x"?e:e&3|8;return n.toString(16)})}function R0(t){return t.endsWith("/")?t:t+"/"}const pE=()=>typeof window<"u";Nn.isBrowser=pE;function gE(t,e){var n,r;const{db:i,auth:a,realtime:s,global:l}=t,{db:o,auth:c,realtime:u,global:f}=e,h={db:Object.assign(Object.assign({},o),i),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function mE(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(R0(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Hl={};const O0="2.86.2",Rr=30*1e3,Xc=3,Do=Xc*Rr,yE="http://localhost:9999",vE="supabase.auth.token",_E={"X-Client-Info":`gotrue-js/${O0}`},Zc="X-Supabase-Api-Version",A0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,SE=10*60*1e3;let oi=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function N(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let x0=class extends oi{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function k0(t){return N(t)&&t.name==="AuthApiError"}let cn=class extends oi{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},Ft=class extends oi{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}},Ge=class extends Ft{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function j0(t){return N(t)&&t.name==="AuthSessionMissingError"}let Gn=class extends Ft{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},zi=class extends Ft{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Bi=class extends Ft{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function D0(t){return N(t)&&t.name==="AuthImplicitGrantRedirectError"}let Fc=class extends Ft{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},fl=class extends Ft{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function Rs(t){return N(t)&&t.name==="AuthRetryableFetchError"}let Wc=class extends Ft{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function EE(t){return N(t)&&t.name==="AuthWeakPasswordError"}let hl=class extends Ft{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const dl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pd=` 	
\r=`.split(""),TE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<pd.length;e+=1)t[pd[e].charCodeAt(0)]=-2;for(let e=0;e<dl.length;e+=1)t[dl[e].charCodeAt(0)]=e;return t})();function gd(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(dl[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(dl[r]),e.queuedBits-=6}}function N0(t,e,n){const r=TE[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function md(t){const e=[],n=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{RE(s,r,n)};for(let s=0;s<t.length;s+=1)N0(t.charCodeAt(s),i,a);return e.join("")}function CE(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function wE(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}CE(r,e)}}function RE(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Qr(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)N0(t.charCodeAt(i),n,r);return new Uint8Array(e)}function OE(t){const e=[];return wE(t,n=>e.push(n)),new Uint8Array(e)}function Xn(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>gd(i,n,r)),gd(null,n,r),e.join("")}function AE(t){return Math.round(Date.now()/1e3)+t}function xE(){return Symbol("auth-callback")}const Ae=()=>typeof window<"u"&&typeof document<"u",Bn={tested:!1,writable:!1},U0=()=>{if(!Ae())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bn.tested)return Bn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Bn.tested=!0,Bn.writable=!0}catch{Bn.tested=!0,Bn.writable=!1}return Bn.writable};function kE(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const M0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),jE=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Or=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ln=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Oe=async(t,e)=>{await t.removeItem(e)};class Il{constructor(){this.promise=new Il.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Il.promiseConstructor=Promise;function No(t){const e=t.split(".");if(e.length!==3)throw new hl("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!bE.test(e[r]))throw new hl("JWT not in base64url format");return{header:JSON.parse(md(e[0])),payload:JSON.parse(md(e[1])),signature:Qr(e[2]),raw:{header:e[0],payload:e[1]}}}async function DE(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function NE(t,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await t(a);if(!e(a,null,s)){r(s);return}}catch(s){if(!e(a,s)){i(s);return}}})()})}function UE(t){return("0"+t.toString(16)).substr(-2)}function ME(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,UE).join("")}async function zE(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function BE(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await zE(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function br(t,e,n=!1){const r=ME();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Or(t,`${e}-code-verifier`,i);const a=await BE(r);return[a,r===a?"plain":"s256"]}const LE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $E(t){const e=t.headers.get(Zc);if(!e||!e.match(LE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function PE(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function HE(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const IE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sr(t){if(!IE.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uo(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qE(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function yd(t){return JSON.parse(JSON.stringify(t))}const Vn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),GE=[502,503,504];async function vd(t){var e;if(!jE(t))throw new fl(Vn(t),0);if(GE.includes(t.status))throw new fl(Vn(t),t.status);let n;try{n=await t.json()}catch(a){throw new cn(Vn(a),a)}let r;const i=$E(t);if(i&&i.getTime()>=A0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Wc(Vn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ge}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new Wc(Vn(n),t.status,n.weak_password.reasons);throw new x0(Vn(n),t.status||500,r)}const VE=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function U(t,e,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[Zc]||(a[Zc]=A0["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const s=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",o=await YE(t,e,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(o):{data:Object.assign({},o),error:null}}async function YE(t,e,n,r,i,a){const s=VE(e,r,i,a);let l;try{l=await t(n,Object.assign({},s))}catch(o){throw console.error(o),new fl(Vn(o),0)}if(l.ok||await vd(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(o){await vd(o)}}function St(t){var e;let n=null;QE(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=AE(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function _d(t){const e=St(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function un(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function KE(t){return{data:t,error:null}}function JE(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=t,s=yi(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},o=Object.assign({},s);return{data:{properties:l,user:o},error:null}}function bd(t){return t}function QE(t){return t.access_token&&t.refresh_token&&t.expires_in}const Os=["global","local","others"];let _f=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=M0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Os[0]){if(Os.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Os.join(", ")}`);try{return await U(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(N(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await U(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:un})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=yi(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await U(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:JE,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(N(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await U(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:un})}catch(n){if(N(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,a,s,l,o;try{const c={nextPage:null,lastPage:0,total:0},u=await U(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:bd});if(u.error)throw u.error;const f=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,d=(o=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return d.length>0&&(d.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(N(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Sr(e);try{return await U(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:un})}catch(n){if(N(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Sr(e);try{return await U(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:un})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Sr(e);try{return await U(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:un})}catch(r){if(N(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Sr(e.userId);try{const{data:n,error:r}=await U(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(N(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Sr(e.userId),Sr(e.id);try{return{data:await U(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,a,s,l,o;try{const c={nextPage:null,lastPage:0,total:0},u=await U(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:bd});if(u.error)throw u.error;const f=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,d=(o=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return d.length>0&&(d.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(N(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await U(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await U(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await U(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(N(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await U(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await U(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(N(n))return{data:null,error:n};throw n}}};function Sd(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Yn={debug:!!(globalThis&&U0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let z0=class extends bf{};class XE extends bf{}async function B0(t,e,n){Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new z0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Yn.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const Ed={};async function ZE(t,e,n){var r;const i=(r=Ed[t])!==null&&r!==void 0?r:Promise.resolve(),a=Promise.race([i.catch(()=>null),e>=0?new Promise((s,l)=>{setTimeout(()=>{l(new XE(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(s=>s)).catch(s=>{if(s&&s.isAcquireTimeout)throw s;return null}).then(async()=>await n());return Ed[t]=a.catch(async s=>{if(s&&s.isAcquireTimeout)return await i,null;throw s}),await a}function FE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function L0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function WE(t){return parseInt(t,16)}function eT(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function tT(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:l,requestId:o,resources:c,scheme:u,uri:f,version:h}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const d=L0(t.address),y=u?`${u}://${r}`:r,v=t.statement?`${t.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${d}

${v}`;let p=`URI: ${f}
Version: ${h}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(p+=`
Expiration Time: ${i.toISOString()}`),l&&(p+=`
Not Before: ${l.toISOString()}`),o&&(p+=`
Request ID: ${o}`),c){let g=`
Resources:`;for(const m of c){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);g+=`
- ${m}`}p+=g}return`${b}
${p}`}class ye extends Error{constructor({message:e,code:n,cause:r,name:i}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class pl extends ye{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function nT({error:t,options:e}){var n,r,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ye({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ye({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ye({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ye({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ye({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ye({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ye({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ye({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if($0(s)){if(a.rp.id!==s)return new ye({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ye({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function rT({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ye({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ye({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if($0(r)){if(n.rpId!==r)return new ye({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class iT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const aT=new iT;function sT(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=yi(t,["challenge","user","excludeCredentials"]),a=Qr(e).buffer,s=Object.assign(Object.assign({},n),{id:Qr(n.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:a,user:s});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const c=r[o];l.excludeCredentials[o]=Object.assign(Object.assign({},c),{id:Qr(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return l}function lT(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=yi(t,["challenge","allowCredentials"]),i=Qr(e).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const l=n[s];a.allowCredentials[s]=Object.assign(Object.assign({},l),{id:Qr(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function oT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Xn(new Uint8Array(t.response.attestationObject)),clientDataJSON:Xn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function cT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Xn(new Uint8Array(i.authenticatorData)),clientDataJSON:Xn(new Uint8Array(i.clientDataJSON)),signature:Xn(new Uint8Array(i.signature)),userHandle:i.userHandle?Xn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $0(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Td(){var t,e;return!!(Ae()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function uT(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pl("Browser returned unexpected credential type",e)}:{data:null,error:new pl("Empty credential response",e)}}catch(e){return{data:null,error:nT({error:e,options:t})}}}async function fT(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pl("Browser returned unexpected credential type",e)}:{data:null,error:new pl("Empty credential response",e)}}catch(e){return{data:null,error:rT({error:e,options:t})}}}const hT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},dT={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function gl(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))r[a]=s;else if(n(s))r[a]=s;else if(e(s)){const l=r[a];e(l)?r[a]=gl(l,s):r[a]=gl(s)}else r[a]=s}return r}function pT(t,e){return gl(hT,t,e||{})}function gT(t,e){return gl(dT,t,e||{})}class mT{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},a){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!s)return{data:null,error:l};const o=i??aT.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:c}=s.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(s.webauthn.type){case"create":{const c=pT(s.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:u,error:f}=await uT({publicKey:c,signal:o});return u?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}case"request":{const c=gT(s.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:u,error:f}=await fT(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:c,signal:o}));return u?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}}}catch(s){return N(s)?{data:null,error:s}:{data:null,error:new cn("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new oi("rpId is required for WebAuthn authentication")};try{if(!Td())return{data:null,error:new cn("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!s)return{data:null,error:l};const{webauthn:o}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:o.type,rpId:n,rpOrigins:r,credential_response:o.credential_response}})}catch(s){return N(s)?{data:null,error:s}:{data:null,error:new cn("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new oi("rpId is required for WebAuthn registration")};try{if(!Td())return{data:null,error:new cn("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(u=>{var f;return(f=u.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:l};const{data:o,error:c}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return o?this._verify({factorId:s.id,challengeId:o.challengeId,webauthn:{rpId:n,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:c}}catch(s){return N(s)?{data:null,error:s}:{data:null,error:new cn("Unexpected error in register",s)}}}}FE();const yT={url:yE,storageKey:vE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_E,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Cd(t,e,n){return await n()}const Er={};let Sf=class eu{get jwks(){var e,n;return(n=(e=Er[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Er[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},yT),e);if(this.storageKey=a.storageKey,this.instanceID=(n=eu.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,eu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Ae()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new _f({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=M0(a.fetch),this.lock=a.lock||Cd,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Ae()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=B0:this.lock=Cd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new mT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:U0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Sd(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Sd(this.memoryStorage)),Ae()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${O0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Ae()&&(n=kE(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Ae()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),D0(a)){const o=(e=a.details)===null||e===void 0?void 0:e.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return N(n)?this._returnResult({error:n}):this._returnResult({error:new cn("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const a=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:St}),{data:s,error:l}=a;if(l||!s)return this._returnResult({data:{user:null,session:null},error:l});const o=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:c,session:o},error:null})}catch(a){if(N(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var n,r,i;try{let a;if("email"in e){const{email:u,password:f,options:h}=e;let d=null,y=null;this.flowType==="pkce"&&([d,y]=await br(this.storage,this.storageKey)),a=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:d,code_challenge_method:y},xform:St})}else if("phone"in e){const{phone:u,password:f,options:h}=e;a=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:St})}else throw new zi("You must provide either an email or phone number and a password");const{data:s,error:l}=a;if(l||!s)return await Oe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const o=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:c,session:o},error:null})}catch(a){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),N(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:s,options:l}=e;n=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:_d})}else if("phone"in e){const{phone:a,password:s,options:l}=e;n=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:_d})}else throw new zi("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new Gn;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(N(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,a,s,l,o,c,u,f,h;let d,y;if("message"in e)d=e.message,y=e.signature;else{const{chain:v,wallet:b,statement:p,options:g}=e;let m;if(Ae())if(typeof b=="object")m=b;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")m=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=b}const _=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),w=await m.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!w||w.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const x=L0(w[0]);let C=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!C){const A=await m.request({method:"eth_chainId"});C=WE(A)}const T={domain:_.host,address:x,statement:p,uri:_.href,version:"1",chainId:C,nonce:(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.notBefore,requestId:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.resources};d=tT(T),y=await m.request({method:"personal_sign",params:[eT(d),x]})}try{const{data:v,error:b}=await U(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:y},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:St});if(b)throw b;if(!v||!v.session||!v.user){const p=new Gn;return this._returnResult({data:{user:null,session:null},error:p})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(N(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var n,r,i,a,s,l,o,c,u,f,h,d;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:b,wallet:p,statement:g,options:m}=e;let _;if(Ae())if(typeof p=="object")_=p;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))_=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=p}const w=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const x=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),g?{statement:g}:null));let C;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")C=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)C=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),v=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${w.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(i=(r=m==null?void 0:m.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((s=m==null?void 0:m.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((f=(u=m==null?void 0:m.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...m.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const x=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=x}}try{const{data:b,error:p}=await U(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Xn(v)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:St});if(p)throw p;if(!b||!b.session||!b.user){const g=new Gn;return this._returnResult({data:{user:null,session:null},error:g})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:p})}catch(b){if(N(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const n=await Ln(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:s}=await U(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:St});if(await Oe(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const l=new Gn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),N(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:a,nonce:s}=e,l=await U(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:St}),{data:o,error:c}=l;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o||!o.session||!o.user){const u=new Gn;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:c})}catch(n){if(N(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,a,s;try{if("email"in e){const{email:l,options:o}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await br(this.storage,this.storageKey));const{error:f}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(r=o==null?void 0:o.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:l,options:o}=e,{data:c,error:u}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=o==null?void 0:o.data)!==null&&i!==void 0?i:{},create_user:(a=o==null?void 0:o.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(s=o==null?void 0:o.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new zi("You must provide either an email or phone number.")}catch(l){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),N(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var n,r;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:l}=await U(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:St});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,c=s.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:c,session:o},error:null})}catch(i){if(N(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,a,s;try{let l=null,o=null;this.flowType==="pkce"&&([l,o]=await br(this.storage,this.storageKey));const c=await U(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:o}),headers:this.headers,xform:KE});return!((a=c.data)===null||a===void 0)&&a.url&&Ae()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(l){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),N(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ge;const{error:i}=await U(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(N(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:s}=await U(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:s,error:l}=await U(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:l})}throw new zi("You must provide either an email or phone number and a type")}catch(n){if(N(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ln(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Do:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await Ln(this.userStorage,this.storageKey+"-user");s!=null&&s.user?e.user=s.user:e.user=Uo()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};e.user=qE(e.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:un}):await this._useSession(async n=>{var r,i,a;const{data:s,error:l}=n;if(l)throw l;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ge}:await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:un})})}catch(n){if(N(n))return j0(n)&&(await this._removeSession(),await Oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new Ge;const s=i.session;let l=null,o=null;this.flowType==="pkce"&&e.email!=null&&([l,o]=await br(this.storage,this.storageKey));const{data:c,error:u}=await U(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:o}),jwt:s.access_token,xform:un});if(u)throw u;return s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),N(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ge;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:s}=No(e.access_token);if(s.exp&&(r=s.exp,i=r<=n),i){const{data:l,error:o}=await this._callRefreshToken(e.refresh_token);if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:o}=await this._getUser(e.access_token);if(o)throw o;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(N(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:s,error:l}=n;if(l)throw l;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ge;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(N(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Ae())throw new Bi("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Fc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Fc("No code detected.");const{data:g,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:l,expires_at:o,token_type:c}=e;if(!a||!l||!s||!c)throw new Bi("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let h=u+f;o&&(h=parseInt(o));const d=h-u;d*1e3<=Rr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${f}s`);const y=h-f;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,u);const{data:v,error:b}=await this._getUser(a);if(b)throw b;const p={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:h,refresh_token:s,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:e.type},error:null})}catch(r){if(N(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ln(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({error:a});const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:l}=await this.admin.signOut(s,e);if(l&&!(k0(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await Oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=xE(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await br(this.storage,this.storageKey,!0));try{return await U(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),N(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(N(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var s,l,o,c,u;const{data:f,error:h}=a;if(h)throw h;const d=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await U(this.fetch,"GET",d,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Ae()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(N(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:s,provider:l,token:o,access_token:c,nonce:u}=e,f=await U(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:o,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:St}),{data:h,error:d}=f;return d?this._returnResult({data:{user:null,session:null},error:d}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Gn}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:d}))}catch(i){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),N(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)throw s;return await U(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(N(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await NE(async i=>(i>0&&await DE(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await U(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:St})),(i,a)=>{const s=200*Math.pow(2,i);return a&&Rs(a)&&Date.now()+s-r<Rr})}catch(r){if(this._debug(n,"error",r),N(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ae()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ln(this.storage,this.storageKey);if(i&&this.userStorage){let s=await Ln(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await Or(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s==null?void 0:s.user)!==null&&e!==void 0?e:Uo()}else if(i&&!i.user&&!i.user){const s=await Ln(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await Oe(this.storage,this.storageKey+"-user"),await Or(this.storage,this.storageKey,i)):i.user=Uo()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Do;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Do}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),Rs(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(i.access_token);!l&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ge;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Il;const{data:a,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!a.session)throw new Ge;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),N(a)){const s={data:null,error:a};return Rs(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(o){a.push(o)}});if(await Promise.all(s),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Oe(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Or(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=yd(i);await Or(this.storage,this.storageKey,a)}else{const i=yd(n);await Or(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Oe(this.storage,this.storageKey),await Oe(this.storage,this.storageKey+"-code-verifier"),await Oe(this.storage,this.storageKey+"-user"),this.userStorage&&await Oe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ae()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Rr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Rr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Rr}ms, refresh threshold is ${Xc} ticks`),i<=Xc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof bf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ae()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,s]=await br(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await U(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(N(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:o,error:c}=await U(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&o.type==="totp"&&(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(n){if(N(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?oT(e.webauthn.credential_response):cT(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:o}=await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:o}))})}catch(n){if(N(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:sT(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:lT(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(N(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=No(r.access_token);let s=null;a.aal&&(s=a.aal);let l=s;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await U(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ge})})}catch(n){if(N(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Ge});const s=await U(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&Ae()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(N(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Ge});const s=await U(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&Ae()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(N(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await U(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ge})})}catch(e){if(N(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await U(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ge})})}catch(n){if(N(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+SE>i)return r;const{data:a,error:s}=await U(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:d,error:y}=await this.getSession();if(y||!d.session)return this._returnResult({data:null,error:y});r=d.session.access_token}const{header:i,payload:a,signature:s,raw:{header:l,payload:o}}=No(r);n!=null&&n.allowExpired||PE(a.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:d}=await this.getUser(r);if(d)throw d;return{data:{claims:a,header:i,signature:s},error:null}}const u=HE(i.alg),f=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,s,OE(`${l}.${o}`)))throw new hl("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(r){if(N(r))return this._returnResult({data:null,error:r});throw r}}};Sf.nextInstanceID={};const vT=_f,_T=Sf,bT=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:vT,AuthApiError:x0,AuthClient:_T,AuthError:oi,AuthImplicitGrantRedirectError:Bi,AuthInvalidCredentialsError:zi,AuthInvalidJwtError:hl,AuthInvalidTokenResponseError:Gn,AuthPKCEGrantCodeExchangeError:Fc,AuthRetryableFetchError:fl,AuthSessionMissingError:Ge,AuthUnknownError:cn,AuthWeakPasswordError:Wc,CustomAuthError:Ft,GoTrueAdminApi:_f,GoTrueClient:Sf,NavigatorLockAcquireTimeoutError:z0,SIGN_OUT_SCOPES:Os,isAuthApiError:k0,isAuthError:N,isAuthImplicitGrantRedirectError:D0,isAuthRetryableFetchError:Rs,isAuthSessionMissingError:j0,isAuthWeakPasswordError:EE,lockInternals:Yn,navigatorLock:B0,processLock:ZE},Symbol.toStringTag,{value:"Module"})),P0=ya(bT);Object.defineProperty(Hl,"__esModule",{value:!0});Hl.SupabaseAuthClient=void 0;const ST=P0;class ET extends ST.AuthClient{constructor(e){super(e)}}Hl.SupabaseAuthClient=ET;Object.defineProperty(sl,"__esModule",{value:!0});const TT=Gy,CT=Me,wT=u0,RT=hE,ns=C0,OT=w0,wd=Nn,AT=Hl;let xT=class{constructor(e,n,r){var i,a,s;this.supabaseUrl=e,this.supabaseKey=n;const l=(0,wd.validateSupabaseUrl)(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const o=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:ns.DEFAULT_DB_OPTIONS,realtime:ns.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},ns.DEFAULT_AUTH_OPTIONS),{storageKey:o}),global:ns.DEFAULT_GLOBAL_OPTIONS},u=(0,wd.applySettingDefaults)(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=u.auth)!==null&&s!==void 0?s:{},this.headers,u.global.fetch),this.fetch=(0,OT.fetchWithAuth)(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new CT.PostgrestClient(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new RT.StorageClient(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new TT.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:s,flowType:l,lock:o,debug:c,throwOnError:u},f,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new AT.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),f),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,flowType:l,lock:o,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new wT.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};sl.default=xT;(function(t){var e=mr&&mr.__createBinding||(Object.create?function(u,f,h,d){d===void 0&&(d=h);var y=Object.getOwnPropertyDescriptor(f,h);(!y||("get"in y?!f.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(u,d,y)}:function(u,f,h,d){d===void 0&&(d=h),u[d]=f[h]}),n=mr&&mr.__exportStar||function(u,f){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&e(f,u,h)},r=mr&&mr.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const i=r(sl);n(P0,t);var a=Me;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}});var s=Gy;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return s.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return s.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return s.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return s.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return s.FunctionRegion}}),n(u0,t);var l=sl;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return r(l).default}});const o=(u,f,h)=>new i.default(u,f,h);t.createClient=o;function c(){if(typeof window<"u"||typeof process>"u")return!1;const u=process.version;if(u==null)return!1;const f=u.match(/^v(\d+)\./);return f?parseInt(f[1],10)<=18:!1}c()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(hf);const H0=ml(hf),kT=Rd({__proto__:null,default:H0},[hf]),{PostgrestError:uC,FunctionsHttpError:fC,FunctionsFetchError:hC,FunctionsRelayError:dC,FunctionsError:pC,FunctionRegion:gC,SupabaseClient:mC,createClient:jT,GoTrueAdminApi:yC,GoTrueClient:vC,AuthAdminApi:_C,AuthClient:bC,navigatorLock:SC,NavigatorLockAcquireTimeoutError:EC,lockInternals:TC,processLock:CC,SIGN_OUT_SCOPES:wC,AuthError:RC,AuthApiError:OC,AuthUnknownError:AC,CustomAuthError:xC,AuthSessionMissingError:kC,AuthInvalidTokenResponseError:jC,AuthInvalidCredentialsError:DC,AuthImplicitGrantRedirectError:NC,AuthPKCEGrantCodeExchangeError:UC,AuthRetryableFetchError:MC,AuthWeakPasswordError:zC,AuthInvalidJwtError:BC,isAuthError:LC,isAuthApiError:$C,isAuthSessionMissingError:PC,isAuthImplicitGrantRedirectError:HC,isAuthRetryableFetchError:IC,isAuthWeakPasswordError:qC,RealtimePresence:GC,RealtimeChannel:VC,RealtimeClient:YC,REALTIME_LISTEN_TYPES:KC,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:JC,REALTIME_PRESENCE_LISTEN_EVENTS:QC,REALTIME_SUBSCRIBE_STATES:XC,REALTIME_CHANNEL_STATES:ZC}=H0||kT,DT="https://svhrkymvonkkdscflsjn.supabase.co",NT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN2aHJreW12b25ra2RzY2Zsc2puIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1ODc1NjMsImV4cCI6MjA4MDE2MzU2M30.jkk6lDp7DZPIPfBKTOT8AZhzg_-4VpTSV8kCZSr1V54",$n=jT(DT,NT),I0=t=>{const[e,n]=R.useState(null),[r,i]=R.useState([]),[a,s]=R.useState(!1),[l,o]=R.useState(null),c=R.useCallback(async y=>{s(!0),o(null);try{const{data:v,error:b}=await $n.from("races").insert({session_code:t,host_id:y,status:"lobby"}).select().single();if(b)throw b;return n(v),v}catch(v){const b=v instanceof Error?v.message:"Failed to create race";throw o(b),v}finally{s(!1)}},[t]),u=R.useCallback(async(y,v,b)=>{if(e){s(!0),o(null);try{const p={status:y};v&&(p.start_time=v.toISOString()),b&&(p.end_time=b.toISOString(),v&&(p.duration_ms=b.getTime()-v.getTime()));const{data:g,error:m}=await $n.from("races").update(p).eq("id",e.id).select().single();if(m)throw m;return n(g),g}catch(p){const g=p instanceof Error?p.message:"Failed to update race";throw o(g),p}finally{s(!1)}}},[e]),f=R.useCallback(async(y,v,b,p=1)=>{if(e){s(!0),o(null);try{const g={race_id:e.id,gate_role:y,gate_id:v,trigger_time:new Date().toISOString(),client_timestamp:b,confidence:p},{data:m,error:_}=await $n.from("race_triggers").insert(g).select().single();if(_)throw _;return m}catch(g){const m=g instanceof Error?g.message:"Failed to record trigger";throw o(m),g}finally{s(!1)}}},[e]),h=R.useCallback(()=>{const y=r.find(b=>b.gate_role==="START"),v=r.find(b=>b.gate_role==="FINISH");return y&&v?v.client_timestamp-y.client_timestamp:null},[r]),d=R.useCallback(async()=>{s(!0),o(null);try{const{data:y,error:v}=await $n.from("races").select("*").eq("session_code",t).order("created_at",{ascending:!1}).limit(1).single();if(v&&v.code!=="PGRST116")throw v;if(y){n(y);const{data:b,error:p}=await $n.from("race_triggers").select("*").eq("race_id",y.id).order("created_at",{ascending:!0});if(p)throw p;i(b||[])}}catch(y){const v=y instanceof Error?y.message:"Failed to load race";o(v)}finally{s(!1)}},[t]);return R.useEffect(()=>{d()},[d]),R.useEffect(()=>{if(!e)return;const y=$n.channel(`race-${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"race_triggers",filter:`race_id=eq.${e.id}`},v=>{const b=v.new;i(p=>[...p,b])}).subscribe();return()=>{y&&$n.removeChannel(y)}},[e]),{currentRace:e,triggers:r,isLoading:a,error:l,createRace:c,updateRaceStatus:u,recordTrigger:f,calculateRaceDuration:h,loadRace:d}};function UT({onBack:t,myId:e}){const n=ff(),r=I0(e),[i,a]=R.useState("IDLE"),[s,l]=R.useState(0),[o,c]=R.useState(0),[u,f]=R.useState(null),[h,d]=R.useState(!1),[y,v]=R.useState(null),b=y!==null?`${Math.floor(y/1e3)}.${Math.floor(y%1e3/10).toString().padStart(2,"0")}`:`${Math.floor(o/1e3)}.${Math.floor(o%1e3/10).toString().padStart(2,"0")}`,p=n.peers.some(T=>T.role===en.START);R.useEffect(()=>((async()=>{try{await r.createRace(e)}catch(A){console.error("Failed to create race:",A)}})(),()=>{u&&clearInterval(u)}),[e,r,u]);const g=R.useCallback(()=>{a("RUNNING");const T=Date.now();l(T);const A=setInterval(()=>{c(Date.now()-T)},10);f(A)},[]),m=R.useCallback(()=>{u&&(clearInterval(u),f(null))},[u]),_=R.useCallback(async(T,A)=>{i==="ARMED"&&T===en.START?(g(),await r.updateRaceStatus("racing",new Date)):i==="RUNNING"&&T===en.FINISH&&(m(),a("FINISHED"),n.broadcastState("LOBBY"),c(Date.now()-s),await r.updateRaceStatus("finished",void 0,new Date))},[i,g,m,s,n,r]),w=R.useCallback((T,A)=>{n.peers.forEach(oe=>{oe.role===A&&oe.id!==T&&n.assignRole(oe.id,"NONE")}),n.assignRole(T,A)},[n]),x=R.useCallback(async()=>{var T;a("ARMED"),c(0),v(null),n.broadcastState("ARMED",(T=r.currentRace)==null?void 0:T.id),await r.updateRaceStatus("armed")},[n,r]),C=R.useCallback(async()=>{m(),a("IDLE"),n.broadcastState("LOBBY"),c(0),v(null),await r.updateRaceStatus("lobby")},[m,n,r]);return R.useEffect(()=>{const T=n.latestMessage;T&&T.type==="TRIGGER"&&T.payload&&_(T.payload.role,T.payload.timestamp)},[n.latestMessage,_]),R.useEffect(()=>{if(r.triggers.length>=2){const T=r.triggers.find(M=>M.gate_role==="START"),A=r.triggers.find(M=>M.gate_role==="FINISH");if(T&&A){const M=r.calculateRaceDuration();M!==null&&(d(!0),v(M),setTimeout(()=>{d(!1)},2e3))}}},[r]),E.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col",children:[E.jsxs("div",{className:"p-4 bg-slate-800 flex justify-between items-center shadow-md",children:[E.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 tracking-wider",children:"Session Code"}),E.jsx("h1",{className:"font-mono font-bold text-3xl text-blue-400 tracking-widest",children:e})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsxs("div",{className:"px-3 py-1 bg-slate-700 rounded text-sm font-mono",children:["Peers: ",n.peers.length]}),E.jsxs("div",{className:`px-3 py-1 rounded text-sm font-mono flex items-center space-x-1 ${n.connectionStatus.includes("Error")||n.connectionStatus.includes("Disconnected")?"bg-red-600":n.connectionStatus==="Online"?"bg-green-600":"bg-yellow-600"}`,children:[E.jsx("div",{className:`w-2 h-2 rounded-full ${n.connectionStatus.includes("Error")||n.connectionStatus.includes("Disconnected")?"bg-red-300":n.connectionStatus==="Online"?"bg-green-300 animate-pulse":"bg-yellow-300"}`}),E.jsx("span",{children:n.connectionStatus})]})]})]}),E.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-6 space-y-8",children:[E.jsxs("div",{className:"text-center",children:[E.jsxs("div",{className:"text-9xl font-mono font-bold tracking-tighter tabular-nums text-white drop-shadow-lg relative",children:[b,h&&E.jsx("div",{className:"absolute -top-4 -right-4 bg-green-500 text-white text-xs px-2 py-1 rounded animate-pulse",children:"Corrected"})]}),E.jsx("div",{className:"text-slate-400 uppercase tracking-widest mt-2 font-semibold",children:i}),y!==null&&E.jsx("div",{className:"text-green-400 text-sm mt-1",children:"Precise timing from database"})]}),E.jsxs("div",{className:"flex gap-4",children:[(i==="IDLE"||i==="FINISHED")&&E.jsx("button",{onClick:x,disabled:!p,className:"px-8 py-3 bg-green-600 hover:bg-green-700 disabled:bg-slate-600 disabled:opacity-50 text-white font-semibold rounded-lg transition-colors",children:"Arm System"}),i==="ARMED"&&E.jsx("button",{onClick:C,className:"px-8 py-3 bg-yellow-600 hover:bg-yellow-700 text-white font-semibold rounded-lg transition-colors",children:"Cancel"}),i==="RUNNING"&&E.jsx("button",{onClick:C,className:"px-8 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-colors",children:"Stop Race"})]})]}),E.jsxs("div",{className:"bg-slate-800 p-4 border-t border-slate-700",children:[E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:n.peers.map(T=>E.jsxs("div",{className:`p-3 rounded-lg text-center ${T.role===en.START?"bg-green-700":T.role===en.FINISH?"bg-blue-700":"bg-slate-600"}`,children:[E.jsx("div",{className:"text-sm font-mono text-slate-300",children:T.id}),E.jsx("div",{className:"text-xs text-slate-400",children:T.role})]},T.id))}),n.peers.length>0&&E.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[E.jsx("button",{onClick:()=>{const T=n.peers.find(A=>A.role==="NONE");T&&w(T.id,en.START)},disabled:!n.peers.some(T=>T.role==="NONE"),className:"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-slate-600 disabled:opacity-50 text-white text-sm rounded-lg transition-colors",children:"Set Start"}),E.jsx("button",{onClick:()=>{const T=n.peers.find(A=>A.role==="NONE");T&&w(T.id,en.FINISH)},disabled:!n.peers.some(T=>T.role==="NONE"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 disabled:opacity-50 text-white text-sm rounded-lg transition-colors",children:"Set Finish"}),E.jsx("button",{onClick:()=>{n.broadcastReset()},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg transition-colors",children:"Reset All"})]})]})]})}const MT={sensitivity:20,threshold:50,roi:{x:0,y:0,width:100,height:100},disarmDuration:1e3},zT=(t={})=>{const e=R.useMemo(()=>({...MT,...t}),[t]),n=R.useRef(null),r=R.useRef(null),i=R.useRef(null),a=R.useRef(null),s=R.useRef(null),[l,o]=R.useState(!1),[c,u]=R.useState(!1),[f,h]=R.useState(0),d=R.useCallback(()=>{n.current&&(n.current.getTracks().forEach(p=>p.stop()),n.current=null),s.current&&(cancelAnimationFrame(s.current),s.current=null)},[]);R.useEffect(()=>{const p=document.createElement("canvas");p.width=e.roi.width,p.height=e.roi.height;const g=p.getContext("2d",{willReadFrequently:!0});return g&&(r.current=p,i.current=g),()=>{d()}},[e.roi,d]);const y=R.useCallback(p=>{const g=r.current,m=i.current,_=n.current;if(!g||!m||!_)return;const w=()=>{if(!_||!m||p.paused||p.ended){s.current=requestAnimationFrame(w);return}const x=(p.videoWidth-e.roi.width)/2,C=(p.videoHeight-e.roi.height)/2;m.drawImage(p,x,C,e.roi.width,e.roi.height,0,0,e.roi.width,e.roi.height);const A=m.getImageData(0,0,e.roi.width,e.roi.height).data;if(a.current){let M=0;const oe=a.current;for(let he=0;he<A.length;he+=4){const gr=Math.abs(A[he]-oe[he]),bi=Math.abs(A[he+1]-oe[he+1]),Un=Math.abs(A[he+2]-oe[he+2]);gr+bi+Un>e.threshold&&M++}h(M),l&&M>e.sensitivity&&(u(!0),o(!1))}a.current=new Uint8ClampedArray(A),s.current=requestAnimationFrame(w)};w()},[l,e]),v=R.useCallback(async p=>{try{const g=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:640},height:{ideal:480}},audio:!1});n.current=g,p.srcObject=g,p.play(),y(p)}catch(g){console.error("Error accessing camera:",g)}},[y]),b=R.useCallback(p=>{o(p),p&&u(!1)},[]);return{isArmed:l,motionDetected:c,currentDiff:f,startCamera:v,stopCamera:d,armSystem:b}};function BT({onBack:t,myId:e,sessionCode:n}){const r=R.useRef(null),i=ff(),a=zT(),s=I0(n),[l,o]=R.useState("LOBBY"),[c,u]=R.useState("NONE"),[f,h]=R.useState(!1),d=c?c==="START"?"Start Gate (Sens 1)":c==="FINISH"?"Finish Gate (Sens 2)":"Unassigned Sensor":"Unassigned Sensor",y=R.useCallback(async()=>{var b;if(l!=="ARMED"||!c)return;o("TRIGGERED");const v=Date.now();"vibrate"in navigator&&navigator.vibrate(200),c!=="NONE"&&i.sendTrigger(c,v,(b=s.currentRace)==null?void 0:b.id),h(!0);try{await s.recordTrigger(c,e,v,1)}catch(p){console.error("Failed to write trigger to Supabase:",p)}finally{h(!1)}},[l,c,e,i,s]);return R.useEffect(()=>()=>{a.stopCamera()},[a]),R.useEffect(()=>{var b,p,g;const v=i.latestMessage;if(v)switch(v.type){case"ROLE_ASSIGN":(b=v.payload)!=null&&b.role&&u(v.payload.role);break;case"STATE_CHANGE":((p=v.payload)==null?void 0:p.state)==="ARMED"?(o("ARMED"),a.armSystem(!0)):((g=v.payload)==null?void 0:g.state)==="LOBBY"&&(o("LOBBY"),a.armSystem(!1));break;case"RESET":o("LOBBY"),a.armSystem(!1);break}},[i.latestMessage,a]),R.useEffect(()=>{a.motionDetected&&l==="ARMED"&&y()},[a.motionDetected,l,y]),R.useEffect(()=>{const b=setTimeout(async()=>{r.current&&await a.startCamera(r.current)},100);return()=>clearTimeout(b)},[a]),E.jsxs("div",{className:"relative h-screen w-full bg-black overflow-hidden flex flex-col",children:[E.jsx("div",{className:"absolute top-0 left-0 w-full z-20 p-4 bg-gradient-to-b from-black/80 to-transparent",children:E.jsxs("div",{className:"flex justify-between items-center text-white",children:[E.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),E.jsxs("div",{className:"text-center",children:[E.jsx("h2",{className:"font-bold text-lg text-blue-400",children:e}),E.jsx("p",{className:"text-sm opacity-80",children:d})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[f&&E.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse",title:"Writing to database"}),E.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-mono font-bold uppercase tracking-wider flex items-center space-x-1 ${l==="ARMED"?"bg-green-600":l==="LOBBY"?"bg-yellow-600":"bg-red-600"}`,children:[E.jsx("div",{className:`w-2 h-2 rounded-full ${l==="ARMED"?"bg-green-300 animate-pulse":l==="LOBBY"?"bg-yellow-300":"bg-red-300"}`}),E.jsx("span",{children:l})]}),E.jsxs("div",{className:`px-2 py-1 rounded text-xs font-mono flex items-center space-x-1 ${i.connectionStatus.includes("Error")||i.connectionStatus.includes("Disconnected")?"bg-red-600":i.connectionStatus==="Online"?"bg-green-600":"bg-yellow-600"}`,children:[E.jsx("div",{className:`w-2 h-2 rounded-full ${i.connectionStatus.includes("Error")||i.connectionStatus.includes("Disconnected")?"bg-red-300":i.connectionStatus==="Online"?"bg-green-300 animate-pulse":"bg-yellow-300"}`}),E.jsx("span",{className:"hidden sm:inline",children:i.connectionStatus})]})]})]})}),E.jsxs("div",{className:"flex-1 relative",children:[E.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),E.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/30",children:[E.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2",children:E.jsx("div",{className:`w-32 h-32 rounded-full border-4 flex items-center justify-center ${l==="ARMED"?"bg-green-500/20 border-green-400 animate-pulse":l==="TRIGGERED"?"bg-red-500/20 border-red-400":"bg-slate-500/20 border-slate-400"}`,children:E.jsx("div",{className:`w-24 h-24 rounded-full border-2 ${l==="ARMED"?"border-green-300 animate-ping":l==="TRIGGERED"?"border-red-300":"border-slate-300"}`})})}),E.jsxs("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 text-center",children:[E.jsx("p",{className:"text-white text-xl font-semibold mb-2",children:l==="ARMED"?"Ready for Detection":l==="TRIGGERED"?"Motion Detected!":"Waiting for Connection"}),c!=="NONE"&&l!=="TRIGGERED"&&E.jsx("p",{className:"text-slate-300 text-sm",children:"Position camera and wait for motion"}),f&&E.jsx("p",{className:"text-green-400 text-xs mt-1 animate-pulse",children:"Saving precise timing..."})]})]})]})]})}function LT(){const[t,e]=R.useState("LANDING"),[n,r]=R.useState(!1),[i,a]=R.useState(""),[s,l]=R.useState("Start Gate"),o=ff(),c=async()=>{r(!0);try{await o.init(!0),e("HOST_VIEW")}catch(d){alert("Failed to start host: "+d)}finally{r(!1)}},u=async()=>{if(!(!i||i.length!==4)){r(!0);try{await o.init(!1),o.connectToHost(i,s),e("GATE_VIEW")}catch(d){alert("Failed to join: "+d)}finally{r(!1)}}},f=d=>{i.length<4&&a(y=>y+d)},h=()=>{a(d=>d.slice(0,-1))};return t==="HOST_VIEW"?E.jsx(UT,{onBack:()=>e("LANDING"),myId:o.myId}):t==="GATE_VIEW"?E.jsx(BT,{onBack:()=>e("LANDING"),myId:o.myId,sessionCode:i}):E.jsxs(dS,{children:[E.jsxs("main",{className:"w-full h-full font-sans text-white min-h-screen flex flex-col items-center justify-center p-6 bg-gradient-to-br from-slate-900 to-slate-800",children:[E.jsxs("div",{className:"mb-8 text-center",children:[E.jsx("h1",{className:"text-4xl font-black italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400",children:"SPRINT SYNC"}),E.jsx("p",{className:"text-slate-400 mt-1 font-mono text-xs",children:"Precision Distributed Timing"})]}),E.jsxs("div",{className:"w-full max-w-md space-y-4",children:[E.jsxs("button",{onClick:c,disabled:n,className:"w-full group relative overflow-hidden bg-slate-800 hover:bg-slate-700 p-6 rounded-2xl border border-slate-700 transition-all hover:border-blue-500 hover:shadow-xl hover:shadow-blue-500/20 text-left flex items-center justify-between disabled:opacity-50",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-xl font-bold text-white",children:"Start New Session"}),E.jsx("p",{className:"text-slate-400 text-xs",children:"I am the timer display"})]}),E.jsx("div",{className:"bg-blue-500/10 p-2 rounded-lg text-blue-400 group-hover:bg-blue-500 group-hover:text-white transition",children:E.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})})})]}),E.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:[E.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Join Session"}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-500 mb-1",children:"Select Gate Type"}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsx("button",{onClick:()=>l("Start Gate"),className:`h-12 rounded-lg border font-bold text-sm transition hover:border-blue-500 focus:outline-none relative overflow-hidden ${s==="Start Gate"?"bg-blue-600 border-blue-500 text-white":"bg-slate-900 border-slate-600 text-slate-400"}`,children:"START"}),E.jsx("button",{onClick:()=>l("Finish Gate"),className:`h-12 rounded-lg border font-bold text-sm transition hover:border-purple-500 focus:outline-none relative overflow-hidden ${s==="Finish Gate"?"bg-purple-600 border-purple-500 text-white":"bg-slate-900 border-slate-600 text-slate-400"}`,children:"FINISH"})]})]}),E.jsxs("div",{className:"relative",children:[E.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-500 mb-1 text-center",children:"Session Code"}),E.jsx("div",{className:`h-16 w-full bg-slate-900 border-2 rounded-xl flex items-center justify-center space-x-4 transition-colors ${i.length===4?"border-emerald-500":"border-slate-700"}`,children:[0,1,2,3].map(d=>E.jsx("div",{className:"w-8 text-center text-3xl font-mono font-bold",children:i[d]||""},d))})]}),E.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[[1,2,3,4,5,6,7,8,9].map(d=>E.jsx("button",{onClick:()=>f(d),className:"h-12 bg-slate-700 hover:bg-slate-600 active:bg-slate-500 rounded-lg text-lg font-bold transition shadow-lg shadow-slate-900/50",children:d},d)),E.jsx("div",{className:"pointer-events-none"}),E.jsx("button",{onClick:()=>f(0),className:"h-12 bg-slate-700 hover:bg-slate-600 active:bg-slate-500 rounded-lg text-lg font-bold transition shadow-lg shadow-slate-900/50",children:"0"}),E.jsx("button",{onClick:h,className:"h-12 bg-slate-800 hover:bg-red-900/30 text-red-400 rounded-lg flex items-center justify-center transition",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M3 12l6.414 6.414a2 2 0 001.414.586H19a2 2 0 002-2V7a2 2 0 00-2-2h-8.172a2 2 0 00-1.414.586L3 12z"})})})]}),E.jsx("button",{onClick:u,disabled:i.length!==4||n,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-700 disabled:text-slate-500 rounded-xl font-bold transition shadow-lg shadow-emerald-900/50 mt-2",children:"CONNECT CAMERA"})]})]})]}),E.jsx("div",{className:"mt-8 text-xs text-slate-600",children:"v1.0.1  WebRTC  Motion Detection"})]}),E.jsx(pS,{})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("ServiceWorker registration successful with scope: ",t.scope)},t=>{console.log("ServiceWorker registration failed: ",t)})});Ib.createRoot(document.getElementById("root")).render(E.jsx(ov.StrictMode,{children:E.jsx(LT,{})}));
//# sourceMappingURL=index-hsZpMfVd.js.map
